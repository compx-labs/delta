/* eslint-disable */
/**
 * This file was automatically generated by @algorandfoundation/algokit-client-generator.
 * DO NOT MODIFY IT BY HAND.
 * requires: @algorandfoundation/algokit-utils: ^7
 */
import { type AlgorandClient } from '@algorandfoundation/algokit-utils/types/algorand-client'
import { ABIReturn, AppReturn, SendAppTransactionResult } from '@algorandfoundation/algokit-utils/types/app'
import { Arc56Contract, getArc56ReturnValue, getABIStructFromABITuple } from '@algorandfoundation/algokit-utils/types/app-arc56'
import {
  AppClient as _AppClient,
  AppClientMethodCallParams,
  AppClientParams,
  AppClientBareCallParams,
  CallOnComplete,
  AppClientCompilationParams,
  ResolveAppClientByCreatorAndName,
  ResolveAppClientByNetwork,
  CloneAppClientParams,
} from '@algorandfoundation/algokit-utils/types/app-client'
import { AppFactory as _AppFactory, AppFactoryAppClientParams, AppFactoryResolveAppClientByCreatorAndNameParams, AppFactoryDeployParams, AppFactoryParams, CreateSchema } from '@algorandfoundation/algokit-utils/types/app-factory'
import { TransactionComposer, AppCallMethodCall, AppMethodCallTransactionArgument, SimulateOptions, RawSimulateOptions, SkipSignaturesSimulateOptions } from '@algorandfoundation/algokit-utils/types/composer'
import { SendParams, SendSingleTransactionResult, SendAtomicTransactionComposerResults } from '@algorandfoundation/algokit-utils/types/transaction'
import { Address, encodeAddress, modelsv2, OnApplicationComplete, Transaction, TransactionSigner } from 'algosdk'

export const APP_SPEC: Arc56Contract = {"name":"staking","structs":{"StakeInfoRecord":[{"name":"stake","type":"uint64"},{"name":"rewardDebt","type":"uint64"}]},"methods":[{"name":"createApplication","args":[{"type":"address","name":"adminAddress"},{"type":"uint64","name":"masterRepoApp"}],"returns":{"type":"void"},"actions":{"create":["NoOp"],"call":[]},"readonly":false,"events":[],"recommendations":{}},{"name":"initApplication","args":[{"type":"uint64","name":"stakedAssetId"},{"type":"uint64","name":"rewardAssetId"},{"type":"uint64","name":"rewardAmount"},{"type":"uint64","name":"aprBps"},{"type":"uint64","name":"startTime"},{"type":"uint64","name":"duration"},{"type":"pay","name":"initialBalanceTxn"}],"returns":{"type":"void"},"actions":{"create":[],"call":["NoOp"]},"readonly":false,"events":[],"recommendations":{}},{"name":"fundRewards","args":[{"type":"axfer","name":"rewardFundingTxn"},{"type":"uint64","name":"rewardAmount"}],"returns":{"type":"void"},"actions":{"create":[],"call":["NoOp"]},"readonly":false,"events":[],"recommendations":{}},{"name":"fundMoreRewards","args":[{"type":"axfer","name":"rewardFundingTxn"},{"type":"uint64","name":"rewardAmount"}],"returns":{"type":"void"},"actions":{"create":[],"call":["NoOp"]},"readonly":false,"events":[],"recommendations":{}},{"name":"removeRewards","args":[],"returns":{"type":"void"},"actions":{"create":[],"call":["NoOp"]},"readonly":false,"events":[],"recommendations":{}},{"name":"setContractActive","args":[],"returns":{"type":"void"},"actions":{"create":[],"call":["NoOp"]},"readonly":false,"events":[],"recommendations":{}},{"name":"setContractInactive","args":[],"returns":{"type":"void"},"actions":{"create":[],"call":["NoOp"]},"readonly":false,"events":[],"recommendations":{}},{"name":"updateAdminAddress","args":[{"type":"address","name":"adminAddress"}],"returns":{"type":"void"},"actions":{"create":[],"call":["NoOp"]},"readonly":false,"events":[],"recommendations":{}},{"name":"updateSuperAdminAddress","args":[{"type":"address","name":"superAdminAddress"}],"returns":{"type":"void"},"actions":{"create":[],"call":["NoOp"]},"readonly":false,"events":[],"recommendations":{}},{"name":"withdrawPlatformFees","args":[{"type":"address","name":"receiver"}],"returns":{"type":"void"},"actions":{"create":[],"call":["NoOp"]},"readonly":false,"events":[],"recommendations":{}},{"name":"emergencyWithdrawAsset","args":[{"type":"uint64","name":"assetId"},{"type":"uint64","name":"amount"},{"type":"address","name":"receiver"}],"returns":{"type":"void"},"actions":{"create":[],"call":["NoOp"]},"readonly":false,"events":[],"recommendations":{}},{"name":"stake","args":[{"type":"axfer","name":"stakeTxn"},{"type":"uint64","name":"quantity"},{"type":"pay","name":"mbrTxn"}],"returns":{"type":"void"},"actions":{"create":[],"call":["NoOp"]},"readonly":false,"events":[],"recommendations":{}},{"name":"claimRewards","args":[],"returns":{"type":"void"},"actions":{"create":[],"call":["NoOp"]},"readonly":false,"events":[],"recommendations":{}},{"name":"unstake","args":[{"type":"uint64","name":"quantity"}],"returns":{"type":"void"},"actions":{"create":[],"call":["NoOp"]},"readonly":false,"events":[],"recommendations":{}},{"name":"deleteApplication","args":[],"returns":{"type":"void"},"actions":{"create":[],"call":["DeleteApplication"]},"readonly":false,"events":[],"recommendations":{}},{"name":"gas","args":[],"returns":{"type":"void"},"actions":{"create":[],"call":["NoOp"]},"readonly":false,"events":[],"recommendations":{}}],"arcs":[22,28],"networks":{},"state":{"schema":{"global":{"ints":1,"bytes":20},"local":{"ints":0,"bytes":0}},"keys":{"global":{"staked_asset_id":{"keyType":"AVMString","valueType":"uint64","key":"c3Rha2VkX2Fzc2V0X2lk"},"reward_asset_id":{"keyType":"AVMString","valueType":"uint64","key":"cmV3YXJkX2Fzc2V0X2lk"},"total_staked":{"keyType":"AVMString","valueType":"uint64","key":"dG90YWxfc3Rha2Vk"},"reward_per_token":{"keyType":"AVMString","valueType":"uint64","key":"cmV3YXJkX3Blcl90b2tlbg=="},"reward_rate":{"keyType":"AVMString","valueType":"uint64","key":"cmV3YXJkX3JhdGU="},"start_time":{"keyType":"AVMString","valueType":"uint64","key":"c3RhcnRfdGltZQ=="},"last_update_time":{"keyType":"AVMString","valueType":"uint64","key":"bGFzdF91cGRhdGVfdGltZQ=="},"total_rewards":{"keyType":"AVMString","valueType":"uint64","key":"dG90YWxfcmV3YXJkcw=="},"accrued_rewards":{"keyType":"AVMString","valueType":"uint64","key":"YWNjcnVlZF9yZXdhcmRz"},"apr_bps":{"keyType":"AVMString","valueType":"uint64","key":"YXByX2Jwcw=="},"rewards_exhausted":{"keyType":"AVMString","valueType":"uint64","key":"cmV3YXJkc19leGhhdXN0ZWQ="},"rewards_paid":{"keyType":"AVMString","valueType":"uint64","key":"cmV3YXJkc19wYWlk"},"initialized":{"keyType":"AVMString","valueType":"uint64","key":"aW5pdGlhbGl6ZWQ="},"admin_address":{"keyType":"AVMString","valueType":"address","key":"YWRtaW5fYWRkcmVzcw=="},"super_admin_address":{"keyType":"AVMString","valueType":"address","key":"c3VwZXJfYWRtaW5fYWRkcmVzcw=="},"num_stakers":{"keyType":"AVMString","valueType":"uint64","key":"bnVtX3N0YWtlcnM="},"contract_version":{"keyType":"AVMString","valueType":"uint64","key":"Y29udHJhY3RfdmVyc2lvbg=="},"contract_state":{"keyType":"AVMString","valueType":"uint64","key":"Y29udHJhY3Rfc3RhdGU="},"master_repo_app":{"keyType":"AVMString","valueType":"AVMUint64","key":"bWFzdGVyX3JlcG9fYXBw"},"platform_fee_bps":{"keyType":"AVMString","valueType":"uint64","key":"cGxhdGZvcm1fZmVlX2Jwcw=="},"platform_fees_accrued":{"keyType":"AVMString","valueType":"uint64","key":"cGxhdGZvcm1fZmVlc19hY2NydWVk"}},"local":{},"box":{}},"maps":{"global":{},"local":{},"box":{"stakers":{"keyType":"address","valueType":"StakeInfoRecord","prefix":"c3Q="}}}},"bareActions":{"create":[],"call":[]},"sourceInfo":{"approval":{"sourceInfo":[{"pc":[680],"errorMessage":"Already initialized"},{"pc":[1443],"errorMessage":"Amount mismatch"},{"pc":[1842,1857,2120,2344],"errorMessage":"Box must have value"},{"pc":[1146,1194],"errorMessage":"Bytes has valid prefix"},{"pc":[709],"errorMessage":"Invalid APR"},{"pc":[1437],"errorMessage":"Invalid asset"},{"pc":[707],"errorMessage":"Invalid duration"},{"pc":[1205],"errorMessage":"Invalid platform fee"},{"pc":[1720],"errorMessage":"Invalid quantity"},{"pc":[706,979],"errorMessage":"Invalid reward amount"},{"pc":[722],"errorMessage":"Invalid time range"},{"pc":[1323],"errorMessage":"No fees accrued"},{"pc":[1066],"errorMessage":"No rewards to remove"},{"pc":[1427,2133,2352],"errorMessage":"No stake"},{"pc":[1417,2104,2337],"errorMessage":"No stake found for user"},{"pc":[499],"errorMessage":"OnCompletion must be DeleteApplication && can only call when not creating"},{"pc":[363],"errorMessage":"OnCompletion must be NoOp"},{"pc":[879,976,1043],"errorMessage":"Only admin can fund rewards"},{"pc":[672],"errorMessage":"Only admin can init application"},{"pc":[1108],"errorMessage":"Only admin can set active"},{"pc":[1240],"errorMessage":"Only admin can set inactive"},{"pc":[1268],"errorMessage":"Only admin can update admin address"},{"pc":[2659],"errorMessage":"Only super admin can delete application"},{"pc":[1292],"errorMessage":"Only super admin can update super admin address"},{"pc":[1397],"errorMessage":"Only super admin can withdraw"},{"pc":[1316],"errorMessage":"Only super admin can withdraw fees"},{"pc":[1729,2113],"errorMessage":"Pool is inactive"},{"pc":[688,887,1051,1405],"errorMessage":"Pool must be inactive"},{"pc":[905],"errorMessage":"Reward amount mismatch"},{"pc":[2709],"errorMessage":"Reward asset balance not empty"},{"pc":[895],"errorMessage":"Rewards already started"},{"pc":[1737],"errorMessage":"Rewards exhausted"},{"pc":[2692],"errorMessage":"Staked asset balance not empty"},{"pc":[695,2666],"errorMessage":"Staked assets still exist"},{"pc":[703,2674],"errorMessage":"Stakers exist"},{"pc":[2372],"errorMessage":"Unstake amount exceeds balance"},{"pc":[796,939,1013,1773,1795],"errorMessage":"assert target is match for conditions"},{"pc":[670,677,685,692,700,874,884,892,900,927,971,1001,1018,1038,1048,1056,1062,1072,1106,1114,1162,1223,1234,1266,1290,1314,1320,1332,1395,1402,1432,1448,1474,1479,1504,1542,1554,1568,1596,1628,1640,1725,1734,1761,1866,1894,1899,1924,1962,1974,1988,2022,2035,2063,2109,2141,2167,2172,2197,2235,2247,2261,2288,2377,2403,2408,2433,2471,2483,2497,2525,2554,2584,2619,2657,2663,2671,2681,2699,2715,2744,2750,2782,2798,2806,2820,2884,2908,2912,2918,2938,2944,2985,3001,3016,3035,3041],"errorMessage":"check GlobalState exists"},{"pc":[511,1152,1259,1283,1307,1388],"errorMessage":"invalid number of bytes for arc4.static_array<arc4.uint8, 32>"},{"pc":[519,594,604,614,626,635,647,866,963,1199,1366,1375,1703,2327],"errorMessage":"invalid number of bytes for arc4.uint64"},{"pc":[3004],"errorMessage":"mulDivW: division by zero"},{"pc":[858,955,1695],"errorMessage":"transaction type is axfer"},{"pc":[663,1717],"errorMessage":"transaction type is pay"}],"pcOffsetMethod":"none"},"clear":{"sourceInfo":[],"pcOffsetMethod":"none"}},"source":{"approval":"I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYXJjNC9pbmRleC5kLnRzOjpDb250cmFjdC5hcHByb3ZhbFByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBpbnRjYmxvY2sgMCAxIDggNCAxMDAwMDAwMDAwMDAwMDAwIDEwMDAwIDIyNTAwCiAgICBieXRlY2Jsb2NrIDB4MDAwMDAwMDAwMDAwMDAwMCAicmV3YXJkc19wYWlkIiAicGxhdGZvcm1fZmVlc19hY2NydWVkIiAidG90YWxfc3Rha2VkIiAic3QiICJhZG1pbl9hZGRyZXNzIiAicmV3YXJkX2Fzc2V0X2lkIiAiYWNjcnVlZF9yZXdhcmRzIiAiY29udHJhY3Rfc3RhdGUiICJyZXdhcmRfcGVyX3Rva2VuIiAibnVtX3N0YWtlcnMiICJsYXN0X3VwZGF0ZV90aW1lIiAicmV3YXJkc19leGhhdXN0ZWQiICJ0b3RhbF9yZXdhcmRzIiAic3VwZXJfYWRtaW5fYWRkcmVzcyIgInBsYXRmb3JtX2ZlZV9icHMiICJzdGFrZWRfYXNzZXRfaWQiIDB4MDAwMDAwMDAwMDAwMDAwMSAibWFzdGVyX3JlcG9fYXBwIiAiaW5pdGlhbGl6ZWQiICJyZXdhcmRfcmF0ZSIgInN0YXJ0X3RpbWUiICJhcHJfYnBzIiAweDE1MWY3Yzc1CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjQtMjUKICAgIC8vIEBjb250cmFjdCh7IG5hbWU6ICJzdGFraW5nIiwgYXZtVmVyc2lvbjogMTEgfSkKICAgIC8vIGV4cG9ydCBjbGFzcyBTdGFraW5nIGV4dGVuZHMgQ29udHJhY3QgewogICAgcHVzaGJ5dGVzIDB4MjQ4N2MzMmMgLy8gbWV0aG9kICJkZWxldGVBcHBsaWNhdGlvbigpdm9pZCIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDAKICAgIG1hdGNoIG1haW5fZGVsZXRlQXBwbGljYXRpb25fcm91dGVAMgoKbWFpbl9zd2l0Y2hfY2FzZV9uZXh0QDM6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjQtMjUKICAgIC8vIEBjb250cmFjdCh7IG5hbWU6ICJzdGFraW5nIiwgYXZtVmVyc2lvbjogMTEgfSkKICAgIC8vIGV4cG9ydCBjbGFzcyBTdGFraW5nIGV4dGVuZHMgQ29udHJhY3QgewogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBtdXN0IGJlIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBieiBtYWluX2NyZWF0ZV9Ob09wQDIwCiAgICBwdXNoYnl0ZXNzIDB4NzczNmE0NTEgMHg4MjY0Yzk4ZSAweDcxYmZmZjExIDB4NTYxMzQ0MTEgMHhjM2JkN2VkNCAweGRhMjcwMDRhIDB4YTNmZWE0MGYgMHg2NTkwNDY3YSAweDkwN2RmM2Y2IDB4Mjk0ZDM3ZTkgMHg3YTllZTE4OSAweGE1YWU2YmQxIDB4ODEzY2U4OWEgMHgzMTcyY2E5ZCAvLyBtZXRob2QgImluaXRBcHBsaWNhdGlvbih1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCxwYXkpdm9pZCIsIG1ldGhvZCAiZnVuZFJld2FyZHMoYXhmZXIsdWludDY0KXZvaWQiLCBtZXRob2QgImZ1bmRNb3JlUmV3YXJkcyhheGZlcix1aW50NjQpdm9pZCIsIG1ldGhvZCAicmVtb3ZlUmV3YXJkcygpdm9pZCIsIG1ldGhvZCAic2V0Q29udHJhY3RBY3RpdmUoKXZvaWQiLCBtZXRob2QgInNldENvbnRyYWN0SW5hY3RpdmUoKXZvaWQiLCBtZXRob2QgInVwZGF0ZUFkbWluQWRkcmVzcyhhZGRyZXNzKXZvaWQiLCBtZXRob2QgInVwZGF0ZVN1cGVyQWRtaW5BZGRyZXNzKGFkZHJlc3Mpdm9pZCIsIG1ldGhvZCAid2l0aGRyYXdQbGF0Zm9ybUZlZXMoYWRkcmVzcyl2b2lkIiwgbWV0aG9kICJlbWVyZ2VuY3lXaXRoZHJhd0Fzc2V0KHVpbnQ2NCx1aW50NjQsYWRkcmVzcyl2b2lkIiwgbWV0aG9kICJzdGFrZShheGZlcix1aW50NjQscGF5KXZvaWQiLCBtZXRob2QgImNsYWltUmV3YXJkcygpdm9pZCIsIG1ldGhvZCAidW5zdGFrZSh1aW50NjQpdm9pZCIsIG1ldGhvZCAiZ2FzKCl2b2lkIgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAogICAgbWF0Y2ggaW5pdEFwcGxpY2F0aW9uIGZ1bmRSZXdhcmRzIGZ1bmRNb3JlUmV3YXJkcyByZW1vdmVSZXdhcmRzIHNldENvbnRyYWN0QWN0aXZlIHNldENvbnRyYWN0SW5hY3RpdmUgdXBkYXRlQWRtaW5BZGRyZXNzIHVwZGF0ZVN1cGVyQWRtaW5BZGRyZXNzIHdpdGhkcmF3UGxhdGZvcm1GZWVzIGVtZXJnZW5jeVdpdGhkcmF3QXNzZXQgc3Rha2UgY2xhaW1SZXdhcmRzIHVuc3Rha2UgbWFpbl9nYXNfcm91dGVAMTgKICAgIGVycgoKbWFpbl9nYXNfcm91dGVAMTg6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTkzCiAgICAvLyBAYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAiTm9PcCIgfSkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCm1haW5fY3JlYXRlX05vT3BAMjA6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjQtMjUKICAgIC8vIEBjb250cmFjdCh7IG5hbWU6ICJzdGFraW5nIiwgYXZtVmVyc2lvbjogMTEgfSkKICAgIC8vIGV4cG9ydCBjbGFzcyBTdGFraW5nIGV4dGVuZHMgQ29udHJhY3QgewogICAgcHVzaGJ5dGVzIDB4Y2QxOWYxYTYgLy8gbWV0aG9kICJjcmVhdGVBcHBsaWNhdGlvbihhZGRyZXNzLHVpbnQ2NCl2b2lkIgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAogICAgbWF0Y2ggY3JlYXRlQXBwbGljYXRpb24KICAgIGVycgoKbWFpbl9kZWxldGVBcHBsaWNhdGlvbl9yb3V0ZUAyOgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU1OAogICAgLy8gQGFiaW1ldGhvZCh7IGFsbG93QWN0aW9uczogIkRlbGV0ZUFwcGxpY2F0aW9uIiB9KQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgcHVzaGludCA1IC8vIERlbGV0ZUFwcGxpY2F0aW9uCiAgICA9PQogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgICYmCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIG11c3QgYmUgRGVsZXRlQXBwbGljYXRpb24gJiYgY2FuIG9ubHkgY2FsbCB3aGVuIG5vdCBjcmVhdGluZwogICAgYiBkZWxldGVBcHBsaWNhdGlvbgoKCi8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo6U3Rha2luZy5jcmVhdGVBcHBsaWNhdGlvbltyb3V0aW5nXSgpIC0+IHZvaWQ6CmNyZWF0ZUFwcGxpY2F0aW9uOgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU0CiAgICAvLyBAYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAiTm9PcCIsIG9uQ3JlYXRlOiAicmVxdWlyZSIgfSkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBwdXNoaW50IDMyIC8vIDMyCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnN0YXRpY19hcnJheTxhcmM0LnVpbnQ4LCAzMj4KICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NQogICAgLy8gYWRtaW5fYWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7CiAgICBieXRlYyA1IC8vICJhZG1pbl9hZGRyZXNzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU2CiAgICAvLyB0aGlzLmFkbWluX2FkZHJlc3MudmFsdWUgPSBhZG1pbkFkZHJlc3MubmF0aXZlOwogICAgdW5jb3ZlciAyCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ4CiAgICAvLyBjb250cmFjdF92ZXJzaW9uID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgcHVzaGJ5dGVzcyAiY29udHJhY3RfdmVyc2lvbiIgMHgwMDAwMDAwMDAwMDAwZmEwIC8vICJjb250cmFjdF92ZXJzaW9uIiwgMHgwMDAwMDAwMDAwMDAwZmEwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTcKICAgIC8vIHRoaXMuY29udHJhY3RfdmVyc2lvbi52YWx1ZSA9IG5ldyBVaW50NjQoVkVSU0lPTik7CiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ5CiAgICAvLyBjb250cmFjdF9zdGF0ZSA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsgLy8gMCA9IGluYWN0aXZlLCAxID0gYWN0aXZlCiAgICBieXRlYyA4IC8vICJjb250cmFjdF9zdGF0ZSIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1OAogICAgLy8gdGhpcy5jb250cmFjdF9zdGF0ZS52YWx1ZSA9IG5ldyBVaW50NjQoMCk7CiAgICBieXRlY18wIC8vIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MAogICAgLy8gbWFzdGVyX3JlcG9fYXBwID0gR2xvYmFsU3RhdGU8QXBwbGljYXRpb24+KCk7CiAgICBieXRlYyAxOCAvLyAibWFzdGVyX3JlcG9fYXBwIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU5CiAgICAvLyB0aGlzLm1hc3Rlcl9yZXBvX2FwcC52YWx1ZSA9IG1hc3RlclJlcG9BcHA7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjUxCiAgICAvLyBwbGF0Zm9ybV9mZWVfYnBzID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTUgLy8gInBsYXRmb3JtX2ZlZV9icHMiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NjAKICAgIC8vIHRoaXMucGxhdGZvcm1fZmVlX2Jwcy52YWx1ZSA9IG5ldyBVaW50NjQoMCk7CiAgICBieXRlY18wIC8vIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MgogICAgLy8gcGxhdGZvcm1fZmVlc19hY2NydWVkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMiAvLyAicGxhdGZvcm1fZmVlc19hY2NydWVkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjYxCiAgICAvLyB0aGlzLnBsYXRmb3JtX2ZlZXNfYWNjcnVlZC52YWx1ZSA9IG5ldyBVaW50NjQoMCk7CiAgICBieXRlY18wIC8vIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MgogICAgLy8gcmV3YXJkc19wYWlkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMSAvLyAicmV3YXJkc19wYWlkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjYyCiAgICAvLyB0aGlzLnJld2FyZHNfcGFpZC52YWx1ZSA9IG5ldyBVaW50NjQoMCk7CiAgICBieXRlY18wIC8vIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MwogICAgLy8gaW5pdGlhbGl6ZWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxOSAvLyAiaW5pdGlhbGl6ZWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NjMKICAgIC8vIHRoaXMuaW5pdGlhbGl6ZWQudmFsdWUgPSBuZXcgVWludDY0KDApOwogICAgYnl0ZWNfMCAvLyAweDAwMDAwMDAwMDAwMDAwMDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzEKICAgIC8vIHRvdGFsX3N0YWtlZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjXzMgLy8gInRvdGFsX3N0YWtlZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo2NAogICAgLy8gdGhpcy50b3RhbF9zdGFrZWQudmFsdWUgPSBuZXcgVWludDY0KDApOwogICAgYnl0ZWNfMCAvLyAweDAwMDAwMDAwMDAwMDAwMDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDcKICAgIC8vIG51bV9zdGFrZXJzID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTAgLy8gIm51bV9zdGFrZXJzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjY1CiAgICAvLyB0aGlzLm51bV9zdGFrZXJzLnZhbHVlID0gbmV3IFVpbnQ2NCgwKTsKICAgIGJ5dGVjXzAgLy8gMHgwMDAwMDAwMDAwMDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU0CiAgICAvLyBAYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAiTm9PcCIsIG9uQ3JlYXRlOiAicmVxdWlyZSIgfSkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6OlN0YWtpbmcuaW5pdEFwcGxpY2F0aW9uW3JvdXRpbmddKCkgLT4gdm9pZDoKaW5pdEFwcGxpY2F0aW9uOgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjY4CiAgICAvLyBAYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAiTm9PcCIgfSkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cG4gMgogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIGR1cG4gMgogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDMKICAgIGR1cG4gMgogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDQKICAgIGR1cAogICAgY292ZXIgMgogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgZHVwCiAgICBjb3ZlciAzCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyA2CiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICBkdXAKICAgIGNvdmVyIDQKICAgIHR4biBHcm91cEluZGV4CiAgICBpbnRjXzEgLy8gMQogICAgLQogICAgZHVwCiAgICBjb3ZlciA1CiAgICBndHhucyBUeXBlRW51bQogICAgaW50Y18xIC8vIHBheQogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIHBheQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjc4CiAgICAvLyBhc3NlcnQob3AuVHhuLnNlbmRlciA9PT0gdGhpcy5hZG1pbl9hZGRyZXNzLnZhbHVlLCAiT25seSBhZG1pbiBjYW4gaW5pdCBhcHBsaWNhdGlvbiIpOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NQogICAgLy8gYWRtaW5fYWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7CiAgICBieXRlYyA1IC8vICJhZG1pbl9hZGRyZXNzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjc4CiAgICAvLyBhc3NlcnQob3AuVHhuLnNlbmRlciA9PT0gdGhpcy5hZG1pbl9hZGRyZXNzLnZhbHVlLCAiT25seSBhZG1pbiBjYW4gaW5pdCBhcHBsaWNhdGlvbiIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBhc3NlcnQgLy8gT25seSBhZG1pbiBjYW4gaW5pdCBhcHBsaWNhdGlvbgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjc5CiAgICAvLyBhc3NlcnQodGhpcy5pbml0aWFsaXplZC52YWx1ZS5hc1VpbnQ2NCgpID09PSAwLCAiQWxyZWFkeSBpbml0aWFsaXplZCIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MwogICAgLy8gaW5pdGlhbGl6ZWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxOSAvLyAiaW5pdGlhbGl6ZWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NzkKICAgIC8vIGFzc2VydCh0aGlzLmluaXRpYWxpemVkLnZhbHVlLmFzVWludDY0KCkgPT09IDAsICJBbHJlYWR5IGluaXRpYWxpemVkIik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgIQogICAgYXNzZXJ0IC8vIEFscmVhZHkgaW5pdGlhbGl6ZWQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo4MAogICAgLy8gYXNzZXJ0KHRoaXMuY29udHJhY3Rfc3RhdGUudmFsdWUuYXNVaW50NjQoKSA9PT0gMCwgIlBvb2wgbXVzdCBiZSBpbmFjdGl2ZSIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0OQogICAgLy8gY29udHJhY3Rfc3RhdGUgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7IC8vIDAgPSBpbmFjdGl2ZSwgMSA9IGFjdGl2ZQogICAgYnl0ZWMgOCAvLyAiY29udHJhY3Rfc3RhdGUiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6ODAKICAgIC8vIGFzc2VydCh0aGlzLmNvbnRyYWN0X3N0YXRlLnZhbHVlLmFzVWludDY0KCkgPT09IDAsICJQb29sIG11c3QgYmUgaW5hY3RpdmUiKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICAhCiAgICBhc3NlcnQgLy8gUG9vbCBtdXN0IGJlIGluYWN0aXZlCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6ODEKICAgIC8vIGFzc2VydCh0aGlzLnRvdGFsX3N0YWtlZC52YWx1ZS5hc1VpbnQ2NCgpID09PSAwLCAiU3Rha2VkIGFzc2V0cyBzdGlsbCBleGlzdCIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMQogICAgLy8gdG90YWxfc3Rha2VkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMyAvLyAidG90YWxfc3Rha2VkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjgxCiAgICAvLyBhc3NlcnQodGhpcy50b3RhbF9zdGFrZWQudmFsdWUuYXNVaW50NjQoKSA9PT0gMCwgIlN0YWtlZCBhc3NldHMgc3RpbGwgZXhpc3QiKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICAhCiAgICBhc3NlcnQgLy8gU3Rha2VkIGFzc2V0cyBzdGlsbCBleGlzdAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjgyCiAgICAvLyBhc3NlcnQodGhpcy5udW1fc3Rha2Vycy52YWx1ZS5hc1VpbnQ2NCgpID09PSAwLCAiU3Rha2VycyBleGlzdCIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NwogICAgLy8gbnVtX3N0YWtlcnMgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxMCAvLyAibnVtX3N0YWtlcnMiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6ODIKICAgIC8vIGFzc2VydCh0aGlzLm51bV9zdGFrZXJzLnZhbHVlLmFzVWludDY0KCkgPT09IDAsICJTdGFrZXJzIGV4aXN0Iik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgIQogICAgYXNzZXJ0IC8vIFN0YWtlcnMgZXhpc3QKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo4MwogICAgLy8gYXNzZXJ0KHJld2FyZEFtb3VudCA+IDAsICJJbnZhbGlkIHJld2FyZCBhbW91bnQiKTsKICAgIHVuY292ZXIgMwogICAgYXNzZXJ0IC8vIEludmFsaWQgcmV3YXJkIGFtb3VudAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjg0CiAgICAvLyBhc3NlcnQoZHVyYXRpb24gPiAwLCAiSW52YWxpZCBkdXJhdGlvbiIpOwogICAgYXNzZXJ0IC8vIEludmFsaWQgZHVyYXRpb24KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo4NQogICAgLy8gYXNzZXJ0KGFwckJwcyA+IDAsICJJbnZhbGlkIEFQUiIpOwogICAgc3dhcAogICAgYXNzZXJ0IC8vIEludmFsaWQgQVBSCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6ODcKICAgIC8vIGNvbnN0IHN0YXJ0OiB1aW50NjQgPSBzdGFydFRpbWUgPT09IDAgPyBHbG9iYWwubGF0ZXN0VGltZXN0YW1wIDogc3RhcnRUaW1lOwogICAgYm56IGluaXRBcHBsaWNhdGlvbl90ZXJuYXJ5X2ZhbHNlQDMKICAgIGdsb2JhbCBMYXRlc3RUaW1lc3RhbXAKCmluaXRBcHBsaWNhdGlvbl90ZXJuYXJ5X21lcmdlQDQ6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6ODgKICAgIC8vIGNvbnN0IGVuZDogdWludDY0ID0gc3RhcnQgKyBkdXJhdGlvbjsKICAgIGR1cAogICAgZGlnIDMKICAgICsKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo4OQogICAgLy8gYXNzZXJ0KGVuZCA+IHN0YXJ0LCAiSW52YWxpZCB0aW1lIHJhbmdlIik7CiAgICBkaWcgMQogICAgPgogICAgYXNzZXJ0IC8vIEludmFsaWQgdGltZSByYW5nZQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI4CiAgICAvLyBzdGFrZWRfYXNzZXRfaWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxNiAvLyAic3Rha2VkX2Fzc2V0X2lkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjkxCiAgICAvLyB0aGlzLnN0YWtlZF9hc3NldF9pZC52YWx1ZSA9IG5ldyBVaW50NjQoc3Rha2VkQXNzZXRJZCk7CiAgICBkaWcgMTAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjkKICAgIC8vIHJld2FyZF9hc3NldF9pZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDYgLy8gInJld2FyZF9hc3NldF9pZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo5MgogICAgLy8gdGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUgPSBuZXcgVWludDY0KHJld2FyZEFzc2V0SWQpOwogICAgZGlnIDgKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzgKICAgIC8vIHRvdGFsX3Jld2FyZHMgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxMyAvLyAidG90YWxfcmV3YXJkcyIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo5MwogICAgLy8gdGhpcy50b3RhbF9yZXdhcmRzLnZhbHVlID0gbmV3IFVpbnQ2NChyZXdhcmRBbW91bnQpOwogICAgZGlnIDYKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzQKICAgIC8vIHJld2FyZF9yYXRlID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMjAgLy8gInJld2FyZF9yYXRlIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjk0CiAgICAvLyB0aGlzLnJld2FyZF9yYXRlLnZhbHVlID0gbmV3IFVpbnQ2NCgwKTsKICAgIGJ5dGVjXzAgLy8gMHgwMDAwMDAwMDAwMDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjk1CiAgICAvLyB0aGlzLnN0YXJ0X3RpbWUudmFsdWUgPSBuZXcgVWludDY0KHN0YXJ0KTsKICAgIGl0b2IKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNQogICAgLy8gc3RhcnRfdGltZSA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDIxIC8vICJzdGFydF90aW1lIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjk1CiAgICAvLyB0aGlzLnN0YXJ0X3RpbWUudmFsdWUgPSBuZXcgVWludDY0KHN0YXJ0KTsKICAgIGRpZyAxCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM2CiAgICAvLyBsYXN0X3VwZGF0ZV90aW1lID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTEgLy8gImxhc3RfdXBkYXRlX3RpbWUiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6OTYKICAgIC8vIHRoaXMubGFzdF91cGRhdGVfdGltZS52YWx1ZSA9IG5ldyBVaW50NjQoc3RhcnQpOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMgogICAgLy8gcmV3YXJkX3Blcl90b2tlbiA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDkgLy8gInJld2FyZF9wZXJfdG9rZW4iCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6OTcKICAgIC8vIHRoaXMucmV3YXJkX3Blcl90b2tlbi52YWx1ZSA9IG5ldyBVaW50NjQoMCk7CiAgICBieXRlY18wIC8vIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozOQogICAgLy8gYWNjcnVlZF9yZXdhcmRzID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgNyAvLyAiYWNjcnVlZF9yZXdhcmRzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjk4CiAgICAvLyB0aGlzLmFjY3J1ZWRfcmV3YXJkcy52YWx1ZSA9IG5ldyBVaW50NjQoMCk7CiAgICBieXRlY18wIC8vIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MAogICAgLy8gYXByX2JwcyA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDIyIC8vICJhcHJfYnBzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjk5CiAgICAvLyB0aGlzLmFwcl9icHMudmFsdWUgPSBuZXcgVWludDY0KGFwckJwcyk7CiAgICBkaWcgNAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MgogICAgLy8gcGxhdGZvcm1fZmVlc19hY2NydWVkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMiAvLyAicGxhdGZvcm1fZmVlc19hY2NydWVkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjEwMAogICAgLy8gdGhpcy5wbGF0Zm9ybV9mZWVzX2FjY3J1ZWQudmFsdWUgPSBuZXcgVWludDY0KDApOwogICAgYnl0ZWNfMCAvLyAweDAwMDAwMDAwMDAwMDAwMDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDEKICAgIC8vIHJld2FyZHNfZXhoYXVzdGVkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTIgLy8gInJld2FyZHNfZXhoYXVzdGVkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjEwMQogICAgLy8gdGhpcy5yZXdhcmRzX2V4aGF1c3RlZC52YWx1ZSA9IG5ldyBVaW50NjQoMCk7CiAgICBieXRlY18wIC8vIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MgogICAgLy8gcmV3YXJkc19wYWlkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMSAvLyAicmV3YXJkc19wYWlkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjEwMgogICAgLy8gdGhpcy5yZXdhcmRzX3BhaWQudmFsdWUgPSBuZXcgVWludDY0KDApOwogICAgYnl0ZWNfMCAvLyAweDAwMDAwMDAwMDAwMDAwMDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDMKICAgIC8vIGluaXRpYWxpemVkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTkgLy8gImluaXRpYWxpemVkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjEwMwogICAgLy8gdGhpcy5pbml0aWFsaXplZC52YWx1ZSA9IG5ldyBVaW50NjQoMSk7CiAgICBieXRlYyAxNyAvLyAweDAwMDAwMDAwMDAwMDAwMDEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTA1LTEwOAogICAgLy8gYXNzZXJ0TWF0Y2goaW5pdGlhbEJhbGFuY2VUeG4sIHsKICAgIC8vICAgcmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICBhbW91bnQ6IElOSVRJQUxfUEFZX0FNT1VOVCwKICAgIC8vIH0pOwogICAgZHVwbiAyCiAgICBndHhucyBSZWNlaXZlcgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjEwNgogICAgLy8gcmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxMDUtMTA4CiAgICAvLyBhc3NlcnRNYXRjaChpbml0aWFsQmFsYW5jZVR4biwgewogICAgLy8gICByZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgIGFtb3VudDogSU5JVElBTF9QQVlfQU1PVU5ULAogICAgLy8gfSk7CiAgICA9PQogICAgc3dhcAogICAgZ3R4bnMgQW1vdW50CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTA3CiAgICAvLyBhbW91bnQ6IElOSVRJQUxfUEFZX0FNT1VOVCwKICAgIHB1c2hpbnQgNDAwMDAwIC8vIDQwMDAwMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjEwNS0xMDgKICAgIC8vIGFzc2VydE1hdGNoKGluaXRpYWxCYWxhbmNlVHhuLCB7CiAgICAvLyAgIHJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgYW1vdW50OiBJTklUSUFMX1BBWV9BTU9VTlQsCiAgICAvLyB9KTsKICAgID09CiAgICAmJgogICAgYXNzZXJ0IC8vIGFzc2VydCB0YXJnZXQgaXMgbWF0Y2ggZm9yIGNvbmRpdGlvbnMKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxMTAtMTE3CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHN0YWtlZEFzc2V0SWQsCiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IDAsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTEzCiAgICAvLyBhc3NldFJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTE0CiAgICAvLyBhc3NldEFtb3VudDogMCwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIGRpZyA3CiAgICBkdXAKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTEwLTExNgogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgeGZlckFzc2V0OiBzdGFrZWRBc3NldElkLAogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiAwLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIGludGNfMyAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTE1CiAgICAvLyBmZWU6IDAsCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxMTAtMTE3CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHN0YWtlZEFzc2V0SWQsCiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IDAsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjExOQogICAgLy8gaWYgKHJld2FyZEFzc2V0SWQgIT09IHN0YWtlZEFzc2V0SWQpIHsKICAgIGRpZyA2CiAgICAhPQogICAgYnogaW5pdEFwcGxpY2F0aW9uX2FmdGVyX2lmX2Vsc2VAOAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjEyMC0xMjcKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIHhmZXJBc3NldDogcmV3YXJkQXNzZXRJZCwKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICBhc3NldEFtb3VudDogMCwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxMjMKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxMjQKICAgIC8vIGFzc2V0QW1vdW50OiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgogICAgZGlnIDUKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTIwLTEyNgogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgeGZlckFzc2V0OiByZXdhcmRBc3NldElkLAogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiAwLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIGludGNfMyAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTI1CiAgICAvLyBmZWU6IDAsCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxMjAtMTI3CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHJld2FyZEFzc2V0SWQsCiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IDAsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAoKaW5pdEFwcGxpY2F0aW9uX2FmdGVyX2lmX2Vsc2VAODoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo2OAogICAgLy8gQGFiaW1ldGhvZCh7IGFsbG93QWN0aW9uczogIk5vT3AiIH0pCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgppbml0QXBwbGljYXRpb25fdGVybmFyeV9mYWxzZUAzOgogICAgZGlnIDIKICAgIGIgaW5pdEFwcGxpY2F0aW9uX3Rlcm5hcnlfbWVyZ2VANAoKCi8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo6U3Rha2luZy5mdW5kUmV3YXJkc1tyb3V0aW5nXSgpIC0+IHZvaWQ6CmZ1bmRSZXdhcmRzOgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjEzMQogICAgLy8gQGFiaW1ldGhvZCh7IGFsbG93QWN0aW9uczogIk5vT3AiIH0pCiAgICB0eG4gR3JvdXBJbmRleAogICAgaW50Y18xIC8vIDEKICAgIC0KICAgIGR1cAogICAgZ3R4bnMgVHlwZUVudW0KICAgIGludGNfMyAvLyBheGZlcgogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIGF4ZmVyCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTMzCiAgICAvLyBhc3NlcnQob3AuVHhuLnNlbmRlciA9PT0gdGhpcy5hZG1pbl9hZGRyZXNzLnZhbHVlLCAiT25seSBhZG1pbiBjYW4gZnVuZCByZXdhcmRzIik7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ1CiAgICAvLyBhZG1pbl9hZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsKICAgIGJ5dGVjIDUgLy8gImFkbWluX2FkZHJlc3MiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTMzCiAgICAvLyBhc3NlcnQob3AuVHhuLnNlbmRlciA9PT0gdGhpcy5hZG1pbl9hZGRyZXNzLnZhbHVlLCAiT25seSBhZG1pbiBjYW4gZnVuZCByZXdhcmRzIik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgc3dhcAogICAgZGlnIDEKICAgID09CiAgICBhc3NlcnQgLy8gT25seSBhZG1pbiBjYW4gZnVuZCByZXdhcmRzCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTM0CiAgICAvLyBhc3NlcnQodGhpcy5jb250cmFjdF9zdGF0ZS52YWx1ZSA9PT0gbmV3IFVpbnQ2NCgwKSwgIlBvb2wgbXVzdCBiZSBpbmFjdGl2ZSIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0OQogICAgLy8gY29udHJhY3Rfc3RhdGUgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7IC8vIDAgPSBpbmFjdGl2ZSwgMSA9IGFjdGl2ZQogICAgYnl0ZWMgOCAvLyAiY29udHJhY3Rfc3RhdGUiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTM0CiAgICAvLyBhc3NlcnQodGhpcy5jb250cmFjdF9zdGF0ZS52YWx1ZSA9PT0gbmV3IFVpbnQ2NCgwKSwgIlBvb2wgbXVzdCBiZSBpbmFjdGl2ZSIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ5dGVjXzAgLy8gMHgwMDAwMDAwMDAwMDAwMDAwCiAgICA9PQogICAgYXNzZXJ0IC8vIFBvb2wgbXVzdCBiZSBpbmFjdGl2ZQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjEzNQogICAgLy8gYXNzZXJ0KHRoaXMuYWNjcnVlZF9yZXdhcmRzLnZhbHVlLmFzVWludDY0KCkgPT09IDAsICJSZXdhcmRzIGFscmVhZHkgc3RhcnRlZCIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozOQogICAgLy8gYWNjcnVlZF9yZXdhcmRzID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgNyAvLyAiYWNjcnVlZF9yZXdhcmRzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjEzNQogICAgLy8gYXNzZXJ0KHRoaXMuYWNjcnVlZF9yZXdhcmRzLnZhbHVlLmFzVWludDY0KCkgPT09IDAsICJSZXdhcmRzIGFscmVhZHkgc3RhcnRlZCIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgICEKICAgIGFzc2VydCAvLyBSZXdhcmRzIGFscmVhZHkgc3RhcnRlZAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjEzNgogICAgLy8gYXNzZXJ0KHJld2FyZEFtb3VudCA9PT0gdGhpcy50b3RhbF9yZXdhcmRzLnZhbHVlLmFzVWludDY0KCksICJSZXdhcmQgYW1vdW50IG1pc21hdGNoIik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM4CiAgICAvLyB0b3RhbF9yZXdhcmRzID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTMgLy8gInRvdGFsX3Jld2FyZHMiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTM2CiAgICAvLyBhc3NlcnQocmV3YXJkQW1vdW50ID09PSB0aGlzLnRvdGFsX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKSwgIlJld2FyZCBhbW91bnQgbWlzbWF0Y2giKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICBkaWcgMgogICAgPT0KICAgIGFzc2VydCAvLyBSZXdhcmQgYW1vdW50IG1pc21hdGNoCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTM4LTE0MwogICAgLy8gYXNzZXJ0TWF0Y2gocmV3YXJkRnVuZGluZ1R4biwgewogICAgLy8gICBzZW5kZXI6IHRoaXMuYWRtaW5fYWRkcmVzcy52YWx1ZSwKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiByZXdhcmRBbW91bnQsCiAgICAvLyB9KTsKICAgIGRpZyAyCiAgICBndHhucyBTZW5kZXIKICAgID09CiAgICBkaWcgMgogICAgZ3R4bnMgQXNzZXRSZWNlaXZlcgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE0MAogICAgLy8gYXNzZXRSZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjEzOC0xNDMKICAgIC8vIGFzc2VydE1hdGNoKHJld2FyZEZ1bmRpbmdUeG4sIHsKICAgIC8vICAgc2VuZGVyOiB0aGlzLmFkbWluX2FkZHJlc3MudmFsdWUsCiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCkpLAogICAgLy8gICBhc3NldEFtb3VudDogcmV3YXJkQW1vdW50LAogICAgLy8gfSk7CiAgICA9PQogICAgJiYKICAgIGRpZyAyCiAgICBndHhucyBYZmVyQXNzZXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxNDEKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSksCiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI5CiAgICAvLyByZXdhcmRfYXNzZXRfaWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyA2IC8vICJyZXdhcmRfYXNzZXRfaWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTQxCiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCkpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxMzgtMTQzCiAgICAvLyBhc3NlcnRNYXRjaChyZXdhcmRGdW5kaW5nVHhuLCB7CiAgICAvLyAgIHNlbmRlcjogdGhpcy5hZG1pbl9hZGRyZXNzLnZhbHVlLAogICAgLy8gICBhc3NldFJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnJld2FyZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IHJld2FyZEFtb3VudCwKICAgIC8vIH0pOwogICAgPT0KICAgICYmCiAgICB1bmNvdmVyIDIKICAgIGd0eG5zIEFzc2V0QW1vdW50CiAgICB1bmNvdmVyIDIKICAgID09CiAgICAmJgogICAgYXNzZXJ0IC8vIGFzc2VydCB0YXJnZXQgaXMgbWF0Y2ggZm9yIGNvbmRpdGlvbnMKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MQogICAgLy8gcmV3YXJkc19leGhhdXN0ZWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxMiAvLyAicmV3YXJkc19leGhhdXN0ZWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTQ0CiAgICAvLyB0aGlzLnJld2FyZHNfZXhoYXVzdGVkLnZhbHVlID0gbmV3IFVpbnQ2NCgwKTsKICAgIGJ5dGVjXzAgLy8gMHgwMDAwMDAwMDAwMDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjEzMQogICAgLy8gQGFiaW1ldGhvZCh7IGFsbG93QWN0aW9uczogIk5vT3AiIH0pCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjpTdGFraW5nLmZ1bmRNb3JlUmV3YXJkc1tyb3V0aW5nXSgpIC0+IHZvaWQ6CmZ1bmRNb3JlUmV3YXJkczoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxNDcKICAgIC8vIEBhYmltZXRob2QoeyBhbGxvd0FjdGlvbnM6ICJOb09wIiB9KQogICAgdHhuIEdyb3VwSW5kZXgKICAgIGludGNfMSAvLyAxCiAgICAtCiAgICBkdXAKICAgIGd0eG5zIFR5cGVFbnVtCiAgICBpbnRjXzMgLy8gYXhmZXIKICAgID09CiAgICBhc3NlcnQgLy8gdHJhbnNhY3Rpb24gdHlwZSBpcyBheGZlcgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE0OQogICAgLy8gYXNzZXJ0KG9wLlR4bi5zZW5kZXIgPT09IHRoaXMuYWRtaW5fYWRkcmVzcy52YWx1ZSwgIk9ubHkgYWRtaW4gY2FuIGZ1bmQgcmV3YXJkcyIpOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NQogICAgLy8gYWRtaW5fYWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7CiAgICBieXRlYyA1IC8vICJhZG1pbl9hZGRyZXNzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE0OQogICAgLy8gYXNzZXJ0KG9wLlR4bi5zZW5kZXIgPT09IHRoaXMuYWRtaW5fYWRkcmVzcy52YWx1ZSwgIk9ubHkgYWRtaW4gY2FuIGZ1bmQgcmV3YXJkcyIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIHN3YXAKICAgIGRpZyAxCiAgICA9PQogICAgYXNzZXJ0IC8vIE9ubHkgYWRtaW4gY2FuIGZ1bmQgcmV3YXJkcwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE1MAogICAgLy8gYXNzZXJ0KHJld2FyZEFtb3VudCA+IDAsICJJbnZhbGlkIHJld2FyZCBhbW91bnQiKTsKICAgIGRpZyAxCiAgICBhc3NlcnQgLy8gSW52YWxpZCByZXdhcmQgYW1vdW50CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTUyLTE1NwogICAgLy8gYXNzZXJ0TWF0Y2gocmV3YXJkRnVuZGluZ1R4biwgewogICAgLy8gICBzZW5kZXI6IHRoaXMuYWRtaW5fYWRkcmVzcy52YWx1ZSwKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiByZXdhcmRBbW91bnQsCiAgICAvLyB9KTsKICAgIGRpZyAyCiAgICBndHhucyBTZW5kZXIKICAgID09CiAgICBkaWcgMgogICAgZ3R4bnMgQXNzZXRSZWNlaXZlcgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE1NAogICAgLy8gYXNzZXRSZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE1Mi0xNTcKICAgIC8vIGFzc2VydE1hdGNoKHJld2FyZEZ1bmRpbmdUeG4sIHsKICAgIC8vICAgc2VuZGVyOiB0aGlzLmFkbWluX2FkZHJlc3MudmFsdWUsCiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCkpLAogICAgLy8gICBhc3NldEFtb3VudDogcmV3YXJkQW1vdW50LAogICAgLy8gfSk7CiAgICA9PQogICAgJiYKICAgIGRpZyAyCiAgICBndHhucyBYZmVyQXNzZXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxNTUKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSksCiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI5CiAgICAvLyByZXdhcmRfYXNzZXRfaWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyA2IC8vICJyZXdhcmRfYXNzZXRfaWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTU1CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCkpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxNTItMTU3CiAgICAvLyBhc3NlcnRNYXRjaChyZXdhcmRGdW5kaW5nVHhuLCB7CiAgICAvLyAgIHNlbmRlcjogdGhpcy5hZG1pbl9hZGRyZXNzLnZhbHVlLAogICAgLy8gICBhc3NldFJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnJld2FyZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IHJld2FyZEFtb3VudCwKICAgIC8vIH0pOwogICAgPT0KICAgICYmCiAgICB1bmNvdmVyIDIKICAgIGd0eG5zIEFzc2V0QW1vdW50CiAgICBkaWcgMgogICAgPT0KICAgICYmCiAgICBhc3NlcnQgLy8gYXNzZXJ0IHRhcmdldCBpcyBtYXRjaCBmb3IgY29uZGl0aW9ucwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE1OQogICAgLy8gdGhpcy50b3RhbF9yZXdhcmRzLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLnRvdGFsX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKSArIHJld2FyZEFtb3VudCk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM4CiAgICAvLyB0b3RhbF9yZXdhcmRzID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTMgLy8gInRvdGFsX3Jld2FyZHMiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTU5CiAgICAvLyB0aGlzLnRvdGFsX3Jld2FyZHMudmFsdWUgPSBuZXcgVWludDY0KHRoaXMudG90YWxfcmV3YXJkcy52YWx1ZS5hc1VpbnQ2NCgpICsgcmV3YXJkQW1vdW50KTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICArCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzgKICAgIC8vIHRvdGFsX3Jld2FyZHMgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxMyAvLyAidG90YWxfcmV3YXJkcyIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxNTkKICAgIC8vIHRoaXMudG90YWxfcmV3YXJkcy52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy50b3RhbF9yZXdhcmRzLnZhbHVlLmFzVWludDY0KCkgKyByZXdhcmRBbW91bnQpOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MQogICAgLy8gcmV3YXJkc19leGhhdXN0ZWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxMiAvLyAicmV3YXJkc19leGhhdXN0ZWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTYwCiAgICAvLyB0aGlzLnJld2FyZHNfZXhoYXVzdGVkLnZhbHVlID0gbmV3IFVpbnQ2NCgwKTsKICAgIGJ5dGVjXzAgLy8gMHgwMDAwMDAwMDAwMDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE0NwogICAgLy8gQGFiaW1ldGhvZCh7IGFsbG93QWN0aW9uczogIk5vT3AiIH0pCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjpTdGFraW5nLnJlbW92ZVJld2FyZHNbcm91dGluZ10oKSAtPiB2b2lkOgpyZW1vdmVSZXdhcmRzOgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE2NQogICAgLy8gYXNzZXJ0KG9wLlR4bi5zZW5kZXIgPT09IHRoaXMuYWRtaW5fYWRkcmVzcy52YWx1ZSwgIk9ubHkgYWRtaW4gY2FuIGZ1bmQgcmV3YXJkcyIpOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NQogICAgLy8gYWRtaW5fYWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7CiAgICBieXRlYyA1IC8vICJhZG1pbl9hZGRyZXNzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE2NQogICAgLy8gYXNzZXJ0KG9wLlR4bi5zZW5kZXIgPT09IHRoaXMuYWRtaW5fYWRkcmVzcy52YWx1ZSwgIk9ubHkgYWRtaW4gY2FuIGZ1bmQgcmV3YXJkcyIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIHN3YXAKICAgIGRpZyAxCiAgICA9PQogICAgYXNzZXJ0IC8vIE9ubHkgYWRtaW4gY2FuIGZ1bmQgcmV3YXJkcwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE2NgogICAgLy8gYXNzZXJ0KHRoaXMuY29udHJhY3Rfc3RhdGUudmFsdWUgPT09IG5ldyBVaW50NjQoMCksICJQb29sIG11c3QgYmUgaW5hY3RpdmUiKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDkKICAgIC8vIGNvbnRyYWN0X3N0YXRlID0gR2xvYmFsU3RhdGU8VWludDY0PigpOyAvLyAwID0gaW5hY3RpdmUsIDEgPSBhY3RpdmUKICAgIGJ5dGVjIDggLy8gImNvbnRyYWN0X3N0YXRlIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE2NgogICAgLy8gYXNzZXJ0KHRoaXMuY29udHJhY3Rfc3RhdGUudmFsdWUgPT09IG5ldyBVaW50NjQoMCksICJQb29sIG11c3QgYmUgaW5hY3RpdmUiKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBieXRlY18wIC8vIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgPT0KICAgIGFzc2VydCAvLyBQb29sIG11c3QgYmUgaW5hY3RpdmUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxNjgKICAgIC8vIGNvbnN0IGF2YWlsYWJsZTogdWludDY0ID0gdGhpcy50b3RhbF9yZXdhcmRzLnZhbHVlLmFzVWludDY0KCkgLSB0aGlzLmFjY3J1ZWRfcmV3YXJkcy52YWx1ZS5hc1VpbnQ2NCgpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozOAogICAgLy8gdG90YWxfcmV3YXJkcyA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDEzIC8vICJ0b3RhbF9yZXdhcmRzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE2OAogICAgLy8gY29uc3QgYXZhaWxhYmxlOiB1aW50NjQgPSB0aGlzLnRvdGFsX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKSAtIHRoaXMuYWNjcnVlZF9yZXdhcmRzLnZhbHVlLmFzVWludDY0KCk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozOQogICAgLy8gYWNjcnVlZF9yZXdhcmRzID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgNyAvLyAiYWNjcnVlZF9yZXdhcmRzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE2OAogICAgLy8gY29uc3QgYXZhaWxhYmxlOiB1aW50NjQgPSB0aGlzLnRvdGFsX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKSAtIHRoaXMuYWNjcnVlZF9yZXdhcmRzLnZhbHVlLmFzVWludDY0KCk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgLQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE2OQogICAgLy8gYXNzZXJ0KGF2YWlsYWJsZSA+IDAsICJObyByZXdhcmRzIHRvIHJlbW92ZSIpOwogICAgZHVwCiAgICBhc3NlcnQgLy8gTm8gcmV3YXJkcyB0byByZW1vdmUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxNzAtMTc4CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogdGhpcy5hZG1pbl9hZGRyZXNzLnZhbHVlLAogICAgLy8gICAgIHNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IGF2YWlsYWJsZSwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxNzIKICAgIC8vIHhmZXJBc3NldDogdGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjkKICAgIC8vIHJld2FyZF9hc3NldF9pZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDYgLy8gInJld2FyZF9hc3NldF9pZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxNzIKICAgIC8vIHhmZXJBc3NldDogdGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTc0CiAgICAvLyBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIHVuY292ZXIgMgogICAgaXR4bl9maWVsZCBBc3NldEFtb3VudAogICAgaXR4bl9maWVsZCBTZW5kZXIKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxNzAtMTc3CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogdGhpcy5hZG1pbl9hZGRyZXNzLnZhbHVlLAogICAgLy8gICAgIHNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IGF2YWlsYWJsZSwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBpbnRjXzMgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE3NgogICAgLy8gZmVlOiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTcwLTE3OAogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgeGZlckFzc2V0OiB0aGlzLnJld2FyZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IHRoaXMuYWRtaW5fYWRkcmVzcy52YWx1ZSwKICAgIC8vICAgICBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiBhdmFpbGFibGUsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQxCiAgICAvLyByZXdhcmRzX2V4aGF1c3RlZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDEyIC8vICJyZXdhcmRzX2V4aGF1c3RlZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxNzkKICAgIC8vIHRoaXMucmV3YXJkc19leGhhdXN0ZWQudmFsdWUgPSBuZXcgVWludDY0KDEpOwogICAgYnl0ZWMgMTcgLy8gMHgwMDAwMDAwMDAwMDAwMDAxCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE2MwogICAgLy8gQGFiaW1ldGhvZCh7IGFsbG93QWN0aW9uczogIk5vT3AiIH0pCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjpTdGFraW5nLnNldENvbnRyYWN0QWN0aXZlW3JvdXRpbmddKCkgLT4gdm9pZDoKc2V0Q29udHJhY3RBY3RpdmU6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTg0CiAgICAvLyBhc3NlcnQob3AuVHhuLnNlbmRlciA9PT0gdGhpcy5hZG1pbl9hZGRyZXNzLnZhbHVlLCAiT25seSBhZG1pbiBjYW4gc2V0IGFjdGl2ZSIpOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NQogICAgLy8gYWRtaW5fYWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7CiAgICBieXRlYyA1IC8vICJhZG1pbl9hZGRyZXNzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE4NAogICAgLy8gYXNzZXJ0KG9wLlR4bi5zZW5kZXIgPT09IHRoaXMuYWRtaW5fYWRkcmVzcy52YWx1ZSwgIk9ubHkgYWRtaW4gY2FuIHNldCBhY3RpdmUiKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIE9ubHkgYWRtaW4gY2FuIHNldCBhY3RpdmUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxODUtMTkwCiAgICAvLyBjb25zdCBzdXBlckFkbWluUmVzdWx0ID0gYWJpQ2FsbCh7CiAgICAvLyAgIGFwcElkOiB0aGlzLm1hc3Rlcl9yZXBvX2FwcC52YWx1ZSwKICAgIC8vICAgbWV0aG9kOiBNYXN0ZXJSZXBvU3R1Yi5wcm90b3R5cGUuZ2V0U3VwZXJBZG1pbkFkZHJlc3MsCiAgICAvLyAgIGFyZ3M6IFtdLAogICAgLy8gICBmZWU6IDAsCiAgICAvLyB9KS5yZXR1cm5WYWx1ZTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxODYKICAgIC8vIGFwcElkOiB0aGlzLm1hc3Rlcl9yZXBvX2FwcC52YWx1ZSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTAKICAgIC8vIG1hc3Rlcl9yZXBvX2FwcCA9IEdsb2JhbFN0YXRlPEFwcGxpY2F0aW9uPigpOwogICAgYnl0ZWMgMTggLy8gIm1hc3Rlcl9yZXBvX2FwcCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxODYKICAgIC8vIGFwcElkOiB0aGlzLm1hc3Rlcl9yZXBvX2FwcC52YWx1ZSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTg1LTE5MAogICAgLy8gY29uc3Qgc3VwZXJBZG1pblJlc3VsdCA9IGFiaUNhbGwoewogICAgLy8gICBhcHBJZDogdGhpcy5tYXN0ZXJfcmVwb19hcHAudmFsdWUsCiAgICAvLyAgIG1ldGhvZDogTWFzdGVyUmVwb1N0dWIucHJvdG90eXBlLmdldFN1cGVyQWRtaW5BZGRyZXNzLAogICAgLy8gICBhcmdzOiBbXSwKICAgIC8vICAgZmVlOiAwLAogICAgLy8gfSkucmV0dXJuVmFsdWU7CiAgICBwdXNoYnl0ZXMgMHhiM2IzYjdlMiAvLyBtZXRob2QgImdldFN1cGVyQWRtaW5BZGRyZXNzKClhZGRyZXNzIgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25JRAogICAgcHVzaGludCA2IC8vIGFwcGwKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxODkKICAgIC8vIGZlZTogMCwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE4NS0xOTAKICAgIC8vIGNvbnN0IHN1cGVyQWRtaW5SZXN1bHQgPSBhYmlDYWxsKHsKICAgIC8vICAgYXBwSWQ6IHRoaXMubWFzdGVyX3JlcG9fYXBwLnZhbHVlLAogICAgLy8gICBtZXRob2Q6IE1hc3RlclJlcG9TdHViLnByb3RvdHlwZS5nZXRTdXBlckFkbWluQWRkcmVzcywKICAgIC8vICAgYXJnczogW10sCiAgICAvLyAgIGZlZTogMCwKICAgIC8vIH0pLnJldHVyblZhbHVlOwogICAgaXR4bl9zdWJtaXQKICAgIGl0eG4gTGFzdExvZwogICAgZHVwCiAgICBleHRyYWN0IDQgMAogICAgc3dhcAogICAgZXh0cmFjdCAwIDQKICAgIGJ5dGVjIDIzIC8vIDB4MTUxZjdjNzUKICAgID09CiAgICBhc3NlcnQgLy8gQnl0ZXMgaGFzIHZhbGlkIHByZWZpeAogICAgZHVwCiAgICBsZW4KICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuc3RhdGljX2FycmF5PGFyYzQudWludDgsIDMyPgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ2CiAgICAvLyBzdXBlcl9hZG1pbl9hZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsKICAgIGJ5dGVjIDE0IC8vICJzdXBlcl9hZG1pbl9hZGRyZXNzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE5MQogICAgLy8gdGhpcy5zdXBlcl9hZG1pbl9hZGRyZXNzLnZhbHVlID0gc3VwZXJBZG1pblJlc3VsdDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTkzLTE5OAogICAgLy8gY29uc3QgcGxhdGZvcm1GZWVSZXN1bHQgPSBhYmlDYWxsKHsKICAgIC8vICAgYXBwSWQ6IHRoaXMubWFzdGVyX3JlcG9fYXBwLnZhbHVlLAogICAgLy8gICBtZXRob2Q6IE1hc3RlclJlcG9TdHViLnByb3RvdHlwZS5nZXRQbGF0Zm9ybUZlZUJwcywKICAgIC8vICAgYXJnczogW10sCiAgICAvLyAgIGZlZTogMCwKICAgIC8vIH0pLnJldHVyblZhbHVlOwogICAgaXR4bl9iZWdpbgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE5NAogICAgLy8gYXBwSWQ6IHRoaXMubWFzdGVyX3JlcG9fYXBwLnZhbHVlLAogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MAogICAgLy8gbWFzdGVyX3JlcG9fYXBwID0gR2xvYmFsU3RhdGU8QXBwbGljYXRpb24+KCk7CiAgICBieXRlYyAxOCAvLyAibWFzdGVyX3JlcG9fYXBwIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE5NAogICAgLy8gYXBwSWQ6IHRoaXMubWFzdGVyX3JlcG9fYXBwLnZhbHVlLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxOTMtMTk4CiAgICAvLyBjb25zdCBwbGF0Zm9ybUZlZVJlc3VsdCA9IGFiaUNhbGwoewogICAgLy8gICBhcHBJZDogdGhpcy5tYXN0ZXJfcmVwb19hcHAudmFsdWUsCiAgICAvLyAgIG1ldGhvZDogTWFzdGVyUmVwb1N0dWIucHJvdG90eXBlLmdldFBsYXRmb3JtRmVlQnBzLAogICAgLy8gICBhcmdzOiBbXSwKICAgIC8vICAgZmVlOiAwLAogICAgLy8gfSkucmV0dXJuVmFsdWU7CiAgICBwdXNoYnl0ZXMgMHhmMTMzMDM4ZCAvLyBtZXRob2QgImdldFBsYXRmb3JtRmVlQnBzKCl1aW50NjQiCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECiAgICBwdXNoaW50IDYgLy8gYXBwbAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE5NwogICAgLy8gZmVlOiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MTkzLTE5OAogICAgLy8gY29uc3QgcGxhdGZvcm1GZWVSZXN1bHQgPSBhYmlDYWxsKHsKICAgIC8vICAgYXBwSWQ6IHRoaXMubWFzdGVyX3JlcG9fYXBwLnZhbHVlLAogICAgLy8gICBtZXRob2Q6IE1hc3RlclJlcG9TdHViLnByb3RvdHlwZS5nZXRQbGF0Zm9ybUZlZUJwcywKICAgIC8vICAgYXJnczogW10sCiAgICAvLyAgIGZlZTogMCwKICAgIC8vIH0pLnJldHVyblZhbHVlOwogICAgaXR4bl9zdWJtaXQKICAgIGl0eG4gTGFzdExvZwogICAgZHVwCiAgICBleHRyYWN0IDQgMAogICAgc3dhcAogICAgZXh0cmFjdCAwIDQKICAgIGJ5dGVjIDIzIC8vIDB4MTUxZjdjNzUKICAgID09CiAgICBhc3NlcnQgLy8gQnl0ZXMgaGFzIHZhbGlkIHByZWZpeAogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjE5OQogICAgLy8gYXNzZXJ0KHBsYXRmb3JtRmVlUmVzdWx0LmFzVWludDY0KCkgPD0gMTBfMDAwLCAiSW52YWxpZCBwbGF0Zm9ybSBmZWUiKTsKICAgIGR1cAogICAgYnRvaQogICAgaW50YyA1IC8vIDEwMDAwCiAgICA8PQogICAgYXNzZXJ0IC8vIEludmFsaWQgcGxhdGZvcm0gZmVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTEKICAgIC8vIHBsYXRmb3JtX2ZlZV9icHMgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxNSAvLyAicGxhdGZvcm1fZmVlX2JwcyIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyMDAKICAgIC8vIHRoaXMucGxhdGZvcm1fZmVlX2Jwcy52YWx1ZSA9IHBsYXRmb3JtRmVlUmVzdWx0OwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0OQogICAgLy8gY29udHJhY3Rfc3RhdGUgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7IC8vIDAgPSBpbmFjdGl2ZSwgMSA9IGFjdGl2ZQogICAgYnl0ZWMgOCAvLyAiY29udHJhY3Rfc3RhdGUiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjAxCiAgICAvLyB0aGlzLmNvbnRyYWN0X3N0YXRlLnZhbHVlID0gbmV3IFVpbnQ2NCgxKTsKICAgIGJ5dGVjIDE3IC8vIDB4MDAwMDAwMDAwMDAwMDAwMQogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoxODIKICAgIC8vIEBhYmltZXRob2QoeyBhbGxvd0FjdGlvbnM6ICJOb09wIiB9KQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo6U3Rha2luZy5zZXRDb250cmFjdEluYWN0aXZlW3JvdXRpbmddKCkgLT4gdm9pZDoKc2V0Q29udHJhY3RJbmFjdGl2ZToKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyMDYKICAgIC8vIGFzc2VydChvcC5UeG4uc2VuZGVyID09PSB0aGlzLmFkbWluX2FkZHJlc3MudmFsdWUgfHwgb3AuVHhuLnNlbmRlciA9PT0gdGhpcy5zdXBlcl9hZG1pbl9hZGRyZXNzLnZhbHVlLCAiT25seSBhZG1pbiBjYW4gc2V0IGluYWN0aXZlIik7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ1CiAgICAvLyBhZG1pbl9hZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsKICAgIGJ5dGVjIDUgLy8gImFkbWluX2FkZHJlc3MiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjA2CiAgICAvLyBhc3NlcnQob3AuVHhuLnNlbmRlciA9PT0gdGhpcy5hZG1pbl9hZGRyZXNzLnZhbHVlIHx8IG9wLlR4bi5zZW5kZXIgPT09IHRoaXMuc3VwZXJfYWRtaW5fYWRkcmVzcy52YWx1ZSwgIk9ubHkgYWRtaW4gY2FuIHNldCBpbmFjdGl2ZSIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBibnogc2V0Q29udHJhY3RJbmFjdGl2ZV9ib29sX3RydWVAMwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NgogICAgLy8gc3VwZXJfYWRtaW5fYWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7CiAgICBieXRlYyAxNCAvLyAic3VwZXJfYWRtaW5fYWRkcmVzcyIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyMDYKICAgIC8vIGFzc2VydChvcC5UeG4uc2VuZGVyID09PSB0aGlzLmFkbWluX2FkZHJlc3MudmFsdWUgfHwgb3AuVHhuLnNlbmRlciA9PT0gdGhpcy5zdXBlcl9hZG1pbl9hZGRyZXNzLnZhbHVlLCAiT25seSBhZG1pbiBjYW4gc2V0IGluYWN0aXZlIik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIGJ6IHNldENvbnRyYWN0SW5hY3RpdmVfYm9vbF9mYWxzZUA0CgpzZXRDb250cmFjdEluYWN0aXZlX2Jvb2xfdHJ1ZUAzOgogICAgaW50Y18xIC8vIDEKCnNldENvbnRyYWN0SW5hY3RpdmVfYm9vbF9tZXJnZUA1OgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjIwNgogICAgLy8gYXNzZXJ0KG9wLlR4bi5zZW5kZXIgPT09IHRoaXMuYWRtaW5fYWRkcmVzcy52YWx1ZSB8fCBvcC5UeG4uc2VuZGVyID09PSB0aGlzLnN1cGVyX2FkbWluX2FkZHJlc3MudmFsdWUsICJPbmx5IGFkbWluIGNhbiBzZXQgaW5hY3RpdmUiKTsKICAgIGFzc2VydCAvLyBPbmx5IGFkbWluIGNhbiBzZXQgaW5hY3RpdmUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0OQogICAgLy8gY29udHJhY3Rfc3RhdGUgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7IC8vIDAgPSBpbmFjdGl2ZSwgMSA9IGFjdGl2ZQogICAgYnl0ZWMgOCAvLyAiY29udHJhY3Rfc3RhdGUiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjA3CiAgICAvLyB0aGlzLmNvbnRyYWN0X3N0YXRlLnZhbHVlID0gbmV3IFVpbnQ2NCgwKTsKICAgIGJ5dGVjXzAgLy8gMHgwMDAwMDAwMDAwMDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjIwNAogICAgLy8gQGFiaW1ldGhvZCh7IGFsbG93QWN0aW9uczogIk5vT3AiIH0pCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgpzZXRDb250cmFjdEluYWN0aXZlX2Jvb2xfZmFsc2VANDoKICAgIGludGNfMCAvLyAwCiAgICBiIHNldENvbnRyYWN0SW5hY3RpdmVfYm9vbF9tZXJnZUA1CgoKLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjpTdGFraW5nLnVwZGF0ZUFkbWluQWRkcmVzc1tyb3V0aW5nXSgpIC0+IHZvaWQ6CnVwZGF0ZUFkbWluQWRkcmVzczoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyMTAKICAgIC8vIEBhYmltZXRob2QoeyBhbGxvd0FjdGlvbnM6ICJOb09wIiB9KQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuc3RhdGljX2FycmF5PGFyYzQudWludDgsIDMyPgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjIxMgogICAgLy8gYXNzZXJ0KG9wLlR4bi5zZW5kZXIgPT09IHRoaXMuYWRtaW5fYWRkcmVzcy52YWx1ZSwgIk9ubHkgYWRtaW4gY2FuIHVwZGF0ZSBhZG1pbiBhZGRyZXNzIik7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ1CiAgICAvLyBhZG1pbl9hZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsKICAgIGJ5dGVjIDUgLy8gImFkbWluX2FkZHJlc3MiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjEyCiAgICAvLyBhc3NlcnQob3AuVHhuLnNlbmRlciA9PT0gdGhpcy5hZG1pbl9hZGRyZXNzLnZhbHVlLCAiT25seSBhZG1pbiBjYW4gdXBkYXRlIGFkbWluIGFkZHJlc3MiKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIE9ubHkgYWRtaW4gY2FuIHVwZGF0ZSBhZG1pbiBhZGRyZXNzCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDUKICAgIC8vIGFkbWluX2FkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOwogICAgYnl0ZWMgNSAvLyAiYWRtaW5fYWRkcmVzcyIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyMTMKICAgIC8vIHRoaXMuYWRtaW5fYWRkcmVzcy52YWx1ZSA9IGFkbWluQWRkcmVzczsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjEwCiAgICAvLyBAYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAiTm9PcCIgfSkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6OlN0YWtpbmcudXBkYXRlU3VwZXJBZG1pbkFkZHJlc3Nbcm91dGluZ10oKSAtPiB2b2lkOgp1cGRhdGVTdXBlckFkbWluQWRkcmVzczoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyMTYKICAgIC8vIEBhYmltZXRob2QoeyBhbGxvd0FjdGlvbnM6ICJOb09wIiB9KQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuc3RhdGljX2FycmF5PGFyYzQudWludDgsIDMyPgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjIxOAogICAgLy8gYXNzZXJ0KG9wLlR4bi5zZW5kZXIgPT09IHRoaXMuc3VwZXJfYWRtaW5fYWRkcmVzcy52YWx1ZSwgIk9ubHkgc3VwZXIgYWRtaW4gY2FuIHVwZGF0ZSBzdXBlciBhZG1pbiBhZGRyZXNzIik7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ2CiAgICAvLyBzdXBlcl9hZG1pbl9hZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsKICAgIGJ5dGVjIDE0IC8vICJzdXBlcl9hZG1pbl9hZGRyZXNzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjIxOAogICAgLy8gYXNzZXJ0KG9wLlR4bi5zZW5kZXIgPT09IHRoaXMuc3VwZXJfYWRtaW5fYWRkcmVzcy52YWx1ZSwgIk9ubHkgc3VwZXIgYWRtaW4gY2FuIHVwZGF0ZSBzdXBlciBhZG1pbiBhZGRyZXNzIik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBPbmx5IHN1cGVyIGFkbWluIGNhbiB1cGRhdGUgc3VwZXIgYWRtaW4gYWRkcmVzcwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ2CiAgICAvLyBzdXBlcl9hZG1pbl9hZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsKICAgIGJ5dGVjIDE0IC8vICJzdXBlcl9hZG1pbl9hZGRyZXNzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjIxOQogICAgLy8gdGhpcy5zdXBlcl9hZG1pbl9hZGRyZXNzLnZhbHVlID0gc3VwZXJBZG1pbkFkZHJlc3M7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjIxNgogICAgLy8gQGFiaW1ldGhvZCh7IGFsbG93QWN0aW9uczogIk5vT3AiIH0pCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjpTdGFraW5nLndpdGhkcmF3UGxhdGZvcm1GZWVzW3JvdXRpbmddKCkgLT4gdm9pZDoKd2l0aGRyYXdQbGF0Zm9ybUZlZXM6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjIyCiAgICAvLyBAYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAiTm9PcCIgfSkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBwdXNoaW50IDMyIC8vIDMyCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnN0YXRpY19hcnJheTxhcmM0LnVpbnQ4LCAzMj4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyMjQKICAgIC8vIGFzc2VydChvcC5UeG4uc2VuZGVyID09PSB0aGlzLnN1cGVyX2FkbWluX2FkZHJlc3MudmFsdWUsICJPbmx5IHN1cGVyIGFkbWluIGNhbiB3aXRoZHJhdyBmZWVzIik7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ2CiAgICAvLyBzdXBlcl9hZG1pbl9hZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsKICAgIGJ5dGVjIDE0IC8vICJzdXBlcl9hZG1pbl9hZGRyZXNzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjIyNAogICAgLy8gYXNzZXJ0KG9wLlR4bi5zZW5kZXIgPT09IHRoaXMuc3VwZXJfYWRtaW5fYWRkcmVzcy52YWx1ZSwgIk9ubHkgc3VwZXIgYWRtaW4gY2FuIHdpdGhkcmF3IGZlZXMiKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIE9ubHkgc3VwZXIgYWRtaW4gY2FuIHdpdGhkcmF3IGZlZXMKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyMjUKICAgIC8vIGNvbnN0IGFjY3J1ZWQ6IHVpbnQ2NCA9IHRoaXMucGxhdGZvcm1fZmVlc19hY2NydWVkLnZhbHVlLmFzVWludDY0KCk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjUyCiAgICAvLyBwbGF0Zm9ybV9mZWVzX2FjY3J1ZWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlY18yIC8vICJwbGF0Zm9ybV9mZWVzX2FjY3J1ZWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjI1CiAgICAvLyBjb25zdCBhY2NydWVkOiB1aW50NjQgPSB0aGlzLnBsYXRmb3JtX2ZlZXNfYWNjcnVlZC52YWx1ZS5hc1VpbnQ2NCgpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyMjYKICAgIC8vIGFzc2VydChhY2NydWVkID4gMCwgIk5vIGZlZXMgYWNjcnVlZCIpOwogICAgZHVwCiAgICBhc3NlcnQgLy8gTm8gZmVlcyBhY2NydWVkCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTIKICAgIC8vIHBsYXRmb3JtX2ZlZXNfYWNjcnVlZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjXzIgLy8gInBsYXRmb3JtX2ZlZXNfYWNjcnVlZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyMjgKICAgIC8vIHRoaXMucGxhdGZvcm1fZmVlc19hY2NydWVkLnZhbHVlID0gbmV3IFVpbnQ2NCgwKTsKICAgIGJ5dGVjXzAgLy8gMHgwMDAwMDAwMDAwMDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjIyOS0yMzcKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIHhmZXJBc3NldDogdGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiByZWNlaXZlciwKICAgIC8vICAgICBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiBhY2NydWVkLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjIzMQogICAgLy8geGZlckFzc2V0OiB0aGlzLnJld2FyZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyOQogICAgLy8gcmV3YXJkX2Fzc2V0X2lkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgNiAvLyAicmV3YXJkX2Fzc2V0X2lkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjIzMQogICAgLy8geGZlckFzc2V0OiB0aGlzLnJld2FyZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyMzMKICAgIC8vIHNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgdW5jb3ZlciAyCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFNlbmRlcgogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIGl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjIyOS0yMzYKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIHhmZXJBc3NldDogdGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiByZWNlaXZlciwKICAgIC8vICAgICBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiBhY2NydWVkLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIGludGNfMyAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjM1CiAgICAvLyBmZWU6IDAsCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyMjktMjM3CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogcmVjZWl2ZXIsCiAgICAvLyAgICAgc2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICBhc3NldEFtb3VudDogYWNjcnVlZCwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjIyCiAgICAvLyBAYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAiTm9PcCIgfSkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6OlN0YWtpbmcuZW1lcmdlbmN5V2l0aGRyYXdBc3NldFtyb3V0aW5nXSgpIC0+IHZvaWQ6CmVtZXJnZW5jeVdpdGhkcmF3QXNzZXQ6CiAgICBwdXNoYnl0ZXMgIiIKICAgIGR1cG4gMwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI0MAogICAgLy8gQGFiaW1ldGhvZCh7IGFsbG93QWN0aW9uczogIk5vT3AiIH0pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAzCiAgICBkdXAKICAgIGNvdmVyIDMKICAgIGR1cAogICAgbGVuCiAgICBwdXNoaW50IDMyIC8vIDMyCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnN0YXRpY19hcnJheTxhcmM0LnVpbnQ4LCAzMj4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNDIKICAgIC8vIGFzc2VydChvcC5UeG4uc2VuZGVyID09PSB0aGlzLnN1cGVyX2FkbWluX2FkZHJlc3MudmFsdWUsICJPbmx5IHN1cGVyIGFkbWluIGNhbiB3aXRoZHJhdyIpOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NgogICAgLy8gc3VwZXJfYWRtaW5fYWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7CiAgICBieXRlYyAxNCAvLyAic3VwZXJfYWRtaW5fYWRkcmVzcyIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNDIKICAgIC8vIGFzc2VydChvcC5UeG4uc2VuZGVyID09PSB0aGlzLnN1cGVyX2FkbWluX2FkZHJlc3MudmFsdWUsICJPbmx5IHN1cGVyIGFkbWluIGNhbiB3aXRoZHJhdyIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBhc3NlcnQgLy8gT25seSBzdXBlciBhZG1pbiBjYW4gd2l0aGRyYXcKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNDMKICAgIC8vIGFzc2VydCh0aGlzLmNvbnRyYWN0X3N0YXRlLnZhbHVlID09PSBuZXcgVWludDY0KDApLCAiUG9vbCBtdXN0IGJlIGluYWN0aXZlIik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ5CiAgICAvLyBjb250cmFjdF9zdGF0ZSA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsgLy8gMCA9IGluYWN0aXZlLCAxID0gYWN0aXZlCiAgICBieXRlYyA4IC8vICJjb250cmFjdF9zdGF0ZSIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNDMKICAgIC8vIGFzc2VydCh0aGlzLmNvbnRyYWN0X3N0YXRlLnZhbHVlID09PSBuZXcgVWludDY0KDApLCAiUG9vbCBtdXN0IGJlIGluYWN0aXZlIik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnl0ZWNfMCAvLyAweDAwMDAwMDAwMDAwMDAwMDAKICAgID09CiAgICBhc3NlcnQgLy8gUG9vbCBtdXN0IGJlIGluYWN0aXZlCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjYKICAgIC8vIHN0YWtlcnMgPSBCb3hNYXA8QWNjb3VudCwgU3Rha2VJbmZvUmVjb3JkPih7IGtleVByZWZpeDogInN0IiB9KTsKICAgIGJ5dGVjIDQgLy8gInN0IgogICAgc3dhcAogICAgY29uY2F0CiAgICBkdXAKICAgIGNvdmVyIDMKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNDQKICAgIC8vIGFzc2VydCh0aGlzLnN0YWtlcnMocmVjZWl2ZXIpLmV4aXN0cywgIk5vIHN0YWtlIGZvdW5kIGZvciB1c2VyIik7CiAgICBkdXAKICAgIGJveF9sZW4KICAgIGJ1cnkgMQogICAgYXNzZXJ0IC8vIE5vIHN0YWtlIGZvdW5kIGZvciB1c2VyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjQ2CiAgICAvLyBjb25zdCByZWMgPSBjbG9uZSh0aGlzLnN0YWtlcnMocmVjZWl2ZXIpLnZhbHVlKTsKICAgIGJveF9nZXQKICAgIHBvcAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI0NwogICAgLy8gY29uc3Qgc3Rha2VOb3c6IHVpbnQ2NCA9IHJlYy5zdGFrZS5hc1VpbnQ2NCgpOwogICAgZHVwCiAgICBpbnRjXzAgLy8gMAogICAgZXh0cmFjdF91aW50NjQKICAgIGR1cAogICAgY292ZXIgNAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI0OAogICAgLy8gYXNzZXJ0KHN0YWtlTm93ID4gMCwgIk5vIHN0YWtlIik7CiAgICBkdXAKICAgIGFzc2VydCAvLyBObyBzdGFrZQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI0OQogICAgLy8gYXNzZXJ0KGFzc2V0SWQgPT09IHRoaXMuc3Rha2VkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksICJJbnZhbGlkIGFzc2V0Iik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI4CiAgICAvLyBzdGFrZWRfYXNzZXRfaWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxNiAvLyAic3Rha2VkX2Fzc2V0X2lkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI0OQogICAgLy8gYXNzZXJ0KGFzc2V0SWQgPT09IHRoaXMuc3Rha2VkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksICJJbnZhbGlkIGFzc2V0Iik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgdW5jb3ZlciA0CiAgICA9PQogICAgYXNzZXJ0IC8vIEludmFsaWQgYXNzZXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNTAKICAgIC8vIGFzc2VydChhbW91bnQgPT09IHN0YWtlTm93LCAiQW1vdW50IG1pc21hdGNoIik7CiAgICB1bmNvdmVyIDIKICAgIGRpZyAxCiAgICA9PQogICAgYXNzZXJ0IC8vIEFtb3VudCBtaXNtYXRjaAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI1MgogICAgLy8gY29uc3QgYWNjcnVlZCA9IG11bERpdlcoc3Rha2VOb3csIHRoaXMucmV3YXJkX3Blcl90b2tlbi52YWx1ZS5hc1VpbnQ2NCgpLCBQUkVDSVNJT04pOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMgogICAgLy8gcmV3YXJkX3Blcl90b2tlbiA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDkgLy8gInJld2FyZF9wZXJfdG9rZW4iCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjUyCiAgICAvLyBjb25zdCBhY2NydWVkID0gbXVsRGl2VyhzdGFrZU5vdywgdGhpcy5yZXdhcmRfcGVyX3Rva2VuLnZhbHVlLmFzVWludDY0KCksIFBSRUNJU0lPTik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvY29uZmlnLmFsZ28udHM6MjgKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhhLCBiKTsKICAgIG11bHcKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNTIKICAgIC8vIGNvbnN0IGFjY3J1ZWQgPSBtdWxEaXZXKHN0YWtlTm93LCB0aGlzLnJld2FyZF9wZXJfdG9rZW4udmFsdWUuYXNVaW50NjQoKSwgUFJFQ0lTSU9OKTsKICAgIGludGMgNCAvLyAxMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9jb25maWcuYWxnby50czoyOQogICAgLy8gcmV0dXJuIGRpdncoaGksIGxvLCBjKTsKICAgIGRpdncKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjUzCiAgICAvLyBsZXQgcGVuZGluZzogdWludDY0ID0gYWNjcnVlZCA+IHJlYy5yZXdhcmREZWJ0LmFzVWludDY0KCkgPyBhY2NydWVkIC0gcmVjLnJld2FyZERlYnQuYXNVaW50NjQoKSA6IDA7CiAgICBpbnRjXzIgLy8gOAogICAgZXh0cmFjdF91aW50NjQKICAgIGR1cAogICAgY292ZXIgMgogICAgPgogICAgYnogZW1lcmdlbmN5V2l0aGRyYXdBc3NldF90ZXJuYXJ5X2ZhbHNlQDMKICAgIGR1cDIKICAgIC0KICAgIGJ1cnkgNgoKZW1lcmdlbmN5V2l0aGRyYXdBc3NldF90ZXJuYXJ5X21lcmdlQDQ6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjU0CiAgICAvLyBjb25zdCBwYXlhYmxlOiB1aW50NjQgPSB0aGlzLmFjY3J1ZWRfcmV3YXJkcy52YWx1ZS5hc1VpbnQ2NCgpIC0gdGhpcy5yZXdhcmRzX3BhaWQudmFsdWUuYXNVaW50NjQoKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzkKICAgIC8vIGFjY3J1ZWRfcmV3YXJkcyA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDcgLy8gImFjY3J1ZWRfcmV3YXJkcyIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNTQKICAgIC8vIGNvbnN0IHBheWFibGU6IHVpbnQ2NCA9IHRoaXMuYWNjcnVlZF9yZXdhcmRzLnZhbHVlLmFzVWludDY0KCkgLSB0aGlzLnJld2FyZHNfcGFpZC52YWx1ZS5hc1VpbnQ2NCgpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDIKICAgIC8vIHJld2FyZHNfcGFpZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjXzEgLy8gInJld2FyZHNfcGFpZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNTQKICAgIC8vIGNvbnN0IHBheWFibGU6IHVpbnQ2NCA9IHRoaXMuYWNjcnVlZF9yZXdhcmRzLnZhbHVlLmFzVWludDY0KCkgLSB0aGlzLnJld2FyZHNfcGFpZC52YWx1ZS5hc1VpbnQ2NCgpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIC0KICAgIGR1cAogICAgYnVyeSA4CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjU1CiAgICAvLyBpZiAocGVuZGluZyA+IHBheWFibGUpIHsKICAgIGRpZyA2CiAgICA8CiAgICBieiBlbWVyZ2VuY3lXaXRoZHJhd0Fzc2V0X2FmdGVyX2lmX2Vsc2VANgogICAgZGlnIDYKICAgIGJ1cnkgNgoKZW1lcmdlbmN5V2l0aGRyYXdBc3NldF9hZnRlcl9pZl9lbHNlQDY6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjU5CiAgICAvLyBpZiAocGVuZGluZyA+IDApIHsKICAgIGRpZyA1CiAgICBieiBlbWVyZ2VuY3lXaXRoZHJhd0Fzc2V0X2FmdGVyX2lmX2Vsc2VAMTMKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNjAKICAgIC8vIGxldCBmZWU6IHVpbnQ2NCA9IG11bERpdlcocGVuZGluZywgdGhpcy5wbGF0Zm9ybV9mZWVfYnBzLnZhbHVlLmFzVWludDY0KCksIDEwXzAwMCk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjUxCiAgICAvLyBwbGF0Zm9ybV9mZWVfYnBzID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTUgLy8gInBsYXRmb3JtX2ZlZV9icHMiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjYwCiAgICAvLyBsZXQgZmVlOiB1aW50NjQgPSBtdWxEaXZXKHBlbmRpbmcsIHRoaXMucGxhdGZvcm1fZmVlX2Jwcy52YWx1ZS5hc1VpbnQ2NCgpLCAxMF8wMDApOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL2NvbmZpZy5hbGdvLnRzOjI4CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcoYSwgYik7CiAgICBkaWcgNgogICAgZHVwCiAgICB1bmNvdmVyIDIKICAgIG11bHcKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNjAKICAgIC8vIGxldCBmZWU6IHVpbnQ2NCA9IG11bERpdlcocGVuZGluZywgdGhpcy5wbGF0Zm9ybV9mZWVfYnBzLnZhbHVlLmFzVWludDY0KCksIDEwXzAwMCk7CiAgICBpbnRjIDUgLy8gMTAwMDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL2NvbmZpZy5hbGdvLnRzOjI5CiAgICAvLyByZXR1cm4gZGl2dyhoaSwgbG8sIGMpOwogICAgZGl2dwogICAgZHVwCiAgICBidXJ5IDExCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjYxCiAgICAvLyBpZiAoZmVlID4gcGVuZGluZykgewogICAgPAogICAgYnogZW1lcmdlbmN5V2l0aGRyYXdBc3NldF9hZnRlcl9pZl9lbHNlQDkKICAgIGRpZyA1CiAgICBidXJ5IDkKCmVtZXJnZW5jeVdpdGhkcmF3QXNzZXRfYWZ0ZXJfaWZfZWxzZUA5OgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI2NAogICAgLy8gY29uc3QgbmV0OiB1aW50NjQgPSBwZW5kaW5nIC0gZmVlOwogICAgZGlnIDUKICAgIGRpZyA5CiAgICBkdXAKICAgIGNvdmVyIDIKICAgIC0KICAgIGJ1cnkgOQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI2NQogICAgLy8gaWYgKGZlZSA+IDApIHsKICAgIGJ6IGVtZXJnZW5jeVdpdGhkcmF3QXNzZXRfYWZ0ZXJfaWZfZWxzZUAxMQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI2NgogICAgLy8gdGhpcy5wbGF0Zm9ybV9mZWVzX2FjY3J1ZWQudmFsdWUgPSBuZXcgVWludDY0KHRoaXMucGxhdGZvcm1fZmVlc19hY2NydWVkLnZhbHVlLmFzVWludDY0KCkgKyBmZWUpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MgogICAgLy8gcGxhdGZvcm1fZmVlc19hY2NydWVkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMiAvLyAicGxhdGZvcm1fZmVlc19hY2NydWVkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI2NgogICAgLy8gdGhpcy5wbGF0Zm9ybV9mZWVzX2FjY3J1ZWQudmFsdWUgPSBuZXcgVWludDY0KHRoaXMucGxhdGZvcm1fZmVlc19hY2NydWVkLnZhbHVlLmFzVWludDY0KCkgKyBmZWUpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIGRpZyA5CiAgICArCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTIKICAgIC8vIHBsYXRmb3JtX2ZlZXNfYWNjcnVlZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjXzIgLy8gInBsYXRmb3JtX2ZlZXNfYWNjcnVlZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNjYKICAgIC8vIHRoaXMucGxhdGZvcm1fZmVlc19hY2NydWVkLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLnBsYXRmb3JtX2ZlZXNfYWNjcnVlZC52YWx1ZS5hc1VpbnQ2NCgpICsgZmVlKTsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CgplbWVyZ2VuY3lXaXRoZHJhd0Fzc2V0X2FmdGVyX2lmX2Vsc2VAMTE6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjY4CiAgICAvLyB0aGlzLnJld2FyZHNfcGFpZC52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy5yZXdhcmRzX3BhaWQudmFsdWUuYXNVaW50NjQoKSArIHBlbmRpbmcpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MgogICAgLy8gcmV3YXJkc19wYWlkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMSAvLyAicmV3YXJkc19wYWlkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI2OAogICAgLy8gdGhpcy5yZXdhcmRzX3BhaWQudmFsdWUgPSBuZXcgVWludDY0KHRoaXMucmV3YXJkc19wYWlkLnZhbHVlLmFzVWludDY0KCkgKyBwZW5kaW5nKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICBkaWcgNgogICAgKwogICAgaXRvYgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQyCiAgICAvLyByZXdhcmRzX3BhaWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlY18xIC8vICJyZXdhcmRzX3BhaWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjY4CiAgICAvLyB0aGlzLnJld2FyZHNfcGFpZC52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy5yZXdhcmRzX3BhaWQudmFsdWUuYXNVaW50NjQoKSArIHBlbmRpbmcpOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNjktMjc3CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogcmVjZWl2ZXIsCiAgICAvLyAgICAgc2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICBhc3NldEFtb3VudDogbmV0LAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI3MQogICAgLy8geGZlckFzc2V0OiB0aGlzLnJld2FyZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyOQogICAgLy8gcmV3YXJkX2Fzc2V0X2lkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgNiAvLyAicmV3YXJkX2Fzc2V0X2lkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI3MQogICAgLy8geGZlckFzc2V0OiB0aGlzLnJld2FyZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNzMKICAgIC8vIHNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgZGlnIDkKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgU2VuZGVyCiAgICBkaWcgNQogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI2OS0yNzYKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIHhmZXJBc3NldDogdGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiByZWNlaXZlciwKICAgIC8vICAgICBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiBuZXQsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgaW50Y18zIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNzUKICAgIC8vIGZlZTogMCwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI2OS0yNzcKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIHhmZXJBc3NldDogdGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiByZWNlaXZlciwKICAgIC8vICAgICBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiBuZXQsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAoKZW1lcmdlbmN5V2l0aGRyYXdBc3NldF9hZnRlcl9pZl9lbHNlQDEzOgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI4MC0yODgKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIHhmZXJBc3NldDogdGhpcy5zdGFrZWRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiByZWNlaXZlciwKICAgIC8vICAgICBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiBzdGFrZU5vdywKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyODIKICAgIC8vIHhmZXJBc3NldDogdGhpcy5zdGFrZWRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjgKICAgIC8vIHN0YWtlZF9hc3NldF9pZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDE2IC8vICJzdGFrZWRfYXNzZXRfaWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjgyCiAgICAvLyB4ZmVyQXNzZXQ6IHRoaXMuc3Rha2VkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI4NAogICAgLy8gc2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICBkaWcgNAogICAgZHVwCiAgICBjb3ZlciAzCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFNlbmRlcgogICAgZGlnIDYKICAgIGR1cAogICAgY292ZXIgMwogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI4MC0yODcKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIHhmZXJBc3NldDogdGhpcy5zdGFrZWRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiByZWNlaXZlciwKICAgIC8vICAgICBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiBzdGFrZU5vdywKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBpbnRjXzMgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI4NgogICAgLy8gZmVlOiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjgwLTI4OAogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgeGZlckFzc2V0OiB0aGlzLnN0YWtlZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IHJlY2VpdmVyLAogICAgLy8gICAgIHNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IHN0YWtlTm93LAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyOTAKICAgIC8vIHRoaXMudG90YWxfc3Rha2VkLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLnRvdGFsX3N0YWtlZC52YWx1ZS5hc1VpbnQ2NCgpIC0gc3Rha2VOb3cpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMQogICAgLy8gdG90YWxfc3Rha2VkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMyAvLyAidG90YWxfc3Rha2VkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI5MAogICAgLy8gdGhpcy50b3RhbF9zdGFrZWQudmFsdWUgPSBuZXcgVWludDY0KHRoaXMudG90YWxfc3Rha2VkLnZhbHVlLmFzVWludDY0KCkgLSBzdGFrZU5vdyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgc3dhcAogICAgLQogICAgaXRvYgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMxCiAgICAvLyB0b3RhbF9zdGFrZWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlY18zIC8vICJ0b3RhbF9zdGFrZWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjkwCiAgICAvLyB0aGlzLnRvdGFsX3N0YWtlZC52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy50b3RhbF9zdGFrZWQudmFsdWUuYXNVaW50NjQoKSAtIHN0YWtlTm93KTsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjkxCiAgICAvLyB0aGlzLm51bV9zdGFrZXJzLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLm51bV9zdGFrZXJzLnZhbHVlLmFzVWludDY0KCkgLSAxKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDcKICAgIC8vIG51bV9zdGFrZXJzID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTAgLy8gIm51bV9zdGFrZXJzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI5MQogICAgLy8gdGhpcy5udW1fc3Rha2Vycy52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy5udW1fc3Rha2Vycy52YWx1ZS5hc1VpbnQ2NCgpIC0gMSk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgaW50Y18xIC8vIDEKICAgIC0KICAgIGl0b2IKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NwogICAgLy8gbnVtX3N0YWtlcnMgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxMCAvLyAibnVtX3N0YWtlcnMiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjkxCiAgICAvLyB0aGlzLm51bV9zdGFrZXJzLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLm51bV9zdGFrZXJzLnZhbHVlLmFzVWludDY0KCkgLSAxKTsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjkyCiAgICAvLyB0aGlzLnN0YWtlcnMocmVjZWl2ZXIpLmRlbGV0ZSgpOwogICAgZGlnIDQKICAgIGJveF9kZWwKICAgIHBvcAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI5NC0zMDEKICAgIC8vIGl0eG4KICAgIC8vICAgLnBheW1lbnQoewogICAgLy8gICAgIHJlY2VpdmVyOiByZWNlaXZlciwKICAgIC8vICAgICBhbW91bnQ6IEJPWF9GRUUgLSAyMDAwLAogICAgLy8gICAgIHNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6Mjk4CiAgICAvLyBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIGl0eG5fZmllbGQgU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6Mjk3CiAgICAvLyBhbW91bnQ6IEJPWF9GRUUgLSAyMDAwLAogICAgcHVzaGludCAyMDUwMCAvLyAyMDUwMAogICAgaXR4bl9maWVsZCBBbW91bnQKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyOTQtMzAwCiAgICAvLyBpdHhuCiAgICAvLyAgIC5wYXltZW50KHsKICAgIC8vICAgICByZWNlaXZlcjogcmVjZWl2ZXIsCiAgICAvLyAgICAgYW1vdW50OiBCT1hfRkVFIC0gMjAwMCwKICAgIC8vICAgICBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIGludGNfMSAvLyAxCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6Mjk5CiAgICAvLyBmZWU6IDAsCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyOTQtMzAxCiAgICAvLyBpdHhuCiAgICAvLyAgIC5wYXltZW50KHsKICAgIC8vICAgICByZWNlaXZlcjogcmVjZWl2ZXIsCiAgICAvLyAgICAgYW1vdW50OiBCT1hfRkVFIC0gMjAwMCwKICAgIC8vICAgICBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNDAKICAgIC8vIEBhYmltZXRob2QoeyBhbGxvd0FjdGlvbnM6ICJOb09wIiB9KQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKZW1lcmdlbmN5V2l0aGRyYXdBc3NldF90ZXJuYXJ5X2ZhbHNlQDM6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjUzCiAgICAvLyBsZXQgcGVuZGluZzogdWludDY0ID0gYWNjcnVlZCA+IHJlYy5yZXdhcmREZWJ0LmFzVWludDY0KCkgPyBhY2NydWVkIC0gcmVjLnJld2FyZERlYnQuYXNVaW50NjQoKSA6IDA7CiAgICBpbnRjXzAgLy8gMAogICAgYnVyeSA2CiAgICBiIGVtZXJnZW5jeVdpdGhkcmF3QXNzZXRfdGVybmFyeV9tZXJnZUA0CgoKLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjpTdGFraW5nLnN0YWtlW3JvdXRpbmddKCkgLT4gdm9pZDoKc3Rha2U6CiAgICBwdXNoYnl0ZXMgIiIKICAgIGR1cG4gNgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM2NgogICAgLy8gQGFiaW1ldGhvZCh7IGFsbG93QWN0aW9uczogIk5vT3AiIH0pCiAgICB0eG4gR3JvdXBJbmRleAogICAgcHVzaGludCAyIC8vIDIKICAgIC0KICAgIGR1cAogICAgZ3R4bnMgVHlwZUVudW0KICAgIGludGNfMyAvLyBheGZlcgogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIGF4ZmVyCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIHR4biBHcm91cEluZGV4CiAgICBpbnRjXzEgLy8gMQogICAgLQogICAgZHVwCiAgICBndHhucyBUeXBlRW51bQogICAgaW50Y18xIC8vIHBheQogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIHBheQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM2OAogICAgLy8gYXNzZXJ0KHF1YW50aXR5ID4gMCwgIkludmFsaWQgcXVhbnRpdHkiKTsKICAgIGRpZyAxCiAgICBhc3NlcnQgLy8gSW52YWxpZCBxdWFudGl0eQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM2OQogICAgLy8gYXNzZXJ0KHRoaXMuY29udHJhY3Rfc3RhdGUudmFsdWUuYXNVaW50NjQoKSA9PT0gMSwgIlBvb2wgaXMgaW5hY3RpdmUiKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDkKICAgIC8vIGNvbnRyYWN0X3N0YXRlID0gR2xvYmFsU3RhdGU8VWludDY0PigpOyAvLyAwID0gaW5hY3RpdmUsIDEgPSBhY3RpdmUKICAgIGJ5dGVjIDggLy8gImNvbnRyYWN0X3N0YXRlIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM2OQogICAgLy8gYXNzZXJ0KHRoaXMuY29udHJhY3Rfc3RhdGUudmFsdWUuYXNVaW50NjQoKSA9PT0gMSwgIlBvb2wgaXMgaW5hY3RpdmUiKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICBpbnRjXzEgLy8gMQogICAgPT0KICAgIGFzc2VydCAvLyBQb29sIGlzIGluYWN0aXZlCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzcwCiAgICAvLyBhc3NlcnQodGhpcy5yZXdhcmRzX2V4aGF1c3RlZC52YWx1ZS5hc1VpbnQ2NCgpID09PSAwLCAiUmV3YXJkcyBleGhhdXN0ZWQiKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDEKICAgIC8vIHJld2FyZHNfZXhoYXVzdGVkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTIgLy8gInJld2FyZHNfZXhoYXVzdGVkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM3MAogICAgLy8gYXNzZXJ0KHRoaXMucmV3YXJkc19leGhhdXN0ZWQudmFsdWUuYXNVaW50NjQoKSA9PT0gMCwgIlJld2FyZHMgZXhoYXVzdGVkIik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgIQogICAgYXNzZXJ0IC8vIFJld2FyZHMgZXhoYXVzdGVkCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzcxLTM3NgogICAgLy8gYXNzZXJ0TWF0Y2goc3Rha2VUeG4sIHsKICAgIC8vICAgc2VuZGVyOiBvcC5UeG4uc2VuZGVyLAogICAgLy8gICBhc3NldFJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnN0YWtlZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IHF1YW50aXR5LAogICAgLy8gfSk7CiAgICBkaWcgMgogICAgZ3R4bnMgU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzcyCiAgICAvLyBzZW5kZXI6IG9wLlR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzcxLTM3NgogICAgLy8gYXNzZXJ0TWF0Y2goc3Rha2VUeG4sIHsKICAgIC8vICAgc2VuZGVyOiBvcC5UeG4uc2VuZGVyLAogICAgLy8gICBhc3NldFJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnN0YWtlZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IHF1YW50aXR5LAogICAgLy8gfSk7CiAgICA9PQogICAgZGlnIDMKICAgIGd0eG5zIEFzc2V0UmVjZWl2ZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNzMKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNzEtMzc2CiAgICAvLyBhc3NlcnRNYXRjaChzdGFrZVR4biwgewogICAgLy8gICBzZW5kZXI6IG9wLlR4bi5zZW5kZXIsCiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3Rha2VkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCkpLAogICAgLy8gICBhc3NldEFtb3VudDogcXVhbnRpdHksCiAgICAvLyB9KTsKICAgID09CiAgICAmJgogICAgZGlnIDMKICAgIGd0eG5zIFhmZXJBc3NldAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM3NAogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLnN0YWtlZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjgKICAgIC8vIHN0YWtlZF9hc3NldF9pZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDE2IC8vICJzdGFrZWRfYXNzZXRfaWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6Mzc0CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3Rha2VkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCkpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNzEtMzc2CiAgICAvLyBhc3NlcnRNYXRjaChzdGFrZVR4biwgewogICAgLy8gICBzZW5kZXI6IG9wLlR4bi5zZW5kZXIsCiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3Rha2VkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCkpLAogICAgLy8gICBhc3NldEFtb3VudDogcXVhbnRpdHksCiAgICAvLyB9KTsKICAgID09CiAgICAmJgogICAgdW5jb3ZlciAzCiAgICBndHhucyBBc3NldEFtb3VudAogICAgdW5jb3ZlciAzCiAgICA9PQogICAgJiYKICAgIGFzc2VydCAvLyBhc3NlcnQgdGFyZ2V0IGlzIG1hdGNoIGZvciBjb25kaXRpb25zCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6Mzc3LTM4MQogICAgLy8gYXNzZXJ0TWF0Y2gobWJyVHhuLCB7CiAgICAvLyAgIHNlbmRlcjogb3AuVHhuLnNlbmRlciwKICAgIC8vICAgcmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICBhbW91bnQ6IEJPWF9GRUUsCiAgICAvLyB9KTsKICAgIGR1cAogICAgZ3R4bnMgU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6Mzc4CiAgICAvLyBzZW5kZXI6IG9wLlR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6Mzc3LTM4MQogICAgLy8gYXNzZXJ0TWF0Y2gobWJyVHhuLCB7CiAgICAvLyAgIHNlbmRlcjogb3AuVHhuLnNlbmRlciwKICAgIC8vICAgcmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICBhbW91bnQ6IEJPWF9GRUUsCiAgICAvLyB9KTsKICAgID09CiAgICBkaWcgMQogICAgZ3R4bnMgUmVjZWl2ZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNzkKICAgIC8vIHJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6Mzc3LTM4MQogICAgLy8gYXNzZXJ0TWF0Y2gobWJyVHhuLCB7CiAgICAvLyAgIHNlbmRlcjogb3AuVHhuLnNlbmRlciwKICAgIC8vICAgcmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICBhbW91bnQ6IEJPWF9GRUUsCiAgICAvLyB9KTsKICAgID09CiAgICAmJgogICAgc3dhcAogICAgZ3R4bnMgQW1vdW50CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzgwCiAgICAvLyBhbW91bnQ6IEJPWF9GRUUsCiAgICBpbnRjIDYgLy8gMjI1MDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNzctMzgxCiAgICAvLyBhc3NlcnRNYXRjaChtYnJUeG4sIHsKICAgIC8vICAgc2VuZGVyOiBvcC5UeG4uc2VuZGVyLAogICAgLy8gICByZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgIGFtb3VudDogQk9YX0ZFRSwKICAgIC8vIH0pOwogICAgPT0KICAgICYmCiAgICBhc3NlcnQgLy8gYXNzZXJ0IHRhcmdldCBpcyBtYXRjaCBmb3IgY29uZGl0aW9ucwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI2CiAgICAvLyBzdGFrZXJzID0gQm94TWFwPEFjY291bnQsIFN0YWtlSW5mb1JlY29yZD4oeyBrZXlQcmVmaXg6ICJzdCIgfSk7CiAgICBieXRlYyA0IC8vICJzdCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozODIKICAgIC8vIGNvbnN0IGV4aXN0cyA9IHRoaXMuc3Rha2VycyhvcC5UeG4uc2VuZGVyKS5leGlzdHM7CiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjYKICAgIC8vIHN0YWtlcnMgPSBCb3hNYXA8QWNjb3VudCwgU3Rha2VJbmZvUmVjb3JkPih7IGtleVByZWZpeDogInN0IiB9KTsKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM4MgogICAgLy8gY29uc3QgZXhpc3RzID0gdGhpcy5zdGFrZXJzKG9wLlR4bi5zZW5kZXIpLmV4aXN0czsKICAgIGJveF9sZW4KICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICBwb3AKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozODMKICAgIC8vIGlmIChleGlzdHMpIHsKICAgIGJ6IHN0YWtlX2FmdGVyX2lmX2Vsc2VANAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM4NS0zOTIKICAgIC8vIGl0eG4KICAgIC8vICAgLnBheW1lbnQoewogICAgLy8gICAgIHJlY2VpdmVyOiBvcC5UeG4uc2VuZGVyLAogICAgLy8gICAgIGFtb3VudDogQk9YX0ZFRSwKICAgIC8vICAgICBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM4NwogICAgLy8gcmVjZWl2ZXI6IG9wLlR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6Mzg5CiAgICAvLyBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIGl0eG5fZmllbGQgU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6Mzg4CiAgICAvLyBhbW91bnQ6IEJPWF9GRUUsCiAgICBpbnRjIDYgLy8gMjI1MDAKICAgIGl0eG5fZmllbGQgQW1vdW50CiAgICBpdHhuX2ZpZWxkIFJlY2VpdmVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6Mzg1LTM5MQogICAgLy8gaXR4bgogICAgLy8gICAucGF5bWVudCh7CiAgICAvLyAgICAgcmVjZWl2ZXI6IG9wLlR4bi5zZW5kZXIsCiAgICAvLyAgICAgYW1vdW50OiBCT1hfRkVFLAogICAgLy8gICAgIHNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgaW50Y18xIC8vIDEKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozOTAKICAgIC8vIGZlZTogMCwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM4NS0zOTIKICAgIC8vIGl0eG4KICAgIC8vICAgLnBheW1lbnQoewogICAgLy8gICAgIHJlY2VpdmVyOiBvcC5UeG4uc2VuZGVyLAogICAgLy8gICAgIGFtb3VudDogQk9YX0ZFRSwKICAgIC8vICAgICBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKCnN0YWtlX2FmdGVyX2lmX2Vsc2VANDoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozOTUKICAgIC8vIHRoaXMudXBkYXRlUG9vbCgpOwogICAgY2FsbHN1YiB1cGRhdGVQb29sCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6Mzk3CiAgICAvLyBjb25zdCBwcmV2U3Rha2U6IHVpbnQ2NCA9IGV4aXN0cyA/IHRoaXMuc3Rha2VycyhvcC5UeG4uc2VuZGVyKS52YWx1ZS5zdGFrZS5hc1VpbnQ2NCgpIDogMDsKICAgIGR1cAogICAgYnogc3Rha2VfdGVybmFyeV9mYWxzZUA2CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjYKICAgIC8vIHN0YWtlcnMgPSBCb3hNYXA8QWNjb3VudCwgU3Rha2VJbmZvUmVjb3JkPih7IGtleVByZWZpeDogInN0IiB9KTsKICAgIGJ5dGVjIDQgLy8gInN0IgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM5NwogICAgLy8gY29uc3QgcHJldlN0YWtlOiB1aW50NjQgPSBleGlzdHMgPyB0aGlzLnN0YWtlcnMob3AuVHhuLnNlbmRlcikudmFsdWUuc3Rha2UuYXNVaW50NjQoKSA6IDA7CiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjYKICAgIC8vIHN0YWtlcnMgPSBCb3hNYXA8QWNjb3VudCwgU3Rha2VJbmZvUmVjb3JkPih7IGtleVByZWZpeDogInN0IiB9KTsKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM5NwogICAgLy8gY29uc3QgcHJldlN0YWtlOiB1aW50NjQgPSBleGlzdHMgPyB0aGlzLnN0YWtlcnMob3AuVHhuLnNlbmRlcikudmFsdWUuc3Rha2UuYXNVaW50NjQoKSA6IDA7CiAgICBib3hfZ2V0CiAgICBhc3NlcnQgLy8gQm94IG11c3QgaGF2ZSB2YWx1ZQogICAgaW50Y18wIC8vIDAKICAgIGV4dHJhY3RfdWludDY0CiAgICBidXJ5IDMKCnN0YWtlX3Rlcm5hcnlfbWVyZ2VANzoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozOTgKICAgIC8vIGNvbnN0IHByZXZEZWJ0OiB1aW50NjQgPSBleGlzdHMgPyB0aGlzLnN0YWtlcnMob3AuVHhuLnNlbmRlcikudmFsdWUucmV3YXJkRGVidC5hc1VpbnQ2NCgpIDogMDsKICAgIGR1cAogICAgYnogc3Rha2VfdGVybmFyeV9mYWxzZUA5CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjYKICAgIC8vIHN0YWtlcnMgPSBCb3hNYXA8QWNjb3VudCwgU3Rha2VJbmZvUmVjb3JkPih7IGtleVByZWZpeDogInN0IiB9KTsKICAgIGJ5dGVjIDQgLy8gInN0IgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM5OAogICAgLy8gY29uc3QgcHJldkRlYnQ6IHVpbnQ2NCA9IGV4aXN0cyA/IHRoaXMuc3Rha2VycyhvcC5UeG4uc2VuZGVyKS52YWx1ZS5yZXdhcmREZWJ0LmFzVWludDY0KCkgOiAwOwogICAgdHhuIFNlbmRlcgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI2CiAgICAvLyBzdGFrZXJzID0gQm94TWFwPEFjY291bnQsIFN0YWtlSW5mb1JlY29yZD4oeyBrZXlQcmVmaXg6ICJzdCIgfSk7CiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozOTgKICAgIC8vIGNvbnN0IHByZXZEZWJ0OiB1aW50NjQgPSBleGlzdHMgPyB0aGlzLnN0YWtlcnMob3AuVHhuLnNlbmRlcikudmFsdWUucmV3YXJkRGVidC5hc1VpbnQ2NCgpIDogMDsKICAgIGJveF9nZXQKICAgIGFzc2VydCAvLyBCb3ggbXVzdCBoYXZlIHZhbHVlCiAgICBpbnRjXzIgLy8gOAogICAgZXh0cmFjdF91aW50NjQKICAgIGJ1cnkgNAoKc3Rha2VfdGVybmFyeV9tZXJnZUAxMDoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozOTkKICAgIC8vIGNvbnN0IGFjY3J1ZWQgPSBtdWxEaXZXKHByZXZTdGFrZSwgdGhpcy5yZXdhcmRfcGVyX3Rva2VuLnZhbHVlLmFzVWludDY0KCksIFBSRUNJU0lPTik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMyCiAgICAvLyByZXdhcmRfcGVyX3Rva2VuID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgOSAvLyAicmV3YXJkX3Blcl90b2tlbiIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozOTkKICAgIC8vIGNvbnN0IGFjY3J1ZWQgPSBtdWxEaXZXKHByZXZTdGFrZSwgdGhpcy5yZXdhcmRfcGVyX3Rva2VuLnZhbHVlLmFzVWludDY0KCksIFBSRUNJU0lPTik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvY29uZmlnLmFsZ28udHM6MjgKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhhLCBiKTsKICAgIGRpZyAzCiAgICBtdWx3CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6Mzk5CiAgICAvLyBjb25zdCBhY2NydWVkID0gbXVsRGl2VyhwcmV2U3Rha2UsIHRoaXMucmV3YXJkX3Blcl90b2tlbi52YWx1ZS5hc1VpbnQ2NCgpLCBQUkVDSVNJT04pOwogICAgaW50YyA0IC8vIDEwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL2NvbmZpZy5hbGdvLnRzOjI5CiAgICAvLyByZXR1cm4gZGl2dyhoaSwgbG8sIGMpOwogICAgZGl2dwogICAgZHVwCiAgICBidXJ5IDEwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDAwCiAgICAvLyBsZXQgcGVuZGluZzogdWludDY0ID0gYWNjcnVlZCA+IHByZXZEZWJ0ID8gYWNjcnVlZCAtIHByZXZEZWJ0IDogMDsKICAgIGRpZyA0CiAgICA+CiAgICBieiBzdGFrZV90ZXJuYXJ5X2ZhbHNlQDEyCiAgICBkaWcgOAogICAgZGlnIDQKICAgIC0KICAgIGJ1cnkgNQoKc3Rha2VfdGVybmFyeV9tZXJnZUAxMzoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MDEKICAgIC8vIGNvbnN0IHBheWFibGU6IHVpbnQ2NCA9IHRoaXMuYWNjcnVlZF9yZXdhcmRzLnZhbHVlLmFzVWludDY0KCkgLSB0aGlzLnJld2FyZHNfcGFpZC52YWx1ZS5hc1VpbnQ2NCgpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozOQogICAgLy8gYWNjcnVlZF9yZXdhcmRzID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgNyAvLyAiYWNjcnVlZF9yZXdhcmRzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQwMQogICAgLy8gY29uc3QgcGF5YWJsZTogdWludDY0ID0gdGhpcy5hY2NydWVkX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKSAtIHRoaXMucmV3YXJkc19wYWlkLnZhbHVlLmFzVWludDY0KCk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MgogICAgLy8gcmV3YXJkc19wYWlkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMSAvLyAicmV3YXJkc19wYWlkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQwMQogICAgLy8gY29uc3QgcGF5YWJsZTogdWludDY0ID0gdGhpcy5hY2NydWVkX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKSAtIHRoaXMucmV3YXJkc19wYWlkLnZhbHVlLmFzVWludDY0KCk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgLQogICAgZHVwCiAgICBidXJ5IDcKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MDIKICAgIC8vIGlmIChwZW5kaW5nID4gcGF5YWJsZSkgewogICAgZGlnIDUKICAgIDwKICAgIGJ6IHN0YWtlX2FmdGVyX2lmX2Vsc2VAMTUKICAgIGRpZyA1CiAgICBidXJ5IDUKCnN0YWtlX2FmdGVyX2lmX2Vsc2VAMTU6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDA2CiAgICAvLyBpZiAocGVuZGluZyA+IDApIHsKICAgIGRpZyA0CiAgICBieiBzdGFrZV9hZnRlcl9pZl9lbHNlQDIyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDA3CiAgICAvLyBsZXQgZmVlOiB1aW50NjQgPSBtdWxEaXZXKHBlbmRpbmcsIHRoaXMucGxhdGZvcm1fZmVlX2Jwcy52YWx1ZS5hc1VpbnQ2NCgpLCAxMF8wMDApOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MQogICAgLy8gcGxhdGZvcm1fZmVlX2JwcyA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDE1IC8vICJwbGF0Zm9ybV9mZWVfYnBzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQwNwogICAgLy8gbGV0IGZlZTogdWludDY0ID0gbXVsRGl2VyhwZW5kaW5nLCB0aGlzLnBsYXRmb3JtX2ZlZV9icHMudmFsdWUuYXNVaW50NjQoKSwgMTBfMDAwKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9jb25maWcuYWxnby50czoyOAogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KGEsIGIpOwogICAgZGlnIDUKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICBtdWx3CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDA3CiAgICAvLyBsZXQgZmVlOiB1aW50NjQgPSBtdWxEaXZXKHBlbmRpbmcsIHRoaXMucGxhdGZvcm1fZmVlX2Jwcy52YWx1ZS5hc1VpbnQ2NCgpLCAxMF8wMDApOwogICAgaW50YyA1IC8vIDEwMDAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9jb25maWcuYWxnby50czoyOQogICAgLy8gcmV0dXJuIGRpdncoaGksIGxvLCBjKTsKICAgIGRpdncKICAgIGR1cAogICAgYnVyeSAxMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQwOAogICAgLy8gaWYgKGZlZSA+IHBlbmRpbmcpIHsKICAgIDwKICAgIGJ6IHN0YWtlX2FmdGVyX2lmX2Vsc2VAMTgKICAgIGRpZyA0CiAgICBidXJ5IDgKCnN0YWtlX2FmdGVyX2lmX2Vsc2VAMTg6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDExCiAgICAvLyBjb25zdCBuZXQ6IHVpbnQ2NCA9IHBlbmRpbmcgLSBmZWU7CiAgICBkaWcgNAogICAgZGlnIDgKICAgIGR1cAogICAgY292ZXIgMgogICAgLQogICAgYnVyeSA4CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDEyCiAgICAvLyBpZiAoZmVlID4gMCkgewogICAgYnogc3Rha2VfYWZ0ZXJfaWZfZWxzZUAyMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQxMwogICAgLy8gdGhpcy5wbGF0Zm9ybV9mZWVzX2FjY3J1ZWQudmFsdWUgPSBuZXcgVWludDY0KHRoaXMucGxhdGZvcm1fZmVlc19hY2NydWVkLnZhbHVlLmFzVWludDY0KCkgKyBmZWUpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MgogICAgLy8gcGxhdGZvcm1fZmVlc19hY2NydWVkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMiAvLyAicGxhdGZvcm1fZmVlc19hY2NydWVkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQxMwogICAgLy8gdGhpcy5wbGF0Zm9ybV9mZWVzX2FjY3J1ZWQudmFsdWUgPSBuZXcgVWludDY0KHRoaXMucGxhdGZvcm1fZmVlc19hY2NydWVkLnZhbHVlLmFzVWludDY0KCkgKyBmZWUpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIGRpZyA4CiAgICArCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTIKICAgIC8vIHBsYXRmb3JtX2ZlZXNfYWNjcnVlZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjXzIgLy8gInBsYXRmb3JtX2ZlZXNfYWNjcnVlZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MTMKICAgIC8vIHRoaXMucGxhdGZvcm1fZmVlc19hY2NydWVkLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLnBsYXRmb3JtX2ZlZXNfYWNjcnVlZC52YWx1ZS5hc1VpbnQ2NCgpICsgZmVlKTsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CgpzdGFrZV9hZnRlcl9pZl9lbHNlQDIwOgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQxNQogICAgLy8gdGhpcy5yZXdhcmRzX3BhaWQudmFsdWUgPSBuZXcgVWludDY0KHRoaXMucmV3YXJkc19wYWlkLnZhbHVlLmFzVWludDY0KCkgKyBwZW5kaW5nKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDIKICAgIC8vIHJld2FyZHNfcGFpZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjXzEgLy8gInJld2FyZHNfcGFpZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MTUKICAgIC8vIHRoaXMucmV3YXJkc19wYWlkLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLnJld2FyZHNfcGFpZC52YWx1ZS5hc1VpbnQ2NCgpICsgcGVuZGluZyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgZGlnIDUKICAgICsKICAgIGl0b2IKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MgogICAgLy8gcmV3YXJkc19wYWlkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMSAvLyAicmV3YXJkc19wYWlkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQxNQogICAgLy8gdGhpcy5yZXdhcmRzX3BhaWQudmFsdWUgPSBuZXcgVWludDY0KHRoaXMucmV3YXJkc19wYWlkLnZhbHVlLmFzVWludDY0KCkgKyBwZW5kaW5nKTsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDE2LTQyNAogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgeGZlckFzc2V0OiB0aGlzLnJld2FyZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IG9wLlR4bi5zZW5kZXIsCiAgICAvLyAgICAgc2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICBhc3NldEFtb3VudDogbmV0LAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQxOAogICAgLy8geGZlckFzc2V0OiB0aGlzLnJld2FyZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyOQogICAgLy8gcmV3YXJkX2Fzc2V0X2lkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgNiAvLyAicmV3YXJkX2Fzc2V0X2lkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQxOAogICAgLy8geGZlckFzc2V0OiB0aGlzLnJld2FyZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MTkKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IG9wLlR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDIwCiAgICAvLyBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIGRpZyA5CiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFNlbmRlcgogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQxNi00MjMKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIHhmZXJBc3NldDogdGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBvcC5UeG4uc2VuZGVyLAogICAgLy8gICAgIHNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IG5ldCwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBpbnRjXzMgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQyMgogICAgLy8gZmVlOiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDE2LTQyNAogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgeGZlckFzc2V0OiB0aGlzLnJld2FyZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IG9wLlR4bi5zZW5kZXIsCiAgICAvLyAgICAgc2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICBhc3NldEFtb3VudDogbmV0LAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKCnN0YWtlX2FmdGVyX2lmX2Vsc2VAMjI6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDI3CiAgICAvLyBjb25zdCBuZXdTdGFrZTogdWludDY0ID0gcHJldlN0YWtlICsgcXVhbnRpdHk7CiAgICBkaWcgMgogICAgZGlnIDIKICAgIGR1cAogICAgY292ZXIgMgogICAgKwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQyOAogICAgLy8gdGhpcy50b3RhbF9zdGFrZWQudmFsdWUgPSBuZXcgVWludDY0KHRoaXMudG90YWxfc3Rha2VkLnZhbHVlLmFzVWludDY0KCkgKyBxdWFudGl0eSk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMxCiAgICAvLyB0b3RhbF9zdGFrZWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlY18zIC8vICJ0b3RhbF9zdGFrZWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDI4CiAgICAvLyB0aGlzLnRvdGFsX3N0YWtlZC52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy50b3RhbF9zdGFrZWQudmFsdWUuYXNVaW50NjQoKSArIHF1YW50aXR5KTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICB1bmNvdmVyIDIKICAgICsKICAgIGl0b2IKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMQogICAgLy8gdG90YWxfc3Rha2VkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMyAvLyAidG90YWxfc3Rha2VkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQyOAogICAgLy8gdGhpcy50b3RhbF9zdGFrZWQudmFsdWUgPSBuZXcgVWludDY0KHRoaXMudG90YWxfc3Rha2VkLnZhbHVlLmFzVWludDY0KCkgKyBxdWFudGl0eSk7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQzMAogICAgLy8gY29uc3QgbmV3RGVidCA9IG11bERpdlcobmV3U3Rha2UsIHRoaXMucmV3YXJkX3Blcl90b2tlbi52YWx1ZS5hc1VpbnQ2NCgpLCBQUkVDSVNJT04pOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMgogICAgLy8gcmV3YXJkX3Blcl90b2tlbiA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDkgLy8gInJld2FyZF9wZXJfdG9rZW4iCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDMwCiAgICAvLyBjb25zdCBuZXdEZWJ0ID0gbXVsRGl2VyhuZXdTdGFrZSwgdGhpcy5yZXdhcmRfcGVyX3Rva2VuLnZhbHVlLmFzVWludDY0KCksIFBSRUNJU0lPTik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvY29uZmlnLmFsZ28udHM6MjgKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhhLCBiKTsKICAgIGRpZyAxCiAgICBtdWx3CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDMwCiAgICAvLyBjb25zdCBuZXdEZWJ0ID0gbXVsRGl2VyhuZXdTdGFrZSwgdGhpcy5yZXdhcmRfcGVyX3Rva2VuLnZhbHVlLmFzVWludDY0KCksIFBSRUNJU0lPTik7CiAgICBpbnRjIDQgLy8gMTAwMDAwMDAwMDAwMDAwMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvY29uZmlnLmFsZ28udHM6MjkKICAgIC8vIHJldHVybiBkaXZ3KGhpLCBsbywgYyk7CiAgICBkaXZ3CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDMyCiAgICAvLyBzdGFrZTogbmV3IFVpbnQ2NChuZXdTdGFrZSksCiAgICBzd2FwCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDMzCiAgICAvLyByZXdhcmREZWJ0OiBuZXcgVWludDY0KG5ld0RlYnQpLAogICAgc3dhcAogICAgaXRvYgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQzMS00MzQKICAgIC8vIHRoaXMuc3Rha2VycyhvcC5UeG4uc2VuZGVyKS52YWx1ZSA9IG5ldyBTdGFrZUluZm9SZWNvcmQoewogICAgLy8gICBzdGFrZTogbmV3IFVpbnQ2NChuZXdTdGFrZSksCiAgICAvLyAgIHJld2FyZERlYnQ6IG5ldyBVaW50NjQobmV3RGVidCksCiAgICAvLyB9KTsKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI2CiAgICAvLyBzdGFrZXJzID0gQm94TWFwPEFjY291bnQsIFN0YWtlSW5mb1JlY29yZD4oeyBrZXlQcmVmaXg6ICJzdCIgfSk7CiAgICBieXRlYyA0IC8vICJzdCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MzEKICAgIC8vIHRoaXMuc3Rha2VycyhvcC5UeG4uc2VuZGVyKS52YWx1ZSA9IG5ldyBTdGFrZUluZm9SZWNvcmQoewogICAgdHhuIFNlbmRlcgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI2CiAgICAvLyBzdGFrZXJzID0gQm94TWFwPEFjY291bnQsIFN0YWtlSW5mb1JlY29yZD4oeyBrZXlQcmVmaXg6ICJzdCIgfSk7CiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MzEtNDM0CiAgICAvLyB0aGlzLnN0YWtlcnMob3AuVHhuLnNlbmRlcikudmFsdWUgPSBuZXcgU3Rha2VJbmZvUmVjb3JkKHsKICAgIC8vICAgc3Rha2U6IG5ldyBVaW50NjQobmV3U3Rha2UpLAogICAgLy8gICByZXdhcmREZWJ0OiBuZXcgVWludDY0KG5ld0RlYnQpLAogICAgLy8gfSk7CiAgICBzd2FwCiAgICBib3hfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDM2CiAgICAvLyBpZiAoIWV4aXN0cykgewogICAgZHVwCiAgICBibnogc3Rha2VfYWZ0ZXJfaWZfZWxzZUAyNAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQzNwogICAgLy8gdGhpcy5udW1fc3Rha2Vycy52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy5udW1fc3Rha2Vycy52YWx1ZS5hc1VpbnQ2NCgpICsgMSk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ3CiAgICAvLyBudW1fc3Rha2VycyA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDEwIC8vICJudW1fc3Rha2VycyIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MzcKICAgIC8vIHRoaXMubnVtX3N0YWtlcnMudmFsdWUgPSBuZXcgVWludDY0KHRoaXMubnVtX3N0YWtlcnMudmFsdWUuYXNVaW50NjQoKSArIDEpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIGludGNfMSAvLyAxCiAgICArCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDcKICAgIC8vIG51bV9zdGFrZXJzID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTAgLy8gIm51bV9zdGFrZXJzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQzNwogICAgLy8gdGhpcy5udW1fc3Rha2Vycy52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy5udW1fc3Rha2Vycy52YWx1ZS5hc1VpbnQ2NCgpICsgMSk7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAoKc3Rha2VfYWZ0ZXJfaWZfZWxzZUAyNDoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNjYKICAgIC8vIEBhYmltZXRob2QoeyBhbGxvd0FjdGlvbnM6ICJOb09wIiB9KQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKc3Rha2VfdGVybmFyeV9mYWxzZUAxMjoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MDAKICAgIC8vIGxldCBwZW5kaW5nOiB1aW50NjQgPSBhY2NydWVkID4gcHJldkRlYnQgPyBhY2NydWVkIC0gcHJldkRlYnQgOiAwOwogICAgaW50Y18wIC8vIDAKICAgIGJ1cnkgNQogICAgYiBzdGFrZV90ZXJuYXJ5X21lcmdlQDEzCgpzdGFrZV90ZXJuYXJ5X2ZhbHNlQDk6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6Mzk4CiAgICAvLyBjb25zdCBwcmV2RGVidDogdWludDY0ID0gZXhpc3RzID8gdGhpcy5zdGFrZXJzKG9wLlR4bi5zZW5kZXIpLnZhbHVlLnJld2FyZERlYnQuYXNVaW50NjQoKSA6IDA7CiAgICBpbnRjXzAgLy8gMAogICAgYnVyeSA0CiAgICBiIHN0YWtlX3Rlcm5hcnlfbWVyZ2VAMTAKCnN0YWtlX3Rlcm5hcnlfZmFsc2VANjoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozOTcKICAgIC8vIGNvbnN0IHByZXZTdGFrZTogdWludDY0ID0gZXhpc3RzID8gdGhpcy5zdGFrZXJzKG9wLlR4bi5zZW5kZXIpLnZhbHVlLnN0YWtlLmFzVWludDY0KCkgOiAwOwogICAgaW50Y18wIC8vIDAKICAgIGJ1cnkgMwogICAgYiBzdGFrZV90ZXJuYXJ5X21lcmdlQDcKCgovLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6OlN0YWtpbmcuY2xhaW1SZXdhcmRzW3JvdXRpbmddKCkgLT4gdm9pZDoKY2xhaW1SZXdhcmRzOgogICAgcHVzaGJ5dGVzICIiCiAgICBkdXBuIDMKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNgogICAgLy8gc3Rha2VycyA9IEJveE1hcDxBY2NvdW50LCBTdGFrZUluZm9SZWNvcmQ+KHsga2V5UHJlZml4OiAic3QiIH0pOwogICAgYnl0ZWMgNCAvLyAic3QiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDQzCiAgICAvLyBhc3NlcnQodGhpcy5zdGFrZXJzKG9wLlR4bi5zZW5kZXIpLmV4aXN0cywgIk5vIHN0YWtlIGZvdW5kIGZvciB1c2VyIik7CiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjYKICAgIC8vIHN0YWtlcnMgPSBCb3hNYXA8QWNjb3VudCwgU3Rha2VJbmZvUmVjb3JkPih7IGtleVByZWZpeDogInN0IiB9KTsKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ0MwogICAgLy8gYXNzZXJ0KHRoaXMuc3Rha2VycyhvcC5UeG4uc2VuZGVyKS5leGlzdHMsICJObyBzdGFrZSBmb3VuZCBmb3IgdXNlciIpOwogICAgYm94X2xlbgogICAgYnVyeSAxCiAgICBhc3NlcnQgLy8gTm8gc3Rha2UgZm91bmQgZm9yIHVzZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NDQKICAgIC8vIGFzc2VydCh0aGlzLmNvbnRyYWN0X3N0YXRlLnZhbHVlLmFzVWludDY0KCkgPT09IDEsICJQb29sIGlzIGluYWN0aXZlIik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ5CiAgICAvLyBjb250cmFjdF9zdGF0ZSA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsgLy8gMCA9IGluYWN0aXZlLCAxID0gYWN0aXZlCiAgICBieXRlYyA4IC8vICJjb250cmFjdF9zdGF0ZSIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NDQKICAgIC8vIGFzc2VydCh0aGlzLmNvbnRyYWN0X3N0YXRlLnZhbHVlLmFzVWludDY0KCkgPT09IDEsICJQb29sIGlzIGluYWN0aXZlIik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgaW50Y18xIC8vIDEKICAgID09CiAgICBhc3NlcnQgLy8gUG9vbCBpcyBpbmFjdGl2ZQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI2CiAgICAvLyBzdGFrZXJzID0gQm94TWFwPEFjY291bnQsIFN0YWtlSW5mb1JlY29yZD4oeyBrZXlQcmVmaXg6ICJzdCIgfSk7CiAgICBieXRlYyA0IC8vICJzdCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NDUKICAgIC8vIGNvbnN0IHN0YWtlciA9IGNsb25lKHRoaXMuc3Rha2VycyhvcC5UeG4uc2VuZGVyKS52YWx1ZSk7CiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjYKICAgIC8vIHN0YWtlcnMgPSBCb3hNYXA8QWNjb3VudCwgU3Rha2VJbmZvUmVjb3JkPih7IGtleVByZWZpeDogInN0IiB9KTsKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ0NQogICAgLy8gY29uc3Qgc3Rha2VyID0gY2xvbmUodGhpcy5zdGFrZXJzKG9wLlR4bi5zZW5kZXIpLnZhbHVlKTsKICAgIGJveF9nZXQKICAgIGFzc2VydCAvLyBCb3ggbXVzdCBoYXZlIHZhbHVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDQ2CiAgICAvLyBhc3NlcnQoc3Rha2VyLnN0YWtlLmFzVWludDY0KCkgPiAwLCAiTm8gc3Rha2UiKTsKICAgIGR1cAogICAgZXh0cmFjdCAwIDgKICAgIHN3YXAKICAgIGR1cAogICAgaW50Y18wIC8vIDAKICAgIGV4dHJhY3RfdWludDY0CiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGR1cAogICAgYXNzZXJ0IC8vIE5vIHN0YWtlCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDQ4CiAgICAvLyB0aGlzLnVwZGF0ZVBvb2woKTsKICAgIGNhbGxzdWIgdXBkYXRlUG9vbAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ1MAogICAgLy8gY29uc3QgYWNjcnVlZCA9IG11bERpdlcoc3Rha2VyLnN0YWtlLmFzVWludDY0KCksIHRoaXMucmV3YXJkX3Blcl90b2tlbi52YWx1ZS5hc1VpbnQ2NCgpLCBQUkVDSVNJT04pOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMgogICAgLy8gcmV3YXJkX3Blcl90b2tlbiA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDkgLy8gInJld2FyZF9wZXJfdG9rZW4iCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDUwCiAgICAvLyBjb25zdCBhY2NydWVkID0gbXVsRGl2VyhzdGFrZXIuc3Rha2UuYXNVaW50NjQoKSwgdGhpcy5yZXdhcmRfcGVyX3Rva2VuLnZhbHVlLmFzVWludDY0KCksIFBSRUNJU0lPTik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvY29uZmlnLmFsZ28udHM6MjgKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhhLCBiKTsKICAgIG11bHcKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NTAKICAgIC8vIGNvbnN0IGFjY3J1ZWQgPSBtdWxEaXZXKHN0YWtlci5zdGFrZS5hc1VpbnQ2NCgpLCB0aGlzLnJld2FyZF9wZXJfdG9rZW4udmFsdWUuYXNVaW50NjQoKSwgUFJFQ0lTSU9OKTsKICAgIGludGMgNCAvLyAxMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9jb25maWcuYWxnby50czoyOQogICAgLy8gcmV0dXJuIGRpdncoaGksIGxvLCBjKTsKICAgIGRpdncKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDUxCiAgICAvLyBsZXQgcGVuZGluZzogdWludDY0ID0gYWNjcnVlZCA+IHN0YWtlci5yZXdhcmREZWJ0LmFzVWludDY0KCkgPyBhY2NydWVkIC0gc3Rha2VyLnJld2FyZERlYnQuYXNVaW50NjQoKSA6IDA7CiAgICBpbnRjXzIgLy8gOAogICAgZXh0cmFjdF91aW50NjQKICAgIGR1cAogICAgY292ZXIgMgogICAgPgogICAgYnogY2xhaW1SZXdhcmRzX3Rlcm5hcnlfZmFsc2VAMwogICAgZHVwMgogICAgLQogICAgYnVyeSA1CgpjbGFpbVJld2FyZHNfdGVybmFyeV9tZXJnZUA0OgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ1MgogICAgLy8gY29uc3QgcGF5YWJsZTogdWludDY0ID0gdGhpcy5hY2NydWVkX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKSAtIHRoaXMucmV3YXJkc19wYWlkLnZhbHVlLmFzVWludDY0KCk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM5CiAgICAvLyBhY2NydWVkX3Jld2FyZHMgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyA3IC8vICJhY2NydWVkX3Jld2FyZHMiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDUyCiAgICAvLyBjb25zdCBwYXlhYmxlOiB1aW50NjQgPSB0aGlzLmFjY3J1ZWRfcmV3YXJkcy52YWx1ZS5hc1VpbnQ2NCgpIC0gdGhpcy5yZXdhcmRzX3BhaWQudmFsdWUuYXNVaW50NjQoKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQyCiAgICAvLyByZXdhcmRzX3BhaWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlY18xIC8vICJyZXdhcmRzX3BhaWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDUyCiAgICAvLyBjb25zdCBwYXlhYmxlOiB1aW50NjQgPSB0aGlzLmFjY3J1ZWRfcmV3YXJkcy52YWx1ZS5hc1VpbnQ2NCgpIC0gdGhpcy5yZXdhcmRzX3BhaWQudmFsdWUuYXNVaW50NjQoKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICAtCiAgICBkdXAKICAgIGJ1cnkgNwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ1MwogICAgLy8gaWYgKHBlbmRpbmcgPiBwYXlhYmxlKSB7CiAgICBkaWcgNQogICAgPAogICAgYnogY2xhaW1SZXdhcmRzX2FmdGVyX2lmX2Vsc2VANgogICAgZGlnIDUKICAgIGJ1cnkgNQoKY2xhaW1SZXdhcmRzX2FmdGVyX2lmX2Vsc2VANjoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NTcKICAgIC8vIGlmIChwZW5kaW5nID4gMCkgewogICAgZGlnIDQKICAgIGJ6IGNsYWltUmV3YXJkc19hZnRlcl9pZl9lbHNlQDEzCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDU4CiAgICAvLyBsZXQgZmVlOiB1aW50NjQgPSBtdWxEaXZXKHBlbmRpbmcsIHRoaXMucGxhdGZvcm1fZmVlX2Jwcy52YWx1ZS5hc1VpbnQ2NCgpLCAxMF8wMDApOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MQogICAgLy8gcGxhdGZvcm1fZmVlX2JwcyA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDE1IC8vICJwbGF0Zm9ybV9mZWVfYnBzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ1OAogICAgLy8gbGV0IGZlZTogdWludDY0ID0gbXVsRGl2VyhwZW5kaW5nLCB0aGlzLnBsYXRmb3JtX2ZlZV9icHMudmFsdWUuYXNVaW50NjQoKSwgMTBfMDAwKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9jb25maWcuYWxnby50czoyOAogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KGEsIGIpOwogICAgZGlnIDUKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICBtdWx3CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDU4CiAgICAvLyBsZXQgZmVlOiB1aW50NjQgPSBtdWxEaXZXKHBlbmRpbmcsIHRoaXMucGxhdGZvcm1fZmVlX2Jwcy52YWx1ZS5hc1VpbnQ2NCgpLCAxMF8wMDApOwogICAgaW50YyA1IC8vIDEwMDAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9jb25maWcuYWxnby50czoyOQogICAgLy8gcmV0dXJuIGRpdncoaGksIGxvLCBjKTsKICAgIGRpdncKICAgIGR1cAogICAgYnVyeSAxMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ1OQogICAgLy8gaWYgKGZlZSA+IHBlbmRpbmcpIHsKICAgIDwKICAgIGJ6IGNsYWltUmV3YXJkc19hZnRlcl9pZl9lbHNlQDkKICAgIGRpZyA0CiAgICBidXJ5IDgKCmNsYWltUmV3YXJkc19hZnRlcl9pZl9lbHNlQDk6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDYyCiAgICAvLyBjb25zdCBuZXQ6IHVpbnQ2NCA9IHBlbmRpbmcgLSBmZWU7CiAgICBkaWcgNAogICAgZGlnIDgKICAgIGR1cAogICAgY292ZXIgMgogICAgLQogICAgYnVyeSA4CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDYzCiAgICAvLyBpZiAoZmVlID4gMCkgewogICAgYnogY2xhaW1SZXdhcmRzX2FmdGVyX2lmX2Vsc2VAMTEKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NjQKICAgIC8vIHRoaXMucGxhdGZvcm1fZmVlc19hY2NydWVkLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLnBsYXRmb3JtX2ZlZXNfYWNjcnVlZC52YWx1ZS5hc1VpbnQ2NCgpICsgZmVlKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTIKICAgIC8vIHBsYXRmb3JtX2ZlZXNfYWNjcnVlZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjXzIgLy8gInBsYXRmb3JtX2ZlZXNfYWNjcnVlZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NjQKICAgIC8vIHRoaXMucGxhdGZvcm1fZmVlc19hY2NydWVkLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLnBsYXRmb3JtX2ZlZXNfYWNjcnVlZC52YWx1ZS5hc1VpbnQ2NCgpICsgZmVlKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICBkaWcgOAogICAgKwogICAgaXRvYgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjUyCiAgICAvLyBwbGF0Zm9ybV9mZWVzX2FjY3J1ZWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlY18yIC8vICJwbGF0Zm9ybV9mZWVzX2FjY3J1ZWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDY0CiAgICAvLyB0aGlzLnBsYXRmb3JtX2ZlZXNfYWNjcnVlZC52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy5wbGF0Zm9ybV9mZWVzX2FjY3J1ZWQudmFsdWUuYXNVaW50NjQoKSArIGZlZSk7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAoKY2xhaW1SZXdhcmRzX2FmdGVyX2lmX2Vsc2VAMTE6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDY2CiAgICAvLyB0aGlzLnJld2FyZHNfcGFpZC52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy5yZXdhcmRzX3BhaWQudmFsdWUuYXNVaW50NjQoKSArIHBlbmRpbmcpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MgogICAgLy8gcmV3YXJkc19wYWlkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMSAvLyAicmV3YXJkc19wYWlkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ2NgogICAgLy8gdGhpcy5yZXdhcmRzX3BhaWQudmFsdWUgPSBuZXcgVWludDY0KHRoaXMucmV3YXJkc19wYWlkLnZhbHVlLmFzVWludDY0KCkgKyBwZW5kaW5nKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICBkaWcgNQogICAgKwogICAgaXRvYgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQyCiAgICAvLyByZXdhcmRzX3BhaWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlY18xIC8vICJyZXdhcmRzX3BhaWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDY2CiAgICAvLyB0aGlzLnJld2FyZHNfcGFpZC52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy5yZXdhcmRzX3BhaWQudmFsdWUuYXNVaW50NjQoKSArIHBlbmRpbmcpOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NjctNDc1CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogb3AuVHhuLnNlbmRlciwKICAgIC8vICAgICBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiBuZXQsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDY5CiAgICAvLyB4ZmVyQXNzZXQ6IHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksCiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI5CiAgICAvLyByZXdhcmRfYXNzZXRfaWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyA2IC8vICJyZXdhcmRfYXNzZXRfaWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDY5CiAgICAvLyB4ZmVyQXNzZXQ6IHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ3MAogICAgLy8gYXNzZXRSZWNlaXZlcjogb3AuVHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NzEKICAgIC8vIHNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgZGlnIDkKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgU2VuZGVyCiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDY3LTQ3NAogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgeGZlckFzc2V0OiB0aGlzLnJld2FyZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IG9wLlR4bi5zZW5kZXIsCiAgICAvLyAgICAgc2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICBhc3NldEFtb3VudDogbmV0LAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIGludGNfMyAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDczCiAgICAvLyBmZWU6IDAsCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NjctNDc1CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogb3AuVHhuLnNlbmRlciwKICAgIC8vICAgICBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiBuZXQsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAoKY2xhaW1SZXdhcmRzX2FmdGVyX2lmX2Vsc2VAMTM6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDc4CiAgICAvLyBjb25zdCBuZXdEZWJ0ID0gbXVsRGl2VyhzdGFrZXIuc3Rha2UuYXNVaW50NjQoKSwgdGhpcy5yZXdhcmRfcGVyX3Rva2VuLnZhbHVlLmFzVWludDY0KCksIFBSRUNJU0lPTik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMyCiAgICAvLyByZXdhcmRfcGVyX3Rva2VuID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgOSAvLyAicmV3YXJkX3Blcl90b2tlbiIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NzgKICAgIC8vIGNvbnN0IG5ld0RlYnQgPSBtdWxEaXZXKHN0YWtlci5zdGFrZS5hc1VpbnQ2NCgpLCB0aGlzLnJld2FyZF9wZXJfdG9rZW4udmFsdWUuYXNVaW50NjQoKSwgUFJFQ0lTSU9OKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9jb25maWcuYWxnby50czoyOAogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KGEsIGIpOwogICAgZGlnIDMKICAgIG11bHcKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NzgKICAgIC8vIGNvbnN0IG5ld0RlYnQgPSBtdWxEaXZXKHN0YWtlci5zdGFrZS5hc1VpbnQ2NCgpLCB0aGlzLnJld2FyZF9wZXJfdG9rZW4udmFsdWUuYXNVaW50NjQoKSwgUFJFQ0lTSU9OKTsKICAgIGludGMgNCAvLyAxMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9jb25maWcuYWxnby50czoyOQogICAgLy8gcmV0dXJuIGRpdncoaGksIGxvLCBjKTsKICAgIGRpdncKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0ODEKICAgIC8vIHJld2FyZERlYnQ6IG5ldyBVaW50NjQobmV3RGVidCksCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDc5LTQ4MgogICAgLy8gdGhpcy5zdGFrZXJzKG9wLlR4bi5zZW5kZXIpLnZhbHVlID0gbmV3IFN0YWtlSW5mb1JlY29yZCh7CiAgICAvLyAgIHN0YWtlOiBzdGFrZXIuc3Rha2UsCiAgICAvLyAgIHJld2FyZERlYnQ6IG5ldyBVaW50NjQobmV3RGVidCksCiAgICAvLyB9KTsKICAgIGRpZyA0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNgogICAgLy8gc3Rha2VycyA9IEJveE1hcDxBY2NvdW50LCBTdGFrZUluZm9SZWNvcmQ+KHsga2V5UHJlZml4OiAic3QiIH0pOwogICAgYnl0ZWMgNCAvLyAic3QiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDc5CiAgICAvLyB0aGlzLnN0YWtlcnMob3AuVHhuLnNlbmRlcikudmFsdWUgPSBuZXcgU3Rha2VJbmZvUmVjb3JkKHsKICAgIHR4biBTZW5kZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNgogICAgLy8gc3Rha2VycyA9IEJveE1hcDxBY2NvdW50LCBTdGFrZUluZm9SZWNvcmQ+KHsga2V5UHJlZml4OiAic3QiIH0pOwogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDc5LTQ4MgogICAgLy8gdGhpcy5zdGFrZXJzKG9wLlR4bi5zZW5kZXIpLnZhbHVlID0gbmV3IFN0YWtlSW5mb1JlY29yZCh7CiAgICAvLyAgIHN0YWtlOiBzdGFrZXIuc3Rha2UsCiAgICAvLyAgIHJld2FyZERlYnQ6IG5ldyBVaW50NjQobmV3RGVidCksCiAgICAvLyB9KTsKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NDEKICAgIC8vIEBhYmltZXRob2QoeyBhbGxvd0FjdGlvbnM6ICJOb09wIiB9KQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKY2xhaW1SZXdhcmRzX3Rlcm5hcnlfZmFsc2VAMzoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NTEKICAgIC8vIGxldCBwZW5kaW5nOiB1aW50NjQgPSBhY2NydWVkID4gc3Rha2VyLnJld2FyZERlYnQuYXNVaW50NjQoKSA/IGFjY3J1ZWQgLSBzdGFrZXIucmV3YXJkRGVidC5hc1VpbnQ2NCgpIDogMDsKICAgIGludGNfMCAvLyAwCiAgICBidXJ5IDUKICAgIGIgY2xhaW1SZXdhcmRzX3Rlcm5hcnlfbWVyZ2VANAoKCi8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo6U3Rha2luZy51bnN0YWtlW3JvdXRpbmddKCkgLT4gdm9pZDoKdW5zdGFrZToKICAgIHB1c2hieXRlcyAiIgogICAgZHVwbiA0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDg1CiAgICAvLyBAYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAiTm9PcCIgfSkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNgogICAgLy8gc3Rha2VycyA9IEJveE1hcDxBY2NvdW50LCBTdGFrZUluZm9SZWNvcmQ+KHsga2V5UHJlZml4OiAic3QiIH0pOwogICAgYnl0ZWMgNCAvLyAic3QiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDg3CiAgICAvLyBhc3NlcnQodGhpcy5zdGFrZXJzKG9wLlR4bi5zZW5kZXIpLmV4aXN0cywgIk5vIHN0YWtlIGZvdW5kIGZvciB1c2VyIik7CiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjYKICAgIC8vIHN0YWtlcnMgPSBCb3hNYXA8QWNjb3VudCwgU3Rha2VJbmZvUmVjb3JkPih7IGtleVByZWZpeDogInN0IiB9KTsKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ4NwogICAgLy8gYXNzZXJ0KHRoaXMuc3Rha2VycyhvcC5UeG4uc2VuZGVyKS5leGlzdHMsICJObyBzdGFrZSBmb3VuZCBmb3IgdXNlciIpOwogICAgYm94X2xlbgogICAgYnVyeSAxCiAgICBhc3NlcnQgLy8gTm8gc3Rha2UgZm91bmQgZm9yIHVzZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNgogICAgLy8gc3Rha2VycyA9IEJveE1hcDxBY2NvdW50LCBTdGFrZUluZm9SZWNvcmQ+KHsga2V5UHJlZml4OiAic3QiIH0pOwogICAgYnl0ZWMgNCAvLyAic3QiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDg4CiAgICAvLyBjb25zdCByZWMgPSBjbG9uZSh0aGlzLnN0YWtlcnMob3AuVHhuLnNlbmRlcikudmFsdWUpOwogICAgdHhuIFNlbmRlcgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI2CiAgICAvLyBzdGFrZXJzID0gQm94TWFwPEFjY291bnQsIFN0YWtlSW5mb1JlY29yZD4oeyBrZXlQcmVmaXg6ICJzdCIgfSk7CiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0ODgKICAgIC8vIGNvbnN0IHJlYyA9IGNsb25lKHRoaXMuc3Rha2VycyhvcC5UeG4uc2VuZGVyKS52YWx1ZSk7CiAgICBib3hfZ2V0CiAgICBhc3NlcnQgLy8gQm94IG11c3QgaGF2ZSB2YWx1ZQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ4OQogICAgLy8gY29uc3Qgc3Rha2VOb3c6IHVpbnQ2NCA9IHJlYy5zdGFrZS5hc1VpbnQ2NCgpOwogICAgZHVwCiAgICBpbnRjXzAgLy8gMAogICAgZXh0cmFjdF91aW50NjQKICAgIGR1cAogICAgY292ZXIgMwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ5MAogICAgLy8gYXNzZXJ0KHN0YWtlTm93ID4gMCwgIk5vIHN0YWtlIik7CiAgICBkdXAKICAgIGFzc2VydCAvLyBObyBzdGFrZQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ5MgogICAgLy8gdGhpcy51cGRhdGVQb29sKCk7CiAgICBjYWxsc3ViIHVwZGF0ZVBvb2wKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0OTQKICAgIC8vIGNvbnN0IGFtb3VudFRvV2l0aGRyYXc6IHVpbnQ2NCA9IHF1YW50aXR5ID09PSAwID8gc3Rha2VOb3cgOiBxdWFudGl0eTsKICAgIGRpZyAyCiAgICAhCiAgICB1bmNvdmVyIDMKICAgIGRpZyAyCiAgICB1bmNvdmVyIDIKICAgIHNlbGVjdAogICAgZHVwCiAgICBjb3ZlciAzCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDk1CiAgICAvLyBhc3NlcnQoc3Rha2VOb3cgPj0gYW1vdW50VG9XaXRoZHJhdywgIlVuc3Rha2UgYW1vdW50IGV4Y2VlZHMgYmFsYW5jZSIpOwogICAgZGlnIDEKICAgIDw9CiAgICBhc3NlcnQgLy8gVW5zdGFrZSBhbW91bnQgZXhjZWVkcyBiYWxhbmNlCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDk3CiAgICAvLyBjb25zdCBhY2NydWVkID0gbXVsRGl2VyhzdGFrZU5vdywgdGhpcy5yZXdhcmRfcGVyX3Rva2VuLnZhbHVlLmFzVWludDY0KCksIFBSRUNJU0lPTik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMyCiAgICAvLyByZXdhcmRfcGVyX3Rva2VuID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgOSAvLyAicmV3YXJkX3Blcl90b2tlbiIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0OTcKICAgIC8vIGNvbnN0IGFjY3J1ZWQgPSBtdWxEaXZXKHN0YWtlTm93LCB0aGlzLnJld2FyZF9wZXJfdG9rZW4udmFsdWUuYXNVaW50NjQoKSwgUFJFQ0lTSU9OKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9jb25maWcuYWxnby50czoyOAogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KGEsIGIpOwogICAgbXVsdwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ5NwogICAgLy8gY29uc3QgYWNjcnVlZCA9IG11bERpdlcoc3Rha2VOb3csIHRoaXMucmV3YXJkX3Blcl90b2tlbi52YWx1ZS5hc1VpbnQ2NCgpLCBQUkVDSVNJT04pOwogICAgaW50YyA0IC8vIDEwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL2NvbmZpZy5hbGdvLnRzOjI5CiAgICAvLyByZXR1cm4gZGl2dyhoaSwgbG8sIGMpOwogICAgZGl2dwogICAgZHVwCiAgICB1bmNvdmVyIDIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0OTgKICAgIC8vIGxldCBwZW5kaW5nOiB1aW50NjQgPSBhY2NydWVkID4gcmVjLnJld2FyZERlYnQuYXNVaW50NjQoKSA/IGFjY3J1ZWQgLSByZWMucmV3YXJkRGVidC5hc1VpbnQ2NCgpIDogMDsKICAgIGludGNfMiAvLyA4CiAgICBleHRyYWN0X3VpbnQ2NAogICAgZHVwCiAgICBjb3ZlciAyCiAgICA+CiAgICBieiB1bnN0YWtlX3Rlcm5hcnlfZmFsc2VAMwogICAgZHVwMgogICAgLQogICAgYnVyeSA2Cgp1bnN0YWtlX3Rlcm5hcnlfbWVyZ2VANDoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0OTkKICAgIC8vIGNvbnN0IHBheWFibGU6IHVpbnQ2NCA9IHRoaXMuYWNjcnVlZF9yZXdhcmRzLnZhbHVlLmFzVWludDY0KCkgLSB0aGlzLnJld2FyZHNfcGFpZC52YWx1ZS5hc1VpbnQ2NCgpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozOQogICAgLy8gYWNjcnVlZF9yZXdhcmRzID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgNyAvLyAiYWNjcnVlZF9yZXdhcmRzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ5OQogICAgLy8gY29uc3QgcGF5YWJsZTogdWludDY0ID0gdGhpcy5hY2NydWVkX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKSAtIHRoaXMucmV3YXJkc19wYWlkLnZhbHVlLmFzVWludDY0KCk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MgogICAgLy8gcmV3YXJkc19wYWlkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMSAvLyAicmV3YXJkc19wYWlkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ5OQogICAgLy8gY29uc3QgcGF5YWJsZTogdWludDY0ID0gdGhpcy5hY2NydWVkX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKSAtIHRoaXMucmV3YXJkc19wYWlkLnZhbHVlLmFzVWludDY0KCk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgLQogICAgZHVwCiAgICBidXJ5IDgKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MDAKICAgIC8vIGlmIChwZW5kaW5nID4gcGF5YWJsZSkgewogICAgZGlnIDYKICAgIDwKICAgIGJ6IHVuc3Rha2VfYWZ0ZXJfaWZfZWxzZUA2CiAgICBkaWcgNgogICAgYnVyeSA2Cgp1bnN0YWtlX2FmdGVyX2lmX2Vsc2VANjoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MDQKICAgIC8vIGlmIChwZW5kaW5nID4gMCkgewogICAgZGlnIDUKICAgIGJ6IHVuc3Rha2VfYWZ0ZXJfaWZfZWxzZUAxMwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjUwNQogICAgLy8gbGV0IGZlZTogdWludDY0ID0gbXVsRGl2VyhwZW5kaW5nLCB0aGlzLnBsYXRmb3JtX2ZlZV9icHMudmFsdWUuYXNVaW50NjQoKSwgMTBfMDAwKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTEKICAgIC8vIHBsYXRmb3JtX2ZlZV9icHMgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxNSAvLyAicGxhdGZvcm1fZmVlX2JwcyIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MDUKICAgIC8vIGxldCBmZWU6IHVpbnQ2NCA9IG11bERpdlcocGVuZGluZywgdGhpcy5wbGF0Zm9ybV9mZWVfYnBzLnZhbHVlLmFzVWludDY0KCksIDEwXzAwMCk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvY29uZmlnLmFsZ28udHM6MjgKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhhLCBiKTsKICAgIGRpZyA2CiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgbXVsdwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjUwNQogICAgLy8gbGV0IGZlZTogdWludDY0ID0gbXVsRGl2VyhwZW5kaW5nLCB0aGlzLnBsYXRmb3JtX2ZlZV9icHMudmFsdWUuYXNVaW50NjQoKSwgMTBfMDAwKTsKICAgIGludGMgNSAvLyAxMDAwMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvY29uZmlnLmFsZ28udHM6MjkKICAgIC8vIHJldHVybiBkaXZ3KGhpLCBsbywgYyk7CiAgICBkaXZ3CiAgICBkdXAKICAgIGJ1cnkgMTEKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MDYKICAgIC8vIGlmIChmZWUgPiBwZW5kaW5nKSB7CiAgICA8CiAgICBieiB1bnN0YWtlX2FmdGVyX2lmX2Vsc2VAOQogICAgZGlnIDUKICAgIGJ1cnkgOQoKdW5zdGFrZV9hZnRlcl9pZl9lbHNlQDk6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTA5CiAgICAvLyBjb25zdCBuZXQ6IHVpbnQ2NCA9IHBlbmRpbmcgLSBmZWU7CiAgICBkaWcgNQogICAgZGlnIDkKICAgIGR1cAogICAgY292ZXIgMgogICAgLQogICAgYnVyeSA5CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTEwCiAgICAvLyBpZiAoZmVlID4gMCkgewogICAgYnogdW5zdGFrZV9hZnRlcl9pZl9lbHNlQDExCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTExCiAgICAvLyB0aGlzLnBsYXRmb3JtX2ZlZXNfYWNjcnVlZC52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy5wbGF0Zm9ybV9mZWVzX2FjY3J1ZWQudmFsdWUuYXNVaW50NjQoKSArIGZlZSk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjUyCiAgICAvLyBwbGF0Zm9ybV9mZWVzX2FjY3J1ZWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlY18yIC8vICJwbGF0Zm9ybV9mZWVzX2FjY3J1ZWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTExCiAgICAvLyB0aGlzLnBsYXRmb3JtX2ZlZXNfYWNjcnVlZC52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy5wbGF0Zm9ybV9mZWVzX2FjY3J1ZWQudmFsdWUuYXNVaW50NjQoKSArIGZlZSk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgZGlnIDkKICAgICsKICAgIGl0b2IKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MgogICAgLy8gcGxhdGZvcm1fZmVlc19hY2NydWVkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMiAvLyAicGxhdGZvcm1fZmVlc19hY2NydWVkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjUxMQogICAgLy8gdGhpcy5wbGF0Zm9ybV9mZWVzX2FjY3J1ZWQudmFsdWUgPSBuZXcgVWludDY0KHRoaXMucGxhdGZvcm1fZmVlc19hY2NydWVkLnZhbHVlLmFzVWludDY0KCkgKyBmZWUpOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKCnVuc3Rha2VfYWZ0ZXJfaWZfZWxzZUAxMToKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MTMKICAgIC8vIHRoaXMucmV3YXJkc19wYWlkLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLnJld2FyZHNfcGFpZC52YWx1ZS5hc1VpbnQ2NCgpICsgcGVuZGluZyk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQyCiAgICAvLyByZXdhcmRzX3BhaWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlY18xIC8vICJyZXdhcmRzX3BhaWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTEzCiAgICAvLyB0aGlzLnJld2FyZHNfcGFpZC52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy5yZXdhcmRzX3BhaWQudmFsdWUuYXNVaW50NjQoKSArIHBlbmRpbmcpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIGRpZyA2CiAgICArCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDIKICAgIC8vIHJld2FyZHNfcGFpZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjXzEgLy8gInJld2FyZHNfcGFpZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MTMKICAgIC8vIHRoaXMucmV3YXJkc19wYWlkLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLnJld2FyZHNfcGFpZC52YWx1ZS5hc1VpbnQ2NCgpICsgcGVuZGluZyk7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjUxNC01MjIKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIHhmZXJBc3NldDogdGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBvcC5UeG4uc2VuZGVyLAogICAgLy8gICAgIHNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IG5ldCwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MTYKICAgIC8vIHhmZXJBc3NldDogdGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjkKICAgIC8vIHJld2FyZF9hc3NldF9pZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDYgLy8gInJld2FyZF9hc3NldF9pZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MTYKICAgIC8vIHhmZXJBc3NldDogdGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTE3CiAgICAvLyBhc3NldFJlY2VpdmVyOiBvcC5UeG4uc2VuZGVyLAogICAgdHhuIFNlbmRlcgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjUxOAogICAgLy8gc2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICBkaWcgMTAKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgU2VuZGVyCiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTE0LTUyMQogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgeGZlckFzc2V0OiB0aGlzLnJld2FyZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IG9wLlR4bi5zZW5kZXIsCiAgICAvLyAgICAgc2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICBhc3NldEFtb3VudDogbmV0LAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIGludGNfMyAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTIwCiAgICAvLyBmZWU6IDAsCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MTQtNTIyCiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogb3AuVHhuLnNlbmRlciwKICAgIC8vICAgICBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiBuZXQsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAoKdW5zdGFrZV9hZnRlcl9pZl9lbHNlQDEzOgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjUyNS01MzMKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIHhmZXJBc3NldDogdGhpcy5zdGFrZWRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBvcC5UeG4uc2VuZGVyLAogICAgLy8gICAgIHNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IGFtb3VudFRvV2l0aGRyYXcsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTI3CiAgICAvLyB4ZmVyQXNzZXQ6IHRoaXMuc3Rha2VkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksCiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI4CiAgICAvLyBzdGFrZWRfYXNzZXRfaWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxNiAvLyAic3Rha2VkX2Fzc2V0X2lkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjUyNwogICAgLy8geGZlckFzc2V0OiB0aGlzLnN0YWtlZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MjgKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IG9wLlR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTI5CiAgICAvLyBzZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIGRpZyA1CiAgICBkdXAKICAgIGNvdmVyIDQKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgU2VuZGVyCiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTI1LTUzMgogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgeGZlckFzc2V0OiB0aGlzLnN0YWtlZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IG9wLlR4bi5zZW5kZXIsCiAgICAvLyAgICAgc2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICBhc3NldEFtb3VudDogYW1vdW50VG9XaXRoZHJhdywKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBpbnRjXzMgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjUzMQogICAgLy8gZmVlOiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTI1LTUzMwogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgeGZlckFzc2V0OiB0aGlzLnN0YWtlZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IG9wLlR4bi5zZW5kZXIsCiAgICAvLyAgICAgc2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICBhc3NldEFtb3VudDogYW1vdW50VG9XaXRoZHJhdywKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTM1CiAgICAvLyB0aGlzLnRvdGFsX3N0YWtlZC52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy50b3RhbF9zdGFrZWQudmFsdWUuYXNVaW50NjQoKSAtIGFtb3VudFRvV2l0aGRyYXcpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMQogICAgLy8gdG90YWxfc3Rha2VkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMyAvLyAidG90YWxfc3Rha2VkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjUzNQogICAgLy8gdGhpcy50b3RhbF9zdGFrZWQudmFsdWUgPSBuZXcgVWludDY0KHRoaXMudG90YWxfc3Rha2VkLnZhbHVlLmFzVWludDY0KCkgLSBhbW91bnRUb1dpdGhkcmF3KTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICBkaWcgMQogICAgLQogICAgaXRvYgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMxCiAgICAvLyB0b3RhbF9zdGFrZWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlY18zIC8vICJ0b3RhbF9zdGFrZWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTM1CiAgICAvLyB0aGlzLnRvdGFsX3N0YWtlZC52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy50b3RhbF9zdGFrZWQudmFsdWUuYXNVaW50NjQoKSAtIGFtb3VudFRvV2l0aGRyYXcpOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1MzcKICAgIC8vIGNvbnN0IHJlbWFpbmluZzogdWludDY0ID0gc3Rha2VOb3cgLSBhbW91bnRUb1dpdGhkcmF3OwogICAgZGlnIDQKICAgIHN3YXAKICAgIC0KICAgIGR1cAogICAgYnVyeSA2CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTM4CiAgICAvLyBpZiAocmVtYWluaW5nID09PSAwKSB7CiAgICBibnogdW5zdGFrZV9lbHNlX2JvZHlAMTcKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNgogICAgLy8gc3Rha2VycyA9IEJveE1hcDxBY2NvdW50LCBTdGFrZUluZm9SZWNvcmQ+KHsga2V5UHJlZml4OiAic3QiIH0pOwogICAgYnl0ZWMgNCAvLyAic3QiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTM5CiAgICAvLyB0aGlzLnN0YWtlcnMob3AuVHhuLnNlbmRlcikuZGVsZXRlKCk7CiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MjYKICAgIC8vIHN0YWtlcnMgPSBCb3hNYXA8QWNjb3VudCwgU3Rha2VJbmZvUmVjb3JkPih7IGtleVByZWZpeDogInN0IiB9KTsKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjUzOQogICAgLy8gdGhpcy5zdGFrZXJzKG9wLlR4bi5zZW5kZXIpLmRlbGV0ZSgpOwogICAgYm94X2RlbAogICAgcG9wCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTQwCiAgICAvLyB0aGlzLm51bV9zdGFrZXJzLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLm51bV9zdGFrZXJzLnZhbHVlLmFzVWludDY0KCkgLSAxKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDcKICAgIC8vIG51bV9zdGFrZXJzID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTAgLy8gIm51bV9zdGFrZXJzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU0MAogICAgLy8gdGhpcy5udW1fc3Rha2Vycy52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy5udW1fc3Rha2Vycy52YWx1ZS5hc1VpbnQ2NCgpIC0gMSk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgaW50Y18xIC8vIDEKICAgIC0KICAgIGl0b2IKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0NwogICAgLy8gbnVtX3N0YWtlcnMgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxMCAvLyAibnVtX3N0YWtlcnMiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTQwCiAgICAvLyB0aGlzLm51bV9zdGFrZXJzLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLm51bV9zdGFrZXJzLnZhbHVlLmFzVWludDY0KCkgLSAxKTsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTQxLTU0OAogICAgLy8gaXR4bgogICAgLy8gICAucGF5bWVudCh7CiAgICAvLyAgICAgcmVjZWl2ZXI6IG9wLlR4bi5zZW5kZXIsCiAgICAvLyAgICAgYW1vdW50OiBCT1hfRkVFLAogICAgLy8gICAgIHNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTQzCiAgICAvLyByZWNlaXZlcjogb3AuVHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NDUKICAgIC8vIHNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgaXR4bl9maWVsZCBTZW5kZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NDQKICAgIC8vIGFtb3VudDogQk9YX0ZFRSwKICAgIGludGMgNiAvLyAyMjUwMAogICAgaXR4bl9maWVsZCBBbW91bnQKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NDEtNTQ3CiAgICAvLyBpdHhuCiAgICAvLyAgIC5wYXltZW50KHsKICAgIC8vICAgICByZWNlaXZlcjogb3AuVHhuLnNlbmRlciwKICAgIC8vICAgICBhbW91bnQ6IEJPWF9GRUUsCiAgICAvLyAgICAgc2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBpbnRjXzEgLy8gMQogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU0NgogICAgLy8gZmVlOiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTQxLTU0OAogICAgLy8gaXR4bgogICAgLy8gICAucGF5bWVudCh7CiAgICAvLyAgICAgcmVjZWl2ZXI6IG9wLlR4bi5zZW5kZXIsCiAgICAvLyAgICAgYW1vdW50OiBCT1hfRkVFLAogICAgLy8gICAgIHNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAoKdW5zdGFrZV9hZnRlcl9pZl9lbHNlQDE4OgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ4NQogICAgLy8gQGFiaW1ldGhvZCh7IGFsbG93QWN0aW9uczogIk5vT3AiIH0pCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgp1bnN0YWtlX2Vsc2VfYm9keUAxNzoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NTAKICAgIC8vIGNvbnN0IG5ld0RlYnQgPSBtdWxEaXZXKHJlbWFpbmluZywgdGhpcy5yZXdhcmRfcGVyX3Rva2VuLnZhbHVlLmFzVWludDY0KCksIFBSRUNJU0lPTik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMyCiAgICAvLyByZXdhcmRfcGVyX3Rva2VuID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgOSAvLyAicmV3YXJkX3Blcl90b2tlbiIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NTAKICAgIC8vIGNvbnN0IG5ld0RlYnQgPSBtdWxEaXZXKHJlbWFpbmluZywgdGhpcy5yZXdhcmRfcGVyX3Rva2VuLnZhbHVlLmFzVWludDY0KCksIFBSRUNJU0lPTik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvY29uZmlnLmFsZ28udHM6MjgKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhhLCBiKTsKICAgIGRpZyA1CiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgbXVsdwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU1MAogICAgLy8gY29uc3QgbmV3RGVidCA9IG11bERpdlcocmVtYWluaW5nLCB0aGlzLnJld2FyZF9wZXJfdG9rZW4udmFsdWUuYXNVaW50NjQoKSwgUFJFQ0lTSU9OKTsKICAgIGludGMgNCAvLyAxMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9jb25maWcuYWxnby50czoyOQogICAgLy8gcmV0dXJuIGRpdncoaGksIGxvLCBjKTsKICAgIGRpdncKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NTIKICAgIC8vIHN0YWtlOiBuZXcgVWludDY0KHJlbWFpbmluZyksCiAgICBzd2FwCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTUzCiAgICAvLyByZXdhcmREZWJ0OiBuZXcgVWludDY0KG5ld0RlYnQpLAogICAgc3dhcAogICAgaXRvYgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU1MS01NTQKICAgIC8vIHRoaXMuc3Rha2VycyhvcC5UeG4uc2VuZGVyKS52YWx1ZSA9IG5ldyBTdGFrZUluZm9SZWNvcmQoewogICAgLy8gICBzdGFrZTogbmV3IFVpbnQ2NChyZW1haW5pbmcpLAogICAgLy8gICByZXdhcmREZWJ0OiBuZXcgVWludDY0KG5ld0RlYnQpLAogICAgLy8gfSk7CiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNgogICAgLy8gc3Rha2VycyA9IEJveE1hcDxBY2NvdW50LCBTdGFrZUluZm9SZWNvcmQ+KHsga2V5UHJlZml4OiAic3QiIH0pOwogICAgYnl0ZWMgNCAvLyAic3QiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTUxCiAgICAvLyB0aGlzLnN0YWtlcnMob3AuVHhuLnNlbmRlcikudmFsdWUgPSBuZXcgU3Rha2VJbmZvUmVjb3JkKHsKICAgIHR4biBTZW5kZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyNgogICAgLy8gc3Rha2VycyA9IEJveE1hcDxBY2NvdW50LCBTdGFrZUluZm9SZWNvcmQ+KHsga2V5UHJlZml4OiAic3QiIH0pOwogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTUxLTU1NAogICAgLy8gdGhpcy5zdGFrZXJzKG9wLlR4bi5zZW5kZXIpLnZhbHVlID0gbmV3IFN0YWtlSW5mb1JlY29yZCh7CiAgICAvLyAgIHN0YWtlOiBuZXcgVWludDY0KHJlbWFpbmluZyksCiAgICAvLyAgIHJld2FyZERlYnQ6IG5ldyBVaW50NjQobmV3RGVidCksCiAgICAvLyB9KTsKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIGIgdW5zdGFrZV9hZnRlcl9pZl9lbHNlQDE4Cgp1bnN0YWtlX3Rlcm5hcnlfZmFsc2VAMzoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0OTgKICAgIC8vIGxldCBwZW5kaW5nOiB1aW50NjQgPSBhY2NydWVkID4gcmVjLnJld2FyZERlYnQuYXNVaW50NjQoKSA/IGFjY3J1ZWQgLSByZWMucmV3YXJkRGVidC5hc1VpbnQ2NCgpIDogMDsKICAgIGludGNfMCAvLyAwCiAgICBidXJ5IDYKICAgIGIgdW5zdGFrZV90ZXJuYXJ5X21lcmdlQDQKCgovLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6OlN0YWtpbmcuZGVsZXRlQXBwbGljYXRpb25bcm91dGluZ10oKSAtPiB2b2lkOgpkZWxldGVBcHBsaWNhdGlvbjoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NjAKICAgIC8vIGFzc2VydChvcC5UeG4uc2VuZGVyID09PSB0aGlzLnN1cGVyX2FkbWluX2FkZHJlc3MudmFsdWUsICJPbmx5IHN1cGVyIGFkbWluIGNhbiBkZWxldGUgYXBwbGljYXRpb24iKTsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NDYKICAgIC8vIHN1cGVyX2FkbWluX2FkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOwogICAgYnl0ZWMgMTQgLy8gInN1cGVyX2FkbWluX2FkZHJlc3MiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTYwCiAgICAvLyBhc3NlcnQob3AuVHhuLnNlbmRlciA9PT0gdGhpcy5zdXBlcl9hZG1pbl9hZGRyZXNzLnZhbHVlLCAiT25seSBzdXBlciBhZG1pbiBjYW4gZGVsZXRlIGFwcGxpY2F0aW9uIik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBPbmx5IHN1cGVyIGFkbWluIGNhbiBkZWxldGUgYXBwbGljYXRpb24KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NjEKICAgIC8vIGFzc2VydCh0aGlzLnRvdGFsX3N0YWtlZC52YWx1ZS5hc1VpbnQ2NCgpID09PSAwLCAiU3Rha2VkIGFzc2V0cyBzdGlsbCBleGlzdCIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMQogICAgLy8gdG90YWxfc3Rha2VkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWNfMyAvLyAidG90YWxfc3Rha2VkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU2MQogICAgLy8gYXNzZXJ0KHRoaXMudG90YWxfc3Rha2VkLnZhbHVlLmFzVWludDY0KCkgPT09IDAsICJTdGFrZWQgYXNzZXRzIHN0aWxsIGV4aXN0Iik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgIQogICAgYXNzZXJ0IC8vIFN0YWtlZCBhc3NldHMgc3RpbGwgZXhpc3QKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NjIKICAgIC8vIGFzc2VydCh0aGlzLm51bV9zdGFrZXJzLnZhbHVlLmFzVWludDY0KCkgPT09IDAsICJTdGFrZXJzIGV4aXN0Iik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ3CiAgICAvLyBudW1fc3Rha2VycyA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDEwIC8vICJudW1fc3Rha2VycyIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NjIKICAgIC8vIGFzc2VydCh0aGlzLm51bV9zdGFrZXJzLnZhbHVlLmFzVWludDY0KCkgPT09IDAsICJTdGFrZXJzIGV4aXN0Iik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgIQogICAgYXNzZXJ0IC8vIFN0YWtlcnMgZXhpc3QKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NjQKICAgIC8vIGNvbnN0IHN0YWtlZEJhbGFuY2UgPSBvcC5Bc3NldEhvbGRpbmcuYXNzZXRCYWxhbmNlKEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLCBBc3NldCh0aGlzLnN0YWtlZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpKSlbMF07CiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyOAogICAgLy8gc3Rha2VkX2Fzc2V0X2lkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTYgLy8gInN0YWtlZF9hc3NldF9pZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NjQKICAgIC8vIGNvbnN0IHN0YWtlZEJhbGFuY2UgPSBvcC5Bc3NldEhvbGRpbmcuYXNzZXRCYWxhbmNlKEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLCBBc3NldCh0aGlzLnN0YWtlZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpKSlbMF07CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZHVwCiAgICBidG9pCiAgICB1bmNvdmVyIDIKICAgIGRpZyAxCiAgICBhc3NldF9ob2xkaW5nX2dldCBBc3NldEJhbGFuY2UKICAgIHBvcAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU2NQogICAgLy8gYXNzZXJ0KHN0YWtlZEJhbGFuY2UgPT09IDAsICJTdGFrZWQgYXNzZXQgYmFsYW5jZSBub3QgZW1wdHkiKTsKICAgICEKICAgIGFzc2VydCAvLyBTdGFrZWQgYXNzZXQgYmFsYW5jZSBub3QgZW1wdHkKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NjcKICAgIC8vIGNvbnN0IHJld2FyZEJhbGFuY2UgPSBvcC5Bc3NldEhvbGRpbmcuYXNzZXRCYWxhbmNlKEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLCBBc3NldCh0aGlzLnJld2FyZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpKSlbMF07CiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czoyOQogICAgLy8gcmV3YXJkX2Fzc2V0X2lkID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgNiAvLyAicmV3YXJkX2Fzc2V0X2lkIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU2NwogICAgLy8gY29uc3QgcmV3YXJkQmFsYW5jZSA9IG9wLkFzc2V0SG9sZGluZy5hc3NldEJhbGFuY2UoR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsIEFzc2V0KHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCkpKVswXTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBkdXAKICAgIGJ0b2kKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCiAgICBwb3AKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NjgKICAgIC8vIGFzc2VydChyZXdhcmRCYWxhbmNlID09PSAwLCAiUmV3YXJkIGFzc2V0IGJhbGFuY2Ugbm90IGVtcHR5Iik7CiAgICAhCiAgICBhc3NlcnQgLy8gUmV3YXJkIGFzc2V0IGJhbGFuY2Ugbm90IGVtcHR5CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTcwLTU3OAogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgeGZlckFzc2V0OiB0aGlzLnN0YWtlZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGFzc2V0Q2xvc2VUbzogdGhpcy5hZG1pbl9hZGRyZXNzLnZhbHVlLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiAwLAogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU3MwogICAgLy8gYXNzZXRDbG9zZVRvOiB0aGlzLmFkbWluX2FkZHJlc3MudmFsdWUsCiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ1CiAgICAvLyBhZG1pbl9hZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsKICAgIGJ5dGVjIDUgLy8gImFkbWluX2FkZHJlc3MiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTczCiAgICAvLyBhc3NldENsb3NlVG86IHRoaXMuYWRtaW5fYWRkcmVzcy52YWx1ZSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTc1CiAgICAvLyBhc3NldFJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NzQKICAgIC8vIGFzc2V0QW1vdW50OiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgQXNzZXRDbG9zZVRvCiAgICBzd2FwCiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU3MC01NzcKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIHhmZXJBc3NldDogdGhpcy5zdGFrZWRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldENsb3NlVG86IHRoaXMuYWRtaW5fYWRkcmVzcy52YWx1ZSwKICAgIC8vICAgICBhc3NldEFtb3VudDogMCwKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBpbnRjXzMgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU3NgogICAgLy8gZmVlOiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTcwLTU3OAogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgeGZlckFzc2V0OiB0aGlzLnN0YWtlZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGFzc2V0Q2xvc2VUbzogdGhpcy5hZG1pbl9hZGRyZXNzLnZhbHVlLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiAwLAogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1ODAKICAgIC8vIGlmICh0aGlzLnN0YWtlZF9hc3NldF9pZC52YWx1ZSAhPT0gdGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUpIHsKICAgICE9CiAgICBieiBkZWxldGVBcHBsaWNhdGlvbl9hZnRlcl9pZl9lbHNlQDUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1ODEtNTg5CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRDbG9zZVRvOiB0aGlzLmFkbWluX2FkZHJlc3MudmFsdWUsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IDAsCiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTgzCiAgICAvLyB4ZmVyQXNzZXQ6IHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksCiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjI5CiAgICAvLyByZXdhcmRfYXNzZXRfaWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyA2IC8vICJyZXdhcmRfYXNzZXRfaWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTgzCiAgICAvLyB4ZmVyQXNzZXQ6IHRoaXMucmV3YXJkX2Fzc2V0X2lkLnZhbHVlLmFzVWludDY0KCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU4NAogICAgLy8gYXNzZXRDbG9zZVRvOiB0aGlzLmFkbWluX2FkZHJlc3MudmFsdWUsCiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQ1CiAgICAvLyBhZG1pbl9hZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsKICAgIGJ5dGVjIDUgLy8gImFkbWluX2FkZHJlc3MiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTg0CiAgICAvLyBhc3NldENsb3NlVG86IHRoaXMuYWRtaW5fYWRkcmVzcy52YWx1ZSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTg2CiAgICAvLyBhc3NldFJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1ODUKICAgIC8vIGFzc2V0QW1vdW50OiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgQXNzZXRDbG9zZVRvCiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU4MS01ODgKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIHhmZXJBc3NldDogdGhpcy5yZXdhcmRfYXNzZXRfaWQudmFsdWUuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldENsb3NlVG86IHRoaXMuYWRtaW5fYWRkcmVzcy52YWx1ZSwKICAgIC8vICAgICBhc3NldEFtb3VudDogMCwKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBpbnRjXzMgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjU4NwogICAgLy8gZmVlOiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6NTgxLTU4OQogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgeGZlckFzc2V0OiB0aGlzLnJld2FyZF9hc3NldF9pZC52YWx1ZS5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGFzc2V0Q2xvc2VUbzogdGhpcy5hZG1pbl9hZGRyZXNzLnZhbHVlLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiAwLAogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKCmRlbGV0ZUFwcGxpY2F0aW9uX2FmdGVyX2lmX2Vsc2VANToKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo1NTgKICAgIC8vIEBhYmltZXRob2QoeyBhbGxvd0FjdGlvbnM6ICJEZWxldGVBcHBsaWNhdGlvbiIgfSkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6OlN0YWtpbmcudXBkYXRlUG9vbCgpIC0+IHZvaWQ6CnVwZGF0ZVBvb2w6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzA0CiAgICAvLyBwcml2YXRlIHVwZGF0ZVBvb2woKTogdm9pZCB7CiAgICBwcm90byAwIDAKICAgIHB1c2hieXRlcyAiIgogICAgZHVwbiA1CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzA1CiAgICAvLyBpZiAodGhpcy5jb250cmFjdF9zdGF0ZS52YWx1ZSA9PT0gbmV3IFVpbnQ2NCgwKSkgewogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0OQogICAgLy8gY29udHJhY3Rfc3RhdGUgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7IC8vIDAgPSBpbmFjdGl2ZSwgMSA9IGFjdGl2ZQogICAgYnl0ZWMgOCAvLyAiY29udHJhY3Rfc3RhdGUiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzA1CiAgICAvLyBpZiAodGhpcy5jb250cmFjdF9zdGF0ZS52YWx1ZSA9PT0gbmV3IFVpbnQ2NCgwKSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ5dGVjXzAgLy8gMHgwMDAwMDAwMDAwMDAwMDAwCiAgICA9PQogICAgYnogdXBkYXRlUG9vbF9hZnRlcl9pZl9lbHNlQDIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMDYKICAgIC8vIHJldHVybjsKICAgIHJldHN1YgoKdXBkYXRlUG9vbF9hZnRlcl9pZl9lbHNlQDI6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzA5CiAgICAvLyBjb25zdCBub3c6IHVpbnQ2NCA9IEdsb2JhbC5sYXRlc3RUaW1lc3RhbXA7CiAgICBnbG9iYWwgTGF0ZXN0VGltZXN0YW1wCiAgICBkdXAKICAgIGZyYW1lX2J1cnkgMgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMxMAogICAgLy8gY29uc3Qgc3RhcnQ6IHVpbnQ2NCA9IHRoaXMuc3RhcnRfdGltZS52YWx1ZS5hc1VpbnQ2NCgpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNQogICAgLy8gc3RhcnRfdGltZSA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDIxIC8vICJzdGFydF90aW1lIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMxMAogICAgLy8gY29uc3Qgc3RhcnQ6IHVpbnQ2NCA9IHRoaXMuc3RhcnRfdGltZS52YWx1ZS5hc1VpbnQ2NCgpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIGZyYW1lX2J1cnkgNQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMxMQogICAgLy8gY29uc3QgbGFzdDogdWludDY0ID0gdGhpcy5sYXN0X3VwZGF0ZV90aW1lLnZhbHVlLmFzVWludDY0KCk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM2CiAgICAvLyBsYXN0X3VwZGF0ZV90aW1lID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTEgLy8gImxhc3RfdXBkYXRlX3RpbWUiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzExCiAgICAvLyBjb25zdCBsYXN0OiB1aW50NjQgPSB0aGlzLmxhc3RfdXBkYXRlX3RpbWUudmFsdWUuYXNVaW50NjQoKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICBkdXAKICAgIGZyYW1lX2J1cnkgMQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMxMwogICAgLy8gaWYgKG5vdyA8PSBsYXN0KSB7CiAgICA8PQogICAgYnogdXBkYXRlUG9vbF9hZnRlcl9pZl9lbHNlQDQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMTQKICAgIC8vIHJldHVybjsKICAgIHJldHN1YgoKdXBkYXRlUG9vbF9hZnRlcl9pZl9lbHNlQDQ6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzE3CiAgICAvLyBpZiAodGhpcy5yZXdhcmRzX2V4aGF1c3RlZC52YWx1ZS5hc1VpbnQ2NCgpID09PSAxKSB7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQxCiAgICAvLyByZXdhcmRzX2V4aGF1c3RlZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDEyIC8vICJyZXdhcmRzX2V4aGF1c3RlZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMTcKICAgIC8vIGlmICh0aGlzLnJld2FyZHNfZXhoYXVzdGVkLnZhbHVlLmFzVWludDY0KCkgPT09IDEpIHsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICBpbnRjXzEgLy8gMQogICAgPT0KICAgIGJ6IHVwZGF0ZVBvb2xfYWZ0ZXJfaWZfZWxzZUA2CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzE4CiAgICAvLyB0aGlzLmxhc3RfdXBkYXRlX3RpbWUudmFsdWUgPSBuZXcgVWludDY0KG5vdyk7CiAgICBmcmFtZV9kaWcgMgogICAgaXRvYgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM2CiAgICAvLyBsYXN0X3VwZGF0ZV90aW1lID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTEgLy8gImxhc3RfdXBkYXRlX3RpbWUiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzE4CiAgICAvLyB0aGlzLmxhc3RfdXBkYXRlX3RpbWUudmFsdWUgPSBuZXcgVWludDY0KG5vdyk7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMxOQogICAgLy8gcmV0dXJuOwogICAgcmV0c3ViCgp1cGRhdGVQb29sX2FmdGVyX2lmX2Vsc2VANjoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMjMKICAgIC8vIGlmIChjYXBwZWRUaW1lIDw9IHN0YXJ0KSB7CiAgICBmcmFtZV9kaWcgMgogICAgZnJhbWVfZGlnIDUKICAgIDw9CiAgICBieiB1cGRhdGVQb29sX2FmdGVyX2lmX2Vsc2VAOAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMyNAogICAgLy8gdGhpcy5sYXN0X3VwZGF0ZV90aW1lLnZhbHVlID0gbmV3IFVpbnQ2NChjYXBwZWRUaW1lKTsKICAgIGZyYW1lX2RpZyAyCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzYKICAgIC8vIGxhc3RfdXBkYXRlX3RpbWUgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxMSAvLyAibGFzdF91cGRhdGVfdGltZSIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMjQKICAgIC8vIHRoaXMubGFzdF91cGRhdGVfdGltZS52YWx1ZSA9IG5ldyBVaW50NjQoY2FwcGVkVGltZSk7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMyNQogICAgLy8gcmV0dXJuOwogICAgcmV0c3ViCgp1cGRhdGVQb29sX2FmdGVyX2lmX2Vsc2VAODoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMjgKICAgIC8vIGNvbnN0IGVmZmVjdGl2ZUxhc3Q6IHVpbnQ2NCA9IGxhc3QgPCBzdGFydCA/IHN0YXJ0IDogbGFzdDsKICAgIGZyYW1lX2RpZyAxCiAgICBkdXAKICAgIGZyYW1lX2RpZyA1CiAgICBkdXAKICAgIGNvdmVyIDMKICAgIDwKICAgIHN3YXAKICAgIGNvdmVyIDIKICAgIHNlbGVjdAogICAgZHVwCiAgICBmcmFtZV9idXJ5IDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMjkKICAgIC8vIGlmIChjYXBwZWRUaW1lIDw9IGVmZmVjdGl2ZUxhc3QpIHsKICAgIGZyYW1lX2RpZyAyCiAgICA+PQogICAgYnogdXBkYXRlUG9vbF9hZnRlcl9pZl9lbHNlQDEwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzMwCiAgICAvLyB0aGlzLmxhc3RfdXBkYXRlX3RpbWUudmFsdWUgPSBuZXcgVWludDY0KGNhcHBlZFRpbWUpOwogICAgZnJhbWVfZGlnIDIKICAgIGl0b2IKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNgogICAgLy8gbGFzdF91cGRhdGVfdGltZSA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDExIC8vICJsYXN0X3VwZGF0ZV90aW1lIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMzMAogICAgLy8gdGhpcy5sYXN0X3VwZGF0ZV90aW1lLnZhbHVlID0gbmV3IFVpbnQ2NChjYXBwZWRUaW1lKTsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzMxCiAgICAvLyByZXR1cm47CiAgICByZXRzdWIKCnVwZGF0ZVBvb2xfYWZ0ZXJfaWZfZWxzZUAxMDoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMzQKICAgIC8vIGlmICh0aGlzLnRvdGFsX3N0YWtlZC52YWx1ZS5hc1VpbnQ2NCgpID09PSAwKSB7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMxCiAgICAvLyB0b3RhbF9zdGFrZWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlY18zIC8vICJ0b3RhbF9zdGFrZWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzM0CiAgICAvLyBpZiAodGhpcy50b3RhbF9zdGFrZWQudmFsdWUuYXNVaW50NjQoKSA9PT0gMCkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIGJueiB1cGRhdGVQb29sX2FmdGVyX2lmX2Vsc2VAMTIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMzUKICAgIC8vIHRoaXMubGFzdF91cGRhdGVfdGltZS52YWx1ZSA9IG5ldyBVaW50NjQoY2FwcGVkVGltZSk7CiAgICBmcmFtZV9kaWcgMgogICAgaXRvYgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM2CiAgICAvLyBsYXN0X3VwZGF0ZV90aW1lID0gR2xvYmFsU3RhdGU8VWludDY0PigpOwogICAgYnl0ZWMgMTEgLy8gImxhc3RfdXBkYXRlX3RpbWUiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzM1CiAgICAvLyB0aGlzLmxhc3RfdXBkYXRlX3RpbWUudmFsdWUgPSBuZXcgVWludDY0KGNhcHBlZFRpbWUpOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozMzYKICAgIC8vIHJldHVybjsKICAgIHJldHN1YgoKdXBkYXRlUG9vbF9hZnRlcl9pZl9lbHNlQDEyOgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjMzOQogICAgLy8gY29uc3QgZHVyYXRpb246IHVpbnQ2NCA9IGNhcHBlZFRpbWUgLSBlZmZlY3RpdmVMYXN0OwogICAgZnJhbWVfZGlnIDIKICAgIGZyYW1lX2RpZyAwCiAgICAtCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzQwCiAgICAvLyBsZXQgcmV3YXJkUmF0ZTogdWludDY0ID0gdGhpcy5yZXdhcmRfcmF0ZS52YWx1ZS5hc1VpbnQ2NCgpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNAogICAgLy8gcmV3YXJkX3JhdGUgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAyMCAvLyAicmV3YXJkX3JhdGUiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzQwCiAgICAvLyBsZXQgcmV3YXJkUmF0ZTogdWludDY0ID0gdGhpcy5yZXdhcmRfcmF0ZS52YWx1ZS5hc1VpbnQ2NCgpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGJ1cnkgMQogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM0MQogICAgLy8gY29uc3QgYW5udWFsUmV3YXJkID0gbXVsRGl2Vyh0aGlzLnRvdGFsX3N0YWtlZC52YWx1ZS5hc1VpbnQ2NCgpLCB0aGlzLmFwcl9icHMudmFsdWUuYXNVaW50NjQoKSwgMTBfMDAwKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzEKICAgIC8vIHRvdGFsX3N0YWtlZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjXzMgLy8gInRvdGFsX3N0YWtlZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNDEKICAgIC8vIGNvbnN0IGFubnVhbFJld2FyZCA9IG11bERpdlcodGhpcy50b3RhbF9zdGFrZWQudmFsdWUuYXNVaW50NjQoKSwgdGhpcy5hcHJfYnBzLnZhbHVlLmFzVWludDY0KCksIDEwXzAwMCk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MAogICAgLy8gYXByX2JwcyA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDIyIC8vICJhcHJfYnBzIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM0MQogICAgLy8gY29uc3QgYW5udWFsUmV3YXJkID0gbXVsRGl2Vyh0aGlzLnRvdGFsX3N0YWtlZC52YWx1ZS5hc1VpbnQ2NCgpLCB0aGlzLmFwcl9icHMudmFsdWUuYXNVaW50NjQoKSwgMTBfMDAwKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9jb25maWcuYWxnby50czoyOAogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KGEsIGIpOwogICAgbXVsdwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM0MQogICAgLy8gY29uc3QgYW5udWFsUmV3YXJkID0gbXVsRGl2Vyh0aGlzLnRvdGFsX3N0YWtlZC52YWx1ZS5hc1VpbnQ2NCgpLCB0aGlzLmFwcl9icHMudmFsdWUuYXNVaW50NjQoKSwgMTBfMDAwKTsKICAgIGludGMgNSAvLyAxMDAwMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvY29uZmlnLmFsZ28udHM6MjkKICAgIC8vIHJldHVybiBkaXZ3KGhpLCBsbywgYyk7CiAgICBkaXZ3CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzQyCiAgICAvLyByZXdhcmRSYXRlID0gYW5udWFsUmV3YXJkIC8gU0VDT05EU19QRVJfWUVBUjsKICAgIHB1c2hpbnQgMzE1MzYwMDAgLy8gMzE1MzYwMDAKICAgIC8KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNDQKICAgIC8vIGxldCByZXdhcmQ6IHVpbnQ2NCA9IGR1cmF0aW9uICogcmV3YXJkUmF0ZTsKICAgICoKICAgIGR1cAogICAgZnJhbWVfYnVyeSA0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzQ1CiAgICAvLyBjb25zdCByZW1haW5pbmc6IHVpbnQ2NCA9IHRoaXMudG90YWxfcmV3YXJkcy52YWx1ZS5hc1VpbnQ2NCgpIC0gdGhpcy5hY2NydWVkX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzgKICAgIC8vIHRvdGFsX3Jld2FyZHMgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxMyAvLyAidG90YWxfcmV3YXJkcyIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNDUKICAgIC8vIGNvbnN0IHJlbWFpbmluZzogdWludDY0ID0gdGhpcy50b3RhbF9yZXdhcmRzLnZhbHVlLmFzVWludDY0KCkgLSB0aGlzLmFjY3J1ZWRfcmV3YXJkcy52YWx1ZS5hc1VpbnQ2NCgpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzkKICAgIC8vIGFjY3J1ZWRfcmV3YXJkcyA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDcgLy8gImFjY3J1ZWRfcmV3YXJkcyIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNDUKICAgIC8vIGNvbnN0IHJlbWFpbmluZzogdWludDY0ID0gdGhpcy50b3RhbF9yZXdhcmRzLnZhbHVlLmFzVWludDY0KCkgLSB0aGlzLmFjY3J1ZWRfcmV3YXJkcy52YWx1ZS5hc1VpbnQ2NCgpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIC0KICAgIGR1cAogICAgZnJhbWVfYnVyeSAzCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzQ2CiAgICAvLyBpZiAocmV3YXJkID4gcmVtYWluaW5nKSB7CiAgICA+CiAgICBieiB1cGRhdGVQb29sX2FmdGVyX2lmX2Vsc2VAMTQKICAgIGZyYW1lX2RpZyAzCiAgICBmcmFtZV9idXJ5IDQKCnVwZGF0ZVBvb2xfYWZ0ZXJfaWZfZWxzZUAxNDoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNDkKICAgIC8vIGlmIChyZXdhcmQgPT09IDApIHsKICAgIGZyYW1lX2RpZyA0CiAgICBibnogdXBkYXRlUG9vbF9hZnRlcl9pZl9lbHNlQDE4CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzUwCiAgICAvLyBpZiAocmVtYWluaW5nID09PSAwKSB7CiAgICBmcmFtZV9kaWcgMwogICAgYm56IHVwZGF0ZVBvb2xfYWZ0ZXJfaWZfZWxzZUAxNwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjQxCiAgICAvLyByZXdhcmRzX2V4aGF1c3RlZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDEyIC8vICJyZXdhcmRzX2V4aGF1c3RlZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNTEKICAgIC8vIHRoaXMucmV3YXJkc19leGhhdXN0ZWQudmFsdWUgPSBuZXcgVWludDY0KDEpOwogICAgYnl0ZWMgMTcgLy8gMHgwMDAwMDAwMDAwMDAwMDAxCiAgICBhcHBfZ2xvYmFsX3B1dAoKdXBkYXRlUG9vbF9hZnRlcl9pZl9lbHNlQDE3OgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM1MwogICAgLy8gdGhpcy5sYXN0X3VwZGF0ZV90aW1lLnZhbHVlID0gbmV3IFVpbnQ2NChjYXBwZWRUaW1lKTsKICAgIGZyYW1lX2RpZyAyCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzYKICAgIC8vIGxhc3RfdXBkYXRlX3RpbWUgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxMSAvLyAibGFzdF91cGRhdGVfdGltZSIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNTMKICAgIC8vIHRoaXMubGFzdF91cGRhdGVfdGltZS52YWx1ZSA9IG5ldyBVaW50NjQoY2FwcGVkVGltZSk7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM1NAogICAgLy8gcmV0dXJuOwogICAgcmV0c3ViCgp1cGRhdGVQb29sX2FmdGVyX2lmX2Vsc2VAMTg6CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzU3CiAgICAvLyB0aGlzLmFjY3J1ZWRfcmV3YXJkcy52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy5hY2NydWVkX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKSArIHJld2FyZCk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM5CiAgICAvLyBhY2NydWVkX3Jld2FyZHMgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyA3IC8vICJhY2NydWVkX3Jld2FyZHMiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzU3CiAgICAvLyB0aGlzLmFjY3J1ZWRfcmV3YXJkcy52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy5hY2NydWVkX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKSArIHJld2FyZCk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgZnJhbWVfZGlnIDQKICAgIGR1cAogICAgY292ZXIgMgogICAgKwogICAgaXRvYgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM5CiAgICAvLyBhY2NydWVkX3Jld2FyZHMgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyA3IC8vICJhY2NydWVkX3Jld2FyZHMiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzU3CiAgICAvLyB0aGlzLmFjY3J1ZWRfcmV3YXJkcy52YWx1ZSA9IG5ldyBVaW50NjQodGhpcy5hY2NydWVkX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKSArIHJld2FyZCk7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM1OAogICAgLy8gY29uc3QgZGVsdGFSUFQgPSBtdWxEaXZXKHJld2FyZCwgUFJFQ0lTSU9OLCB0aGlzLnRvdGFsX3N0YWtlZC52YWx1ZS5hc1VpbnQ2NCgpKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzEKICAgIC8vIHRvdGFsX3N0YWtlZCA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjXzMgLy8gInRvdGFsX3N0YWtlZCIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNTgKICAgIC8vIGNvbnN0IGRlbHRhUlBUID0gbXVsRGl2VyhyZXdhcmQsIFBSRUNJU0lPTiwgdGhpcy50b3RhbF9zdGFrZWQudmFsdWUuYXNVaW50NjQoKSk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnRvaQogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvY29uZmlnLmFsZ28udHM6MjcKICAgIC8vIGFzc2VydChjID4gMCwgIm11bERpdlc6IGRpdmlzaW9uIGJ5IHplcm8iKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIG11bERpdlc6IGRpdmlzaW9uIGJ5IHplcm8KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL2NvbmZpZy5hbGdvLnRzOjI4CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcoYSwgYik7CiAgICBzd2FwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzU4CiAgICAvLyBjb25zdCBkZWx0YVJQVCA9IG11bERpdlcocmV3YXJkLCBQUkVDSVNJT04sIHRoaXMudG90YWxfc3Rha2VkLnZhbHVlLmFzVWludDY0KCkpOwogICAgaW50YyA0IC8vIDEwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL2NvbmZpZy5hbGdvLnRzOjI4CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcoYSwgYik7CiAgICBtdWx3CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9jb25maWcuYWxnby50czoyOQogICAgLy8gcmV0dXJuIGRpdncoaGksIGxvLCBjKTsKICAgIHVuY292ZXIgMgogICAgZGl2dwogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM1OQogICAgLy8gdGhpcy5yZXdhcmRfcGVyX3Rva2VuLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLnJld2FyZF9wZXJfdG9rZW4udmFsdWUuYXNVaW50NjQoKSArIGRlbHRhUlBUKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzIKICAgIC8vIHJld2FyZF9wZXJfdG9rZW4gPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyA5IC8vICJyZXdhcmRfcGVyX3Rva2VuIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM1OQogICAgLy8gdGhpcy5yZXdhcmRfcGVyX3Rva2VuLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLnJld2FyZF9wZXJfdG9rZW4udmFsdWUuYXNVaW50NjQoKSArIGRlbHRhUlBUKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBidG9pCiAgICArCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzIKICAgIC8vIHJld2FyZF9wZXJfdG9rZW4gPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyA5IC8vICJyZXdhcmRfcGVyX3Rva2VuIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM1OQogICAgLy8gdGhpcy5yZXdhcmRfcGVyX3Rva2VuLnZhbHVlID0gbmV3IFVpbnQ2NCh0aGlzLnJld2FyZF9wZXJfdG9rZW4udmFsdWUuYXNVaW50NjQoKSArIGRlbHRhUlBUKTsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzYwCiAgICAvLyB0aGlzLmxhc3RfdXBkYXRlX3RpbWUudmFsdWUgPSBuZXcgVWludDY0KGNhcHBlZFRpbWUpOwogICAgZnJhbWVfZGlnIDIKICAgIGl0b2IKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNgogICAgLy8gbGFzdF91cGRhdGVfdGltZSA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDExIC8vICJsYXN0X3VwZGF0ZV90aW1lIgogICAgLy8gc21hcnRfY29udHJhY3RzL3N0YWtpbmcvc3Rha2luZy5hbGdvLnRzOjM2MAogICAgLy8gdGhpcy5sYXN0X3VwZGF0ZV90aW1lLnZhbHVlID0gbmV3IFVpbnQ2NChjYXBwZWRUaW1lKTsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzYxCiAgICAvLyBpZiAodGhpcy5hY2NydWVkX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKSA9PT0gdGhpcy50b3RhbF9yZXdhcmRzLnZhbHVlLmFzVWludDY0KCkpIHsKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzkKICAgIC8vIGFjY3J1ZWRfcmV3YXJkcyA9IEdsb2JhbFN0YXRlPFVpbnQ2ND4oKTsKICAgIGJ5dGVjIDcgLy8gImFjY3J1ZWRfcmV3YXJkcyIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNjEKICAgIC8vIGlmICh0aGlzLmFjY3J1ZWRfcmV3YXJkcy52YWx1ZS5hc1VpbnQ2NCgpID09PSB0aGlzLnRvdGFsX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzgKICAgIC8vIHRvdGFsX3Jld2FyZHMgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxMyAvLyAidG90YWxfcmV3YXJkcyIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czozNjEKICAgIC8vIGlmICh0aGlzLmFjY3J1ZWRfcmV3YXJkcy52YWx1ZS5hc1VpbnQ2NCgpID09PSB0aGlzLnRvdGFsX3Jld2FyZHMudmFsdWUuYXNVaW50NjQoKSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ0b2kKICAgID09CiAgICBieiB1cGRhdGVQb29sX2FmdGVyX2lmX2Vsc2VAMjAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9zdGFraW5nL3N0YWtpbmcuYWxnby50czo0MQogICAgLy8gcmV3YXJkc19leGhhdXN0ZWQgPSBHbG9iYWxTdGF0ZTxVaW50NjQ+KCk7CiAgICBieXRlYyAxMiAvLyAicmV3YXJkc19leGhhdXN0ZWQiCiAgICAvLyBzbWFydF9jb250cmFjdHMvc3Rha2luZy9zdGFraW5nLmFsZ28udHM6MzYyCiAgICAvLyB0aGlzLnJld2FyZHNfZXhoYXVzdGVkLnZhbHVlID0gbmV3IFVpbnQ2NCgxKTsKICAgIGJ5dGVjIDE3IC8vIDB4MDAwMDAwMDAwMDAwMDAwMQogICAgYXBwX2dsb2JhbF9wdXQKCnVwZGF0ZVBvb2xfYWZ0ZXJfaWZfZWxzZUAyMDoKICAgIHJldHN1Ygo=","clear":"I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYmFzZS1jb250cmFjdC5kLnRzOjpCYXNlQ29udHJhY3QuY2xlYXJTdGF0ZVByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBwdXNoaW50IDEgLy8gMQogICAgcmV0dXJuCg=="},"byteCode":{"approval":"CyAHAAEIBICAmqbqr+MBkE7krwEmGAgAAAAAAAAAAAxyZXdhcmRzX3BhaWQVcGxhdGZvcm1fZmVlc19hY2NydWVkDHRvdGFsX3N0YWtlZAJzdA1hZG1pbl9hZGRyZXNzD3Jld2FyZF9hc3NldF9pZA9hY2NydWVkX3Jld2FyZHMOY29udHJhY3Rfc3RhdGUQcmV3YXJkX3Blcl90b2tlbgtudW1fc3Rha2VycxBsYXN0X3VwZGF0ZV90aW1lEXJld2FyZHNfZXhoYXVzdGVkDXRvdGFsX3Jld2FyZHMTc3VwZXJfYWRtaW5fYWRkcmVzcxBwbGF0Zm9ybV9mZWVfYnBzD3N0YWtlZF9hc3NldF9pZAgAAAAAAAAAAQ9tYXN0ZXJfcmVwb19hcHALaW5pdGlhbGl6ZWQLcmV3YXJkX3JhdGUKc3RhcnRfdGltZQdhcHJfYnBzBBUffHWABCSHwyw2GgCOAQCDMRkURDEYQQBsgg4EdzakUQSCZMmOBHG//xEEVhNEEQTDvX7UBNonAEoEo/6kDwRlkEZ6BJB98/YEKU036QR6nuGJBKWua9EEgTzomgQxcsqdNhoAjg4AcAF3AdgCLgJyAucDCQMhAzkDcQS3BlIHMgABACNDgATNGfGmNhoAjgEADQAxGYEFEjEYEERCCGQ2GgFJFYEgEkQ2GgJJFSQSRBcnBU8CZ4ICEGNvbnRyYWN0X3ZlcnNpb24IAAAAAAAAD6BnJwgoZycSTGcnDyhnKihnKShnJxMoZysoZycKKGcjQzYaAUcCFSQSRBc2GgJHAhUkEkQXNhoDRwIVJBJEFzYaBElOAkkVJBJEFzYaBUkVJBJEF0lOAzYaBkkVJBJEF0lOBDEWIwlJTgU4ECMSRDEAIicFZUQSRCInE2VEFxREIicIZUQXFEQiK2VEFxREIicKZUQXFERPA0RETERAAIMyB0lLAwhLAQ1EJxBLCmcnBksIZycNSwZnJxQoZxYnFUsBZycLTGcnCShnJwcoZycWSwRnKihnJwwoZykoZycTJxFnRwI4BzIKEkw4CIGAtRgSEESxMgoishKyFEsHSbIRJbIQIrIBs0sGE0EAE7EyCiKyErIUSwWyESWyECKyAbMjQ0sCQv96MRYjCUk4ECUSRDYaAUkVJBJEFzEAIicFZURMSwESRCInCGVEKBJEIicHZUQXFEQiJw1lRBdLAhJESwI4ABJLAjgUMgoSEEsCOBEiJwZlRBcSEE8COBJPAhIQRCcMKGcjQzEWIwlJOBAlEkQ2GgFJFSQSRBcxACInBWVETEsBEkRLAURLAjgAEksCOBQyChIQSwI4ESInBmVEFxIQTwI4EksCEhBEIicNZUQXCBYnDUxnJwwoZyNDMQAiJwVlRExLARJEIicIZUQoEkQiJw1lRBciJwdlRBcJSUSxIicGZUQXMgpPArISsgCyEbIUJbIQIrIBsycMJxFnI0MxACInBWVEEkSxIicSZUSABLOzt+KyGrIYgQayECKyAbO0PklXBABMVwAEJxcSREkVgSASRCcOTGexIicSZUSABPEzA42yGrIYgQayECKyAbO0PklXBABMVwAEJxcSREkVJBJESRchBQ5EJw9MZycIJxFnI0MxACInBWVEEkAACzEAIicOZUQSQQAII0QnCChnI0MiQv/1NhoBSRWBIBJEMQAiJwVlRBJEJwVMZyNDNhoBSRWBIBJEMQAiJw5lRBJEJw5MZyNDNhoBSRWBIBJEMQAiJw5lRBJEIiplRBdJRCooZ7EiJwZlRBcyCk8CshKyALIRshQlshAisgGzI0OAAEcDNhoBSRUkEkQXNhoCSRUkEkQXNhoDSU4DSRWBIBJEMQAiJw5lRBJEIicIZUQoEkQnBExQSU4DSb1FAUS+SEkiW0lOBElEIicQZUQXTwQSRE8CSwESRCInCWVEFx0hBJdJTwIkW0lOAg1BANFKCUUGIicHZUQXIillRBcJSUUISwYMQQAESwZFBksFQQBbIicPZUQXSwZJTwIdIQWXSUULDEEABEsFRQlLBUsJSU4CCUUJQQAMIiplRBdLCQgWKkxnIillRBdLBggWKUxnsSInBmVEFzIKSwmyErIASwWyFLIRJbIQIrIBs7EiJxBlRBcyCksESU4DshKyAEsGSU4DshSyESWyECKyAbMiK2VEF0wJFitMZyInCmVEFyMJFicKTGdLBLxIsTIKsgCBlKABsgiyByOyECKyAbMjQyJFBkL/LYAARwYxFoECCUk4ECUSRDYaAUkVJBJEF0lOAjEWIwlJOBAjEkRLAUQiJwhlRBcjEkQiJwxlRBcUREsCOAAxABJLAzgUMgoSEEsDOBEiJxBlRBcSEE8DOBJPAxIQREk4ADEAEksBOAcyChIQTDgIIQYSEEQnBDEAUL1JTwJIQQAUsTEAMgqyACEGsgiyByOyECKyAbOIA6tJQQD6JwQxAFC+RCJbRQNJQQDlJwQxAFC+RCRbRQQiJwllRBdLAx0hBJdJRQpLBA1BAL9LCEsECUUFIicHZUQXIillRBcJSUUHSwUMQQAESwVFBUsEQQBbIicPZUQXSwVJTwIdIQWXSUUKDEEABEsERQhLBEsISU4CCUUIQQAMIiplRBdLCAgWKkxnIillRBdLBQgWKUxnsSInBmVEFzEAMgpLCbISsgCyFLIRJbIQIrIBs0sCSwJJTgIIIitlRBdPAggWK0xnIicJZUQXSwEdIQSXTBZMFlAnBDEAUEy/SUAADSInCmVEFyMIFicKTGcjQyJFBUL/QiJFBEL/ICJFA0L/C4AARwMnBDEAUL1FAUQiJwhlRBcjEkQnBDEAUL5ESVcACExJIltJTgJJRIgCeiInCWVEFx0hBJdJTwIkW0lOAg1BAJdKCUUFIicHZUQXIillRBcJSUUHSwUMQQAESwVFBUsEQQBbIicPZUQXSwVJTwIdIQWXSUUKDEEABEsERQhLBEsISU4CCUUIQQAMIiplRBdLCAgWKkxnIillRBdLBQgWKUxnsSInBmVEFzEAMgpLCbISsgCyFLIRJbIQIrIBsyInCWVEF0sDHSEElxZLBExQJwQxAFBMvyNDIkUFQv9ngABHBDYaAUkVJBJEFycEMQBQvUUBRCcEMQBQvkRJIltJTgNJRIgBn0sCFE8DSwJPAk1JTgNLAQ5EIicJZUQXHSEEl0lPAiRbSU4CDUEA+koJRQYiJwdlRBciKWVEFwlJRQhLBgxBAARLBkUGSwVBAFsiJw9lRBdLBklPAh0hBZdJRQsMQQAESwVFCUsFSwlJTgIJRQlBAAwiKmVEF0sJCBYqTGciKWVEF0sGCBYpTGexIicGZUQXMQAyCksKshKyALIUshElshAisgGzsSInEGVEFzEAMgpLBUlOBLISsgCyFLIRJbIQIrIBsyIrZUQXSwEJFitMZ0sETAlJRQZAAConBDEAULxIIicKZUQXIwkWJwpMZ7ExADIKsgAhBrIIsgcjshAisgGzI0MiJwllRBdLBUlPAh0hBJdMFkwWUCcEMQBQTL9C/+AiRQZC/wQxACInDmVEEkQiK2VEFxREIicKZUQXFEQyCiInEGVESRdPAksBcABIFEQyCiInBmVESRdPAkxwAEgURLEiJwVlRDIKshQishKyFUyyESWyECKyAbMTQQAesSInBmVEFyInBWVEMgqyFCKyErIVshElshAisgGzI0OKAACAAEcFIicIZUQoEkEAAYkyB0mMAiInFWVEF4wFIicLZUQXSYwBDkEAAYkiJwxlRBcjEkEACIsCFicLTGeJiwKLBQ5BAAiLAhYnC0xniYsBSYsFSU4DDExOAk1JjACLAg9BAAiLAhYnC0xniSIrZUQXQAAIiwIWJwtMZ4mLAosACSInFGVFAUQiK2VEFyInFmVEFx0hBZeBgOeEDwoLSYwEIicNZUQXIicHZUQXCUmMAw1BAASLA4wEiwRAABKLA0AABScMJxFniwIWJwtMZ4kiJwdlRBeLBElOAggWJwdMZyIrZUQXSURMIQQdTwKXIicJZUQXCBYnCUxniwIWJwtMZyInB2VEFyInDWVEFxJBAAUnDCcRZ4k=","clear":"C4EBQw=="},"events":[],"templateVariables":{}} as unknown as Arc56Contract

/**
 * A state record containing binary data
 */
export interface BinaryState {
  /**
   * Gets the state value as a Uint8Array
   */
  asByteArray(): Uint8Array | undefined
  /**
   * Gets the state value as a string
   */
  asString(): string | undefined
}

class BinaryStateValue implements BinaryState {
  constructor(private value: Uint8Array | undefined) {}

  asByteArray(): Uint8Array | undefined {
    return this.value
  }

  asString(): string | undefined {
    return this.value !== undefined ? Buffer.from(this.value).toString('utf-8') : undefined
  }
}

/**
 * Expands types for IntelliSense so they are more human readable
 * See https://stackoverflow.com/a/69288824
 */
export type Expand<T> = T extends (...args: infer A) => infer R
  ? (...args: Expand<A>) => Expand<R>
  : T extends infer O
    ? { [K in keyof O]: O[K] }
    : never


// Type definitions for ARC-56 structs

export type StakeInfoRecord = {
  stake: bigint,
  rewardDebt: bigint
}


/**
 * Converts the ABI tuple representation of a StakeInfoRecord to the struct representation
 */
export function StakeInfoRecordFromTuple(abiTuple: [bigint, bigint]) {
  return getABIStructFromABITuple(abiTuple, APP_SPEC.structs.StakeInfoRecord, APP_SPEC.structs) as StakeInfoRecord
}

/**
 * The argument types for the Staking contract
 */
export type StakingArgs = {
  /**
   * The object representation of the arguments for each method
   */
  obj: {
    'createApplication(address,uint64)void': {
      adminAddress: string
      masterRepoApp: bigint | number
    }
    'initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void': {
      stakedAssetId: bigint | number
      rewardAssetId: bigint | number
      rewardAmount: bigint | number
      aprBps: bigint | number
      startTime: bigint | number
      duration: bigint | number
      initialBalanceTxn: AppMethodCallTransactionArgument
    }
    'fundRewards(axfer,uint64)void': {
      rewardFundingTxn: AppMethodCallTransactionArgument
      rewardAmount: bigint | number
    }
    'fundMoreRewards(axfer,uint64)void': {
      rewardFundingTxn: AppMethodCallTransactionArgument
      rewardAmount: bigint | number
    }
    'removeRewards()void': Record<string, never>
    'setContractActive()void': Record<string, never>
    'setContractInactive()void': Record<string, never>
    'updateAdminAddress(address)void': {
      adminAddress: string
    }
    'updateSuperAdminAddress(address)void': {
      superAdminAddress: string
    }
    'withdrawPlatformFees(address)void': {
      receiver: string
    }
    'emergencyWithdrawAsset(uint64,uint64,address)void': {
      assetId: bigint | number
      amount: bigint | number
      receiver: string
    }
    'stake(axfer,uint64,pay)void': {
      stakeTxn: AppMethodCallTransactionArgument
      quantity: bigint | number
      mbrTxn: AppMethodCallTransactionArgument
    }
    'claimRewards()void': Record<string, never>
    'unstake(uint64)void': {
      quantity: bigint | number
    }
    'deleteApplication()void': Record<string, never>
    'gas()void': Record<string, never>
  }
  /**
   * The tuple representation of the arguments for each method
   */
  tuple: {
    'createApplication(address,uint64)void': [adminAddress: string, masterRepoApp: bigint | number]
    'initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void': [stakedAssetId: bigint | number, rewardAssetId: bigint | number, rewardAmount: bigint | number, aprBps: bigint | number, startTime: bigint | number, duration: bigint | number, initialBalanceTxn: AppMethodCallTransactionArgument]
    'fundRewards(axfer,uint64)void': [rewardFundingTxn: AppMethodCallTransactionArgument, rewardAmount: bigint | number]
    'fundMoreRewards(axfer,uint64)void': [rewardFundingTxn: AppMethodCallTransactionArgument, rewardAmount: bigint | number]
    'removeRewards()void': []
    'setContractActive()void': []
    'setContractInactive()void': []
    'updateAdminAddress(address)void': [adminAddress: string]
    'updateSuperAdminAddress(address)void': [superAdminAddress: string]
    'withdrawPlatformFees(address)void': [receiver: string]
    'emergencyWithdrawAsset(uint64,uint64,address)void': [assetId: bigint | number, amount: bigint | number, receiver: string]
    'stake(axfer,uint64,pay)void': [stakeTxn: AppMethodCallTransactionArgument, quantity: bigint | number, mbrTxn: AppMethodCallTransactionArgument]
    'claimRewards()void': []
    'unstake(uint64)void': [quantity: bigint | number]
    'deleteApplication()void': []
    'gas()void': []
  }
}

/**
 * The return type for each method
 */
export type StakingReturns = {
  'createApplication(address,uint64)void': void
  'initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void': void
  'fundRewards(axfer,uint64)void': void
  'fundMoreRewards(axfer,uint64)void': void
  'removeRewards()void': void
  'setContractActive()void': void
  'setContractInactive()void': void
  'updateAdminAddress(address)void': void
  'updateSuperAdminAddress(address)void': void
  'withdrawPlatformFees(address)void': void
  'emergencyWithdrawAsset(uint64,uint64,address)void': void
  'stake(axfer,uint64,pay)void': void
  'claimRewards()void': void
  'unstake(uint64)void': void
  'deleteApplication()void': void
  'gas()void': void
}

/**
 * Defines the types of available calls and state of the Staking smart contract.
 */
export type StakingTypes = {
  /**
   * Maps method signatures / names to their argument and return types.
   */
  methods:
    & Record<'createApplication(address,uint64)void' | 'createApplication', {
      argsObj: StakingArgs['obj']['createApplication(address,uint64)void']
      argsTuple: StakingArgs['tuple']['createApplication(address,uint64)void']
      returns: StakingReturns['createApplication(address,uint64)void']
    }>
    & Record<'initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void' | 'initApplication', {
      argsObj: StakingArgs['obj']['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void']
      argsTuple: StakingArgs['tuple']['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void']
      returns: StakingReturns['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void']
    }>
    & Record<'fundRewards(axfer,uint64)void' | 'fundRewards', {
      argsObj: StakingArgs['obj']['fundRewards(axfer,uint64)void']
      argsTuple: StakingArgs['tuple']['fundRewards(axfer,uint64)void']
      returns: StakingReturns['fundRewards(axfer,uint64)void']
    }>
    & Record<'fundMoreRewards(axfer,uint64)void' | 'fundMoreRewards', {
      argsObj: StakingArgs['obj']['fundMoreRewards(axfer,uint64)void']
      argsTuple: StakingArgs['tuple']['fundMoreRewards(axfer,uint64)void']
      returns: StakingReturns['fundMoreRewards(axfer,uint64)void']
    }>
    & Record<'removeRewards()void' | 'removeRewards', {
      argsObj: StakingArgs['obj']['removeRewards()void']
      argsTuple: StakingArgs['tuple']['removeRewards()void']
      returns: StakingReturns['removeRewards()void']
    }>
    & Record<'setContractActive()void' | 'setContractActive', {
      argsObj: StakingArgs['obj']['setContractActive()void']
      argsTuple: StakingArgs['tuple']['setContractActive()void']
      returns: StakingReturns['setContractActive()void']
    }>
    & Record<'setContractInactive()void' | 'setContractInactive', {
      argsObj: StakingArgs['obj']['setContractInactive()void']
      argsTuple: StakingArgs['tuple']['setContractInactive()void']
      returns: StakingReturns['setContractInactive()void']
    }>
    & Record<'updateAdminAddress(address)void' | 'updateAdminAddress', {
      argsObj: StakingArgs['obj']['updateAdminAddress(address)void']
      argsTuple: StakingArgs['tuple']['updateAdminAddress(address)void']
      returns: StakingReturns['updateAdminAddress(address)void']
    }>
    & Record<'updateSuperAdminAddress(address)void' | 'updateSuperAdminAddress', {
      argsObj: StakingArgs['obj']['updateSuperAdminAddress(address)void']
      argsTuple: StakingArgs['tuple']['updateSuperAdminAddress(address)void']
      returns: StakingReturns['updateSuperAdminAddress(address)void']
    }>
    & Record<'withdrawPlatformFees(address)void' | 'withdrawPlatformFees', {
      argsObj: StakingArgs['obj']['withdrawPlatformFees(address)void']
      argsTuple: StakingArgs['tuple']['withdrawPlatformFees(address)void']
      returns: StakingReturns['withdrawPlatformFees(address)void']
    }>
    & Record<'emergencyWithdrawAsset(uint64,uint64,address)void' | 'emergencyWithdrawAsset', {
      argsObj: StakingArgs['obj']['emergencyWithdrawAsset(uint64,uint64,address)void']
      argsTuple: StakingArgs['tuple']['emergencyWithdrawAsset(uint64,uint64,address)void']
      returns: StakingReturns['emergencyWithdrawAsset(uint64,uint64,address)void']
    }>
    & Record<'stake(axfer,uint64,pay)void' | 'stake', {
      argsObj: StakingArgs['obj']['stake(axfer,uint64,pay)void']
      argsTuple: StakingArgs['tuple']['stake(axfer,uint64,pay)void']
      returns: StakingReturns['stake(axfer,uint64,pay)void']
    }>
    & Record<'claimRewards()void' | 'claimRewards', {
      argsObj: StakingArgs['obj']['claimRewards()void']
      argsTuple: StakingArgs['tuple']['claimRewards()void']
      returns: StakingReturns['claimRewards()void']
    }>
    & Record<'unstake(uint64)void' | 'unstake', {
      argsObj: StakingArgs['obj']['unstake(uint64)void']
      argsTuple: StakingArgs['tuple']['unstake(uint64)void']
      returns: StakingReturns['unstake(uint64)void']
    }>
    & Record<'deleteApplication()void' | 'deleteApplication', {
      argsObj: StakingArgs['obj']['deleteApplication()void']
      argsTuple: StakingArgs['tuple']['deleteApplication()void']
      returns: StakingReturns['deleteApplication()void']
    }>
    & Record<'gas()void' | 'gas', {
      argsObj: StakingArgs['obj']['gas()void']
      argsTuple: StakingArgs['tuple']['gas()void']
      returns: StakingReturns['gas()void']
    }>
  /**
   * Defines the shape of the state of the application.
   */
  state: {
    global: {
      keys: {
        stakedAssetId: bigint
        rewardAssetId: bigint
        totalStaked: bigint
        rewardPerToken: bigint
        rewardRate: bigint
        startTime: bigint
        lastUpdateTime: bigint
        totalRewards: bigint
        accruedRewards: bigint
        aprBps: bigint
        rewardsExhausted: bigint
        rewardsPaid: bigint
        initialized: bigint
        adminAddress: string
        superAdminAddress: string
        numStakers: bigint
        contractVersion: bigint
        contractState: bigint
        masterRepoApp: bigint
        platformFeeBps: bigint
        platformFeesAccrued: bigint
      }
      maps: {}
    }
    box: {
      keys: {}
      maps: {
        stakers: Map<string, StakeInfoRecord>
      }
    }
  }
}

/**
 * Defines the possible abi call signatures.
 */
export type StakingSignatures = keyof StakingTypes['methods']
/**
 * Defines an object containing all relevant parameters for a single call to the contract.
 */
export type CallParams<TArgs> = Expand<
  Omit<AppClientMethodCallParams, 'method' | 'args' | 'onComplete'> &
    {
      /** The args for the ABI method call, either as an ordered array or an object */
      args: Expand<TArgs>
    }
>
/**
 * Maps a method signature from the Staking smart contract to the method's arguments in either tuple or struct form
 */
export type MethodArgs<TSignature extends StakingSignatures> = StakingTypes['methods'][TSignature]['argsObj' | 'argsTuple']
/**
 * Maps a method signature from the Staking smart contract to the method's return type
 */
export type MethodReturn<TSignature extends StakingSignatures> = StakingTypes['methods'][TSignature]['returns']

/**
 * Defines the shape of the keyed global state of the application.
 */
export type GlobalKeysState = StakingTypes['state']['global']['keys']

/**
 * Defines the shape of the keyed box state of the application.
 */
export type BoxKeysState = StakingTypes['state']['box']['keys']


/**
 * Defines supported create method params for this smart contract
 */
export type StakingCreateCallParams =
  | Expand<CallParams<StakingArgs['obj']['createApplication(address,uint64)void'] | StakingArgs['tuple']['createApplication(address,uint64)void']> & {method: 'createApplication'} & {onComplete?: OnApplicationComplete.NoOpOC} & CreateSchema>
  | Expand<CallParams<StakingArgs['obj']['createApplication(address,uint64)void'] | StakingArgs['tuple']['createApplication(address,uint64)void']> & {method: 'createApplication(address,uint64)void'} & {onComplete?: OnApplicationComplete.NoOpOC} & CreateSchema>
/**
 * Defines supported delete method params for this smart contract
 */
export type StakingDeleteCallParams =
  | Expand<CallParams<StakingArgs['obj']['deleteApplication()void'] | StakingArgs['tuple']['deleteApplication()void']> & {method: 'deleteApplication'}>
  | Expand<CallParams<StakingArgs['obj']['deleteApplication()void'] | StakingArgs['tuple']['deleteApplication()void']> & {method: 'deleteApplication()void'}>
/**
 * Defines arguments required for the deploy method.
 */
export type StakingDeployParams = Expand<Omit<AppFactoryDeployParams, 'createParams' | 'updateParams' | 'deleteParams'> & {
  /**
   * Create transaction parameters to use if a create needs to be issued as part of deployment; use `method` to define ABI call (if available) or leave out for a bare call (if available)
   */
  createParams?: StakingCreateCallParams
  /**
   * Delete transaction parameters to use if a create needs to be issued as part of deployment; use `method` to define ABI call (if available) or leave out for a bare call (if available)
   */
  deleteParams?: StakingDeleteCallParams
}>


/**
 * Exposes methods for constructing `AppClient` params objects for ABI calls to the Staking smart contract
 */
export abstract class StakingParamsFactory {
  /**
   * Gets available create ABI call param factories
   */
  static get create() {
    return {
      _resolveByMethod<TParams extends StakingCreateCallParams & {method: string}>(params: TParams) {
        switch(params.method) {
          case 'createApplication':
          case 'createApplication(address,uint64)void':
            return StakingParamsFactory.create.createApplication(params)
        }
        throw new Error(`Unknown ' + verb + ' method`)
      },

      /**
       * Constructs create ABI call params for the staking smart contract using the createApplication(address,uint64)void ABI method
       *
       * @param params Parameters for the call
       * @returns An `AppClientMethodCallParams` object for the call
       */
      createApplication(params: CallParams<StakingArgs['obj']['createApplication(address,uint64)void'] | StakingArgs['tuple']['createApplication(address,uint64)void']> & AppClientCompilationParams & {onComplete?: OnApplicationComplete.NoOpOC}): AppClientMethodCallParams & AppClientCompilationParams & {onComplete?: OnApplicationComplete.NoOpOC} {
        return {
          ...params,
          method: 'createApplication(address,uint64)void' as const,
          args: Array.isArray(params.args) ? params.args : [params.args.adminAddress, params.args.masterRepoApp],
        }
      },
    }
  }

  /**
   * Gets available delete ABI call param factories
   */
  static get delete() {
    return {
      _resolveByMethod<TParams extends StakingDeleteCallParams & {method: string}>(params: TParams) {
        switch(params.method) {
          case 'deleteApplication':
          case 'deleteApplication()void':
            return StakingParamsFactory.delete.deleteApplication(params)
        }
        throw new Error(`Unknown ' + verb + ' method`)
      },

      /**
       * Constructs delete ABI call params for the staking smart contract using the deleteApplication()void ABI method
       *
       * @param params Parameters for the call
       * @returns An `AppClientMethodCallParams` object for the call
       */
      deleteApplication(params: CallParams<StakingArgs['obj']['deleteApplication()void'] | StakingArgs['tuple']['deleteApplication()void']>): AppClientMethodCallParams {
        return {
          ...params,
          method: 'deleteApplication()void' as const,
          args: Array.isArray(params.args) ? params.args : [],
        }
      },
    }
  }

  /**
   * Constructs a no op call for the initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void ABI method
   *
   * @param params Parameters for the call
   * @returns An `AppClientMethodCallParams` object for the call
   */
  static initApplication(params: CallParams<StakingArgs['obj']['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void'] | StakingArgs['tuple']['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void']> & CallOnComplete): AppClientMethodCallParams & CallOnComplete {
    return {
      ...params,
      method: 'initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void' as const,
      args: Array.isArray(params.args) ? params.args : [params.args.stakedAssetId, params.args.rewardAssetId, params.args.rewardAmount, params.args.aprBps, params.args.startTime, params.args.duration, params.args.initialBalanceTxn],
    }
  }
  /**
   * Constructs a no op call for the fundRewards(axfer,uint64)void ABI method
   *
   * @param params Parameters for the call
   * @returns An `AppClientMethodCallParams` object for the call
   */
  static fundRewards(params: CallParams<StakingArgs['obj']['fundRewards(axfer,uint64)void'] | StakingArgs['tuple']['fundRewards(axfer,uint64)void']> & CallOnComplete): AppClientMethodCallParams & CallOnComplete {
    return {
      ...params,
      method: 'fundRewards(axfer,uint64)void' as const,
      args: Array.isArray(params.args) ? params.args : [params.args.rewardFundingTxn, params.args.rewardAmount],
    }
  }
  /**
   * Constructs a no op call for the fundMoreRewards(axfer,uint64)void ABI method
   *
   * @param params Parameters for the call
   * @returns An `AppClientMethodCallParams` object for the call
   */
  static fundMoreRewards(params: CallParams<StakingArgs['obj']['fundMoreRewards(axfer,uint64)void'] | StakingArgs['tuple']['fundMoreRewards(axfer,uint64)void']> & CallOnComplete): AppClientMethodCallParams & CallOnComplete {
    return {
      ...params,
      method: 'fundMoreRewards(axfer,uint64)void' as const,
      args: Array.isArray(params.args) ? params.args : [params.args.rewardFundingTxn, params.args.rewardAmount],
    }
  }
  /**
   * Constructs a no op call for the removeRewards()void ABI method
   *
   * @param params Parameters for the call
   * @returns An `AppClientMethodCallParams` object for the call
   */
  static removeRewards(params: CallParams<StakingArgs['obj']['removeRewards()void'] | StakingArgs['tuple']['removeRewards()void']> & CallOnComplete): AppClientMethodCallParams & CallOnComplete {
    return {
      ...params,
      method: 'removeRewards()void' as const,
      args: Array.isArray(params.args) ? params.args : [],
    }
  }
  /**
   * Constructs a no op call for the setContractActive()void ABI method
   *
   * @param params Parameters for the call
   * @returns An `AppClientMethodCallParams` object for the call
   */
  static setContractActive(params: CallParams<StakingArgs['obj']['setContractActive()void'] | StakingArgs['tuple']['setContractActive()void']> & CallOnComplete): AppClientMethodCallParams & CallOnComplete {
    return {
      ...params,
      method: 'setContractActive()void' as const,
      args: Array.isArray(params.args) ? params.args : [],
    }
  }
  /**
   * Constructs a no op call for the setContractInactive()void ABI method
   *
   * @param params Parameters for the call
   * @returns An `AppClientMethodCallParams` object for the call
   */
  static setContractInactive(params: CallParams<StakingArgs['obj']['setContractInactive()void'] | StakingArgs['tuple']['setContractInactive()void']> & CallOnComplete): AppClientMethodCallParams & CallOnComplete {
    return {
      ...params,
      method: 'setContractInactive()void' as const,
      args: Array.isArray(params.args) ? params.args : [],
    }
  }
  /**
   * Constructs a no op call for the updateAdminAddress(address)void ABI method
   *
   * @param params Parameters for the call
   * @returns An `AppClientMethodCallParams` object for the call
   */
  static updateAdminAddress(params: CallParams<StakingArgs['obj']['updateAdminAddress(address)void'] | StakingArgs['tuple']['updateAdminAddress(address)void']> & CallOnComplete): AppClientMethodCallParams & CallOnComplete {
    return {
      ...params,
      method: 'updateAdminAddress(address)void' as const,
      args: Array.isArray(params.args) ? params.args : [params.args.adminAddress],
    }
  }
  /**
   * Constructs a no op call for the updateSuperAdminAddress(address)void ABI method
   *
   * @param params Parameters for the call
   * @returns An `AppClientMethodCallParams` object for the call
   */
  static updateSuperAdminAddress(params: CallParams<StakingArgs['obj']['updateSuperAdminAddress(address)void'] | StakingArgs['tuple']['updateSuperAdminAddress(address)void']> & CallOnComplete): AppClientMethodCallParams & CallOnComplete {
    return {
      ...params,
      method: 'updateSuperAdminAddress(address)void' as const,
      args: Array.isArray(params.args) ? params.args : [params.args.superAdminAddress],
    }
  }
  /**
   * Constructs a no op call for the withdrawPlatformFees(address)void ABI method
   *
   * @param params Parameters for the call
   * @returns An `AppClientMethodCallParams` object for the call
   */
  static withdrawPlatformFees(params: CallParams<StakingArgs['obj']['withdrawPlatformFees(address)void'] | StakingArgs['tuple']['withdrawPlatformFees(address)void']> & CallOnComplete): AppClientMethodCallParams & CallOnComplete {
    return {
      ...params,
      method: 'withdrawPlatformFees(address)void' as const,
      args: Array.isArray(params.args) ? params.args : [params.args.receiver],
    }
  }
  /**
   * Constructs a no op call for the emergencyWithdrawAsset(uint64,uint64,address)void ABI method
   *
   * @param params Parameters for the call
   * @returns An `AppClientMethodCallParams` object for the call
   */
  static emergencyWithdrawAsset(params: CallParams<StakingArgs['obj']['emergencyWithdrawAsset(uint64,uint64,address)void'] | StakingArgs['tuple']['emergencyWithdrawAsset(uint64,uint64,address)void']> & CallOnComplete): AppClientMethodCallParams & CallOnComplete {
    return {
      ...params,
      method: 'emergencyWithdrawAsset(uint64,uint64,address)void' as const,
      args: Array.isArray(params.args) ? params.args : [params.args.assetId, params.args.amount, params.args.receiver],
    }
  }
  /**
   * Constructs a no op call for the stake(axfer,uint64,pay)void ABI method
   *
   * @param params Parameters for the call
   * @returns An `AppClientMethodCallParams` object for the call
   */
  static stake(params: CallParams<StakingArgs['obj']['stake(axfer,uint64,pay)void'] | StakingArgs['tuple']['stake(axfer,uint64,pay)void']> & CallOnComplete): AppClientMethodCallParams & CallOnComplete {
    return {
      ...params,
      method: 'stake(axfer,uint64,pay)void' as const,
      args: Array.isArray(params.args) ? params.args : [params.args.stakeTxn, params.args.quantity, params.args.mbrTxn],
    }
  }
  /**
   * Constructs a no op call for the claimRewards()void ABI method
   *
   * @param params Parameters for the call
   * @returns An `AppClientMethodCallParams` object for the call
   */
  static claimRewards(params: CallParams<StakingArgs['obj']['claimRewards()void'] | StakingArgs['tuple']['claimRewards()void']> & CallOnComplete): AppClientMethodCallParams & CallOnComplete {
    return {
      ...params,
      method: 'claimRewards()void' as const,
      args: Array.isArray(params.args) ? params.args : [],
    }
  }
  /**
   * Constructs a no op call for the unstake(uint64)void ABI method
   *
   * @param params Parameters for the call
   * @returns An `AppClientMethodCallParams` object for the call
   */
  static unstake(params: CallParams<StakingArgs['obj']['unstake(uint64)void'] | StakingArgs['tuple']['unstake(uint64)void']> & CallOnComplete): AppClientMethodCallParams & CallOnComplete {
    return {
      ...params,
      method: 'unstake(uint64)void' as const,
      args: Array.isArray(params.args) ? params.args : [params.args.quantity],
    }
  }
  /**
   * Constructs a no op call for the gas()void ABI method
   *
   * @param params Parameters for the call
   * @returns An `AppClientMethodCallParams` object for the call
   */
  static gas(params: CallParams<StakingArgs['obj']['gas()void'] | StakingArgs['tuple']['gas()void']> & CallOnComplete): AppClientMethodCallParams & CallOnComplete {
    return {
      ...params,
      method: 'gas()void' as const,
      args: Array.isArray(params.args) ? params.args : [],
    }
  }
}

/**
 * A factory to create and deploy one or more instance of the staking smart contract and to create one or more app clients to interact with those (or other) app instances
 */
export class StakingFactory {
  /**
   * The underlying `AppFactory` for when you want to have more flexibility
   */
  public readonly appFactory: _AppFactory

  /**
   * Creates a new instance of `StakingFactory`
   *
   * @param params The parameters to initialise the app factory with
   */
  constructor(params: Omit<AppFactoryParams, 'appSpec'>) {
    this.appFactory = new _AppFactory({
      ...params,
      appSpec: APP_SPEC,
    })
  }
  
  /** The name of the app (from the ARC-32 / ARC-56 app spec or override). */
  public get appName() {
    return this.appFactory.appName
  }
  
  /** The ARC-56 app spec being used */
  get appSpec() {
    return APP_SPEC
  }
  
  /** A reference to the underlying `AlgorandClient` this app factory is using. */
  public get algorand(): AlgorandClient {
    return this.appFactory.algorand
  }
  
  /**
   * Returns a new `AppClient` client for an app instance of the given ID.
   *
   * Automatically populates appName, defaultSender and source maps from the factory
   * if not specified in the params.
   * @param params The parameters to create the app client
   * @returns The `AppClient`
   */
  public getAppClientById(params: AppFactoryAppClientParams) {
    return new StakingClient(this.appFactory.getAppClientById(params))
  }
  
  /**
   * Returns a new `AppClient` client, resolving the app by creator address and name
   * using AlgoKit app deployment semantics (i.e. looking for the app creation transaction note).
   *
   * Automatically populates appName, defaultSender and source maps from the factory
   * if not specified in the params.
   * @param params The parameters to create the app client
   * @returns The `AppClient`
   */
  public async getAppClientByCreatorAndName(
    params: AppFactoryResolveAppClientByCreatorAndNameParams,
  ) {
    return new StakingClient(await this.appFactory.getAppClientByCreatorAndName(params))
  }

  /**
   * Idempotently deploys the staking smart contract.
   *
   * @param params The arguments for the contract calls and any additional parameters for the call
   * @returns The deployment result
   */
  public async deploy(params: StakingDeployParams = {}) {
    const result = await this.appFactory.deploy({
      ...params,
      createParams: params.createParams?.method ? StakingParamsFactory.create._resolveByMethod(params.createParams) : params.createParams ? params.createParams as (StakingCreateCallParams & { args: Uint8Array[] }) : undefined,
      deleteParams: params.deleteParams?.method ? StakingParamsFactory.delete._resolveByMethod(params.deleteParams) : params.deleteParams ? params.deleteParams as (StakingDeleteCallParams & { args: Uint8Array[] }) : undefined,
    })
    return { result: result.result, appClient: new StakingClient(result.appClient) }
  }

  /**
   * Get parameters to create transactions (create and deploy related calls) for the current app. A good mental model for this is that these parameters represent a deferred transaction creation.
   */
  readonly params = {
    /**
     * Gets available create methods
     */
    create: {
      /**
       * Creates a new instance of the staking smart contract using the createApplication(address,uint64)void ABI method.
       *
       * @param params The params for the smart contract call
       * @returns The create params
       */
      createApplication: (params: CallParams<StakingArgs['obj']['createApplication(address,uint64)void'] | StakingArgs['tuple']['createApplication(address,uint64)void']> & AppClientCompilationParams & CreateSchema & {onComplete?: OnApplicationComplete.NoOpOC}) => {
        return this.appFactory.params.create(StakingParamsFactory.create.createApplication(params))
      },
    },

    /**
     * Gets available deployDelete methods
     */
    deployDelete: {
      /**
       * Deletes an existing instance of the staking smart contract using the deleteApplication()void ABI method.
       *
       * @param params The params for the smart contract call
       * @returns The deployDelete params
       */
      deleteApplication: (params: CallParams<StakingArgs['obj']['deleteApplication()void'] | StakingArgs['tuple']['deleteApplication()void']> = {args: []}) => {
        return this.appFactory.params.deployDelete(StakingParamsFactory.delete.deleteApplication(params))
      },
    },

  }

  /**
   * Create transactions for the current app
   */
  readonly createTransaction = {
    /**
     * Gets available create methods
     */
    create: {
      /**
       * Creates a new instance of the staking smart contract using the createApplication(address,uint64)void ABI method.
       *
       * @param params The params for the smart contract call
       * @returns The create transaction
       */
      createApplication: (params: CallParams<StakingArgs['obj']['createApplication(address,uint64)void'] | StakingArgs['tuple']['createApplication(address,uint64)void']> & AppClientCompilationParams & CreateSchema & {onComplete?: OnApplicationComplete.NoOpOC}) => {
        return this.appFactory.createTransaction.create(StakingParamsFactory.create.createApplication(params))
      },
    },

  }

  /**
   * Send calls to the current app
   */
  readonly send = {
    /**
     * Gets available create methods
     */
    create: {
      /**
       * Creates a new instance of the staking smart contract using an ABI method call using the createApplication(address,uint64)void ABI method.
       *
       * @param params The params for the smart contract call
       * @returns The create result
       */
      createApplication: async (params: CallParams<StakingArgs['obj']['createApplication(address,uint64)void'] | StakingArgs['tuple']['createApplication(address,uint64)void']> & AppClientCompilationParams & CreateSchema & SendParams & {onComplete?: OnApplicationComplete.NoOpOC}) => {
        const result = await this.appFactory.send.create(StakingParamsFactory.create.createApplication(params))
        return { result: { ...result.result, return: result.result.return as unknown as (undefined | StakingReturns['createApplication(address,uint64)void']) }, appClient: new StakingClient(result.appClient) }
      },
    },

  }

}
/**
 * A client to make calls to the staking smart contract
 */
export class StakingClient {
  /**
   * The underlying `AppClient` for when you want to have more flexibility
   */
  public readonly appClient: _AppClient

  /**
   * Creates a new instance of `StakingClient`
   *
   * @param appClient An `AppClient` instance which has been created with the Staking app spec
   */
  constructor(appClient: _AppClient)
  /**
   * Creates a new instance of `StakingClient`
   *
   * @param params The parameters to initialise the app client with
   */
  constructor(params: Omit<AppClientParams, 'appSpec'>)
  constructor(appClientOrParams: _AppClient | Omit<AppClientParams, 'appSpec'>) {
    this.appClient = appClientOrParams instanceof _AppClient ? appClientOrParams : new _AppClient({
      ...appClientOrParams,
      appSpec: APP_SPEC,
    })
  }

  /**
   * Returns a new `StakingClient` client, resolving the app by creator address and name
   * using AlgoKit app deployment semantics (i.e. looking for the app creation transaction note).
   * @param params The parameters to create the app client
   */
  public static async fromCreatorAndName(params: Omit<ResolveAppClientByCreatorAndName, 'appSpec'>): Promise<StakingClient> {
    return new StakingClient(await _AppClient.fromCreatorAndName({...params, appSpec: APP_SPEC}))
  }
  
  /**
   * Returns an `StakingClient` instance for the current network based on
   * pre-determined network-specific app IDs specified in the ARC-56 app spec.
   *
   * If no IDs are in the app spec or the network isn't recognised, an error is thrown.
   * @param params The parameters to create the app client
   */
  static async fromNetwork(
    params: Omit<ResolveAppClientByNetwork, 'appSpec'>
  ): Promise<StakingClient> {
    return new StakingClient(await _AppClient.fromNetwork({...params, appSpec: APP_SPEC}))
  }
  
  /** The ID of the app instance this client is linked to. */
  public get appId() {
    return this.appClient.appId
  }
  
  /** The app address of the app instance this client is linked to. */
  public get appAddress() {
    return this.appClient.appAddress
  }
  
  /** The name of the app. */
  public get appName() {
    return this.appClient.appName
  }
  
  /** The ARC-56 app spec being used */
  public get appSpec() {
    return this.appClient.appSpec
  }
  
  /** A reference to the underlying `AlgorandClient` this app client is using. */
  public get algorand(): AlgorandClient {
    return this.appClient.algorand
  }

  /**
   * Get parameters to create transactions for the current app. A good mental model for this is that these parameters represent a deferred transaction creation.
   */
  readonly params = {
    /**
     * Gets available delete methods
     */
    delete: {
      /**
       * Deletes an existing instance of the staking smart contract using the `deleteApplication()void` ABI method.
       *
       * @param params The params for the smart contract call
       * @returns The delete params
       */
      deleteApplication: (params: CallParams<StakingArgs['obj']['deleteApplication()void'] | StakingArgs['tuple']['deleteApplication()void']> = {args: []}) => {
        return this.appClient.params.delete(StakingParamsFactory.delete.deleteApplication(params))
      },

    },

    /**
     * Makes a clear_state call to an existing instance of the staking smart contract.
     *
     * @param params The params for the bare (raw) call
     * @returns The clearState result
     */
    clearState: (params?: Expand<AppClientBareCallParams>) => {
      return this.appClient.params.bare.clearState(params)
    },

    /**
     * Makes a call to the staking smart contract using the `initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call params
     */
    initApplication: (params: CallParams<StakingArgs['obj']['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void'] | StakingArgs['tuple']['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.params.call(StakingParamsFactory.initApplication(params))
    },

    /**
     * Makes a call to the staking smart contract using the `fundRewards(axfer,uint64)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call params
     */
    fundRewards: (params: CallParams<StakingArgs['obj']['fundRewards(axfer,uint64)void'] | StakingArgs['tuple']['fundRewards(axfer,uint64)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.params.call(StakingParamsFactory.fundRewards(params))
    },

    /**
     * Makes a call to the staking smart contract using the `fundMoreRewards(axfer,uint64)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call params
     */
    fundMoreRewards: (params: CallParams<StakingArgs['obj']['fundMoreRewards(axfer,uint64)void'] | StakingArgs['tuple']['fundMoreRewards(axfer,uint64)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.params.call(StakingParamsFactory.fundMoreRewards(params))
    },

    /**
     * Makes a call to the staking smart contract using the `removeRewards()void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call params
     */
    removeRewards: (params: CallParams<StakingArgs['obj']['removeRewards()void'] | StakingArgs['tuple']['removeRewards()void']> & {onComplete?: OnApplicationComplete.NoOpOC} = {args: []}) => {
      return this.appClient.params.call(StakingParamsFactory.removeRewards(params))
    },

    /**
     * Makes a call to the staking smart contract using the `setContractActive()void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call params
     */
    setContractActive: (params: CallParams<StakingArgs['obj']['setContractActive()void'] | StakingArgs['tuple']['setContractActive()void']> & {onComplete?: OnApplicationComplete.NoOpOC} = {args: []}) => {
      return this.appClient.params.call(StakingParamsFactory.setContractActive(params))
    },

    /**
     * Makes a call to the staking smart contract using the `setContractInactive()void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call params
     */
    setContractInactive: (params: CallParams<StakingArgs['obj']['setContractInactive()void'] | StakingArgs['tuple']['setContractInactive()void']> & {onComplete?: OnApplicationComplete.NoOpOC} = {args: []}) => {
      return this.appClient.params.call(StakingParamsFactory.setContractInactive(params))
    },

    /**
     * Makes a call to the staking smart contract using the `updateAdminAddress(address)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call params
     */
    updateAdminAddress: (params: CallParams<StakingArgs['obj']['updateAdminAddress(address)void'] | StakingArgs['tuple']['updateAdminAddress(address)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.params.call(StakingParamsFactory.updateAdminAddress(params))
    },

    /**
     * Makes a call to the staking smart contract using the `updateSuperAdminAddress(address)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call params
     */
    updateSuperAdminAddress: (params: CallParams<StakingArgs['obj']['updateSuperAdminAddress(address)void'] | StakingArgs['tuple']['updateSuperAdminAddress(address)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.params.call(StakingParamsFactory.updateSuperAdminAddress(params))
    },

    /**
     * Makes a call to the staking smart contract using the `withdrawPlatformFees(address)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call params
     */
    withdrawPlatformFees: (params: CallParams<StakingArgs['obj']['withdrawPlatformFees(address)void'] | StakingArgs['tuple']['withdrawPlatformFees(address)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.params.call(StakingParamsFactory.withdrawPlatformFees(params))
    },

    /**
     * Makes a call to the staking smart contract using the `emergencyWithdrawAsset(uint64,uint64,address)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call params
     */
    emergencyWithdrawAsset: (params: CallParams<StakingArgs['obj']['emergencyWithdrawAsset(uint64,uint64,address)void'] | StakingArgs['tuple']['emergencyWithdrawAsset(uint64,uint64,address)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.params.call(StakingParamsFactory.emergencyWithdrawAsset(params))
    },

    /**
     * Makes a call to the staking smart contract using the `stake(axfer,uint64,pay)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call params
     */
    stake: (params: CallParams<StakingArgs['obj']['stake(axfer,uint64,pay)void'] | StakingArgs['tuple']['stake(axfer,uint64,pay)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.params.call(StakingParamsFactory.stake(params))
    },

    /**
     * Makes a call to the staking smart contract using the `claimRewards()void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call params
     */
    claimRewards: (params: CallParams<StakingArgs['obj']['claimRewards()void'] | StakingArgs['tuple']['claimRewards()void']> & {onComplete?: OnApplicationComplete.NoOpOC} = {args: []}) => {
      return this.appClient.params.call(StakingParamsFactory.claimRewards(params))
    },

    /**
     * Makes a call to the staking smart contract using the `unstake(uint64)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call params
     */
    unstake: (params: CallParams<StakingArgs['obj']['unstake(uint64)void'] | StakingArgs['tuple']['unstake(uint64)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.params.call(StakingParamsFactory.unstake(params))
    },

    /**
     * Makes a call to the staking smart contract using the `gas()void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call params
     */
    gas: (params: CallParams<StakingArgs['obj']['gas()void'] | StakingArgs['tuple']['gas()void']> & {onComplete?: OnApplicationComplete.NoOpOC} = {args: []}) => {
      return this.appClient.params.call(StakingParamsFactory.gas(params))
    },

  }

  /**
   * Create transactions for the current app
   */
  readonly createTransaction = {
    /**
     * Gets available delete methods
     */
    delete: {
      /**
       * Deletes an existing instance of the staking smart contract using the `deleteApplication()void` ABI method.
       *
       * @param params The params for the smart contract call
       * @returns The delete transaction
       */
      deleteApplication: (params: CallParams<StakingArgs['obj']['deleteApplication()void'] | StakingArgs['tuple']['deleteApplication()void']> = {args: []}) => {
        return this.appClient.createTransaction.delete(StakingParamsFactory.delete.deleteApplication(params))
      },

    },

    /**
     * Makes a clear_state call to an existing instance of the staking smart contract.
     *
     * @param params The params for the bare (raw) call
     * @returns The clearState result
     */
    clearState: (params?: Expand<AppClientBareCallParams>) => {
      return this.appClient.createTransaction.bare.clearState(params)
    },

    /**
     * Makes a call to the staking smart contract using the `initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call transaction
     */
    initApplication: (params: CallParams<StakingArgs['obj']['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void'] | StakingArgs['tuple']['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.createTransaction.call(StakingParamsFactory.initApplication(params))
    },

    /**
     * Makes a call to the staking smart contract using the `fundRewards(axfer,uint64)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call transaction
     */
    fundRewards: (params: CallParams<StakingArgs['obj']['fundRewards(axfer,uint64)void'] | StakingArgs['tuple']['fundRewards(axfer,uint64)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.createTransaction.call(StakingParamsFactory.fundRewards(params))
    },

    /**
     * Makes a call to the staking smart contract using the `fundMoreRewards(axfer,uint64)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call transaction
     */
    fundMoreRewards: (params: CallParams<StakingArgs['obj']['fundMoreRewards(axfer,uint64)void'] | StakingArgs['tuple']['fundMoreRewards(axfer,uint64)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.createTransaction.call(StakingParamsFactory.fundMoreRewards(params))
    },

    /**
     * Makes a call to the staking smart contract using the `removeRewards()void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call transaction
     */
    removeRewards: (params: CallParams<StakingArgs['obj']['removeRewards()void'] | StakingArgs['tuple']['removeRewards()void']> & {onComplete?: OnApplicationComplete.NoOpOC} = {args: []}) => {
      return this.appClient.createTransaction.call(StakingParamsFactory.removeRewards(params))
    },

    /**
     * Makes a call to the staking smart contract using the `setContractActive()void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call transaction
     */
    setContractActive: (params: CallParams<StakingArgs['obj']['setContractActive()void'] | StakingArgs['tuple']['setContractActive()void']> & {onComplete?: OnApplicationComplete.NoOpOC} = {args: []}) => {
      return this.appClient.createTransaction.call(StakingParamsFactory.setContractActive(params))
    },

    /**
     * Makes a call to the staking smart contract using the `setContractInactive()void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call transaction
     */
    setContractInactive: (params: CallParams<StakingArgs['obj']['setContractInactive()void'] | StakingArgs['tuple']['setContractInactive()void']> & {onComplete?: OnApplicationComplete.NoOpOC} = {args: []}) => {
      return this.appClient.createTransaction.call(StakingParamsFactory.setContractInactive(params))
    },

    /**
     * Makes a call to the staking smart contract using the `updateAdminAddress(address)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call transaction
     */
    updateAdminAddress: (params: CallParams<StakingArgs['obj']['updateAdminAddress(address)void'] | StakingArgs['tuple']['updateAdminAddress(address)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.createTransaction.call(StakingParamsFactory.updateAdminAddress(params))
    },

    /**
     * Makes a call to the staking smart contract using the `updateSuperAdminAddress(address)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call transaction
     */
    updateSuperAdminAddress: (params: CallParams<StakingArgs['obj']['updateSuperAdminAddress(address)void'] | StakingArgs['tuple']['updateSuperAdminAddress(address)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.createTransaction.call(StakingParamsFactory.updateSuperAdminAddress(params))
    },

    /**
     * Makes a call to the staking smart contract using the `withdrawPlatformFees(address)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call transaction
     */
    withdrawPlatformFees: (params: CallParams<StakingArgs['obj']['withdrawPlatformFees(address)void'] | StakingArgs['tuple']['withdrawPlatformFees(address)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.createTransaction.call(StakingParamsFactory.withdrawPlatformFees(params))
    },

    /**
     * Makes a call to the staking smart contract using the `emergencyWithdrawAsset(uint64,uint64,address)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call transaction
     */
    emergencyWithdrawAsset: (params: CallParams<StakingArgs['obj']['emergencyWithdrawAsset(uint64,uint64,address)void'] | StakingArgs['tuple']['emergencyWithdrawAsset(uint64,uint64,address)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.createTransaction.call(StakingParamsFactory.emergencyWithdrawAsset(params))
    },

    /**
     * Makes a call to the staking smart contract using the `stake(axfer,uint64,pay)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call transaction
     */
    stake: (params: CallParams<StakingArgs['obj']['stake(axfer,uint64,pay)void'] | StakingArgs['tuple']['stake(axfer,uint64,pay)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.createTransaction.call(StakingParamsFactory.stake(params))
    },

    /**
     * Makes a call to the staking smart contract using the `claimRewards()void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call transaction
     */
    claimRewards: (params: CallParams<StakingArgs['obj']['claimRewards()void'] | StakingArgs['tuple']['claimRewards()void']> & {onComplete?: OnApplicationComplete.NoOpOC} = {args: []}) => {
      return this.appClient.createTransaction.call(StakingParamsFactory.claimRewards(params))
    },

    /**
     * Makes a call to the staking smart contract using the `unstake(uint64)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call transaction
     */
    unstake: (params: CallParams<StakingArgs['obj']['unstake(uint64)void'] | StakingArgs['tuple']['unstake(uint64)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      return this.appClient.createTransaction.call(StakingParamsFactory.unstake(params))
    },

    /**
     * Makes a call to the staking smart contract using the `gas()void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call transaction
     */
    gas: (params: CallParams<StakingArgs['obj']['gas()void'] | StakingArgs['tuple']['gas()void']> & {onComplete?: OnApplicationComplete.NoOpOC} = {args: []}) => {
      return this.appClient.createTransaction.call(StakingParamsFactory.gas(params))
    },

  }

  /**
   * Send calls to the current app
   */
  readonly send = {
    /**
     * Gets available delete methods
     */
    delete: {
      /**
       * Deletes an existing instance of the staking smart contract using the `deleteApplication()void` ABI method.
       *
       * @param params The params for the smart contract call
       * @returns The delete result
       */
      deleteApplication: async (params: CallParams<StakingArgs['obj']['deleteApplication()void'] | StakingArgs['tuple']['deleteApplication()void']> & SendParams = {args: []}) => {
        const result = await this.appClient.send.delete(StakingParamsFactory.delete.deleteApplication(params))
        return {...result, return: result.return as unknown as (undefined | StakingReturns['deleteApplication()void'])}
      },

    },

    /**
     * Makes a clear_state call to an existing instance of the staking smart contract.
     *
     * @param params The params for the bare (raw) call
     * @returns The clearState result
     */
    clearState: (params?: Expand<AppClientBareCallParams & SendParams>) => {
      return this.appClient.send.bare.clearState(params)
    },

    /**
     * Makes a call to the staking smart contract using the `initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call result
     */
    initApplication: async (params: CallParams<StakingArgs['obj']['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void'] | StakingArgs['tuple']['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void']> & SendParams & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      const result = await this.appClient.send.call(StakingParamsFactory.initApplication(params))
      return {...result, return: result.return as unknown as (undefined | StakingReturns['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void'])}
    },

    /**
     * Makes a call to the staking smart contract using the `fundRewards(axfer,uint64)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call result
     */
    fundRewards: async (params: CallParams<StakingArgs['obj']['fundRewards(axfer,uint64)void'] | StakingArgs['tuple']['fundRewards(axfer,uint64)void']> & SendParams & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      const result = await this.appClient.send.call(StakingParamsFactory.fundRewards(params))
      return {...result, return: result.return as unknown as (undefined | StakingReturns['fundRewards(axfer,uint64)void'])}
    },

    /**
     * Makes a call to the staking smart contract using the `fundMoreRewards(axfer,uint64)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call result
     */
    fundMoreRewards: async (params: CallParams<StakingArgs['obj']['fundMoreRewards(axfer,uint64)void'] | StakingArgs['tuple']['fundMoreRewards(axfer,uint64)void']> & SendParams & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      const result = await this.appClient.send.call(StakingParamsFactory.fundMoreRewards(params))
      return {...result, return: result.return as unknown as (undefined | StakingReturns['fundMoreRewards(axfer,uint64)void'])}
    },

    /**
     * Makes a call to the staking smart contract using the `removeRewards()void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call result
     */
    removeRewards: async (params: CallParams<StakingArgs['obj']['removeRewards()void'] | StakingArgs['tuple']['removeRewards()void']> & SendParams & {onComplete?: OnApplicationComplete.NoOpOC} = {args: []}) => {
      const result = await this.appClient.send.call(StakingParamsFactory.removeRewards(params))
      return {...result, return: result.return as unknown as (undefined | StakingReturns['removeRewards()void'])}
    },

    /**
     * Makes a call to the staking smart contract using the `setContractActive()void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call result
     */
    setContractActive: async (params: CallParams<StakingArgs['obj']['setContractActive()void'] | StakingArgs['tuple']['setContractActive()void']> & SendParams & {onComplete?: OnApplicationComplete.NoOpOC} = {args: []}) => {
      const result = await this.appClient.send.call(StakingParamsFactory.setContractActive(params))
      return {...result, return: result.return as unknown as (undefined | StakingReturns['setContractActive()void'])}
    },

    /**
     * Makes a call to the staking smart contract using the `setContractInactive()void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call result
     */
    setContractInactive: async (params: CallParams<StakingArgs['obj']['setContractInactive()void'] | StakingArgs['tuple']['setContractInactive()void']> & SendParams & {onComplete?: OnApplicationComplete.NoOpOC} = {args: []}) => {
      const result = await this.appClient.send.call(StakingParamsFactory.setContractInactive(params))
      return {...result, return: result.return as unknown as (undefined | StakingReturns['setContractInactive()void'])}
    },

    /**
     * Makes a call to the staking smart contract using the `updateAdminAddress(address)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call result
     */
    updateAdminAddress: async (params: CallParams<StakingArgs['obj']['updateAdminAddress(address)void'] | StakingArgs['tuple']['updateAdminAddress(address)void']> & SendParams & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      const result = await this.appClient.send.call(StakingParamsFactory.updateAdminAddress(params))
      return {...result, return: result.return as unknown as (undefined | StakingReturns['updateAdminAddress(address)void'])}
    },

    /**
     * Makes a call to the staking smart contract using the `updateSuperAdminAddress(address)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call result
     */
    updateSuperAdminAddress: async (params: CallParams<StakingArgs['obj']['updateSuperAdminAddress(address)void'] | StakingArgs['tuple']['updateSuperAdminAddress(address)void']> & SendParams & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      const result = await this.appClient.send.call(StakingParamsFactory.updateSuperAdminAddress(params))
      return {...result, return: result.return as unknown as (undefined | StakingReturns['updateSuperAdminAddress(address)void'])}
    },

    /**
     * Makes a call to the staking smart contract using the `withdrawPlatformFees(address)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call result
     */
    withdrawPlatformFees: async (params: CallParams<StakingArgs['obj']['withdrawPlatformFees(address)void'] | StakingArgs['tuple']['withdrawPlatformFees(address)void']> & SendParams & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      const result = await this.appClient.send.call(StakingParamsFactory.withdrawPlatformFees(params))
      return {...result, return: result.return as unknown as (undefined | StakingReturns['withdrawPlatformFees(address)void'])}
    },

    /**
     * Makes a call to the staking smart contract using the `emergencyWithdrawAsset(uint64,uint64,address)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call result
     */
    emergencyWithdrawAsset: async (params: CallParams<StakingArgs['obj']['emergencyWithdrawAsset(uint64,uint64,address)void'] | StakingArgs['tuple']['emergencyWithdrawAsset(uint64,uint64,address)void']> & SendParams & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      const result = await this.appClient.send.call(StakingParamsFactory.emergencyWithdrawAsset(params))
      return {...result, return: result.return as unknown as (undefined | StakingReturns['emergencyWithdrawAsset(uint64,uint64,address)void'])}
    },

    /**
     * Makes a call to the staking smart contract using the `stake(axfer,uint64,pay)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call result
     */
    stake: async (params: CallParams<StakingArgs['obj']['stake(axfer,uint64,pay)void'] | StakingArgs['tuple']['stake(axfer,uint64,pay)void']> & SendParams & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      const result = await this.appClient.send.call(StakingParamsFactory.stake(params))
      return {...result, return: result.return as unknown as (undefined | StakingReturns['stake(axfer,uint64,pay)void'])}
    },

    /**
     * Makes a call to the staking smart contract using the `claimRewards()void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call result
     */
    claimRewards: async (params: CallParams<StakingArgs['obj']['claimRewards()void'] | StakingArgs['tuple']['claimRewards()void']> & SendParams & {onComplete?: OnApplicationComplete.NoOpOC} = {args: []}) => {
      const result = await this.appClient.send.call(StakingParamsFactory.claimRewards(params))
      return {...result, return: result.return as unknown as (undefined | StakingReturns['claimRewards()void'])}
    },

    /**
     * Makes a call to the staking smart contract using the `unstake(uint64)void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call result
     */
    unstake: async (params: CallParams<StakingArgs['obj']['unstake(uint64)void'] | StakingArgs['tuple']['unstake(uint64)void']> & SendParams & {onComplete?: OnApplicationComplete.NoOpOC}) => {
      const result = await this.appClient.send.call(StakingParamsFactory.unstake(params))
      return {...result, return: result.return as unknown as (undefined | StakingReturns['unstake(uint64)void'])}
    },

    /**
     * Makes a call to the staking smart contract using the `gas()void` ABI method.
     *
     * @param params The params for the smart contract call
     * @returns The call result
     */
    gas: async (params: CallParams<StakingArgs['obj']['gas()void'] | StakingArgs['tuple']['gas()void']> & SendParams & {onComplete?: OnApplicationComplete.NoOpOC} = {args: []}) => {
      const result = await this.appClient.send.call(StakingParamsFactory.gas(params))
      return {...result, return: result.return as unknown as (undefined | StakingReturns['gas()void'])}
    },

  }

  /**
   * Clone this app client with different params
   *
   * @param params The params to use for the the cloned app client. Omit a param to keep the original value. Set a param to override the original value. Setting to undefined will clear the original value.
   * @returns A new app client with the altered params
   */
  public clone(params: CloneAppClientParams) {
    return new StakingClient(this.appClient.clone(params))
  }

  /**
   * Methods to access state for the current staking app
   */
  state = {
    /**
     * Methods to access global state for the current staking app
     */
    global: {
      /**
       * Get all current keyed values from global state
       */
      getAll: async (): Promise<Partial<Expand<GlobalKeysState>>> => {
        const result = await this.appClient.state.global.getAll()
        return {
          stakedAssetId: result.staked_asset_id,
          rewardAssetId: result.reward_asset_id,
          totalStaked: result.total_staked,
          rewardPerToken: result.reward_per_token,
          rewardRate: result.reward_rate,
          startTime: result.start_time,
          lastUpdateTime: result.last_update_time,
          totalRewards: result.total_rewards,
          accruedRewards: result.accrued_rewards,
          aprBps: result.apr_bps,
          rewardsExhausted: result.rewards_exhausted,
          rewardsPaid: result.rewards_paid,
          initialized: result.initialized,
          adminAddress: result.admin_address,
          superAdminAddress: result.super_admin_address,
          numStakers: result.num_stakers,
          contractVersion: result.contract_version,
          contractState: result.contract_state,
          masterRepoApp: result.master_repo_app,
          platformFeeBps: result.platform_fee_bps,
          platformFeesAccrued: result.platform_fees_accrued,
        }
      },
      /**
       * Get the current value of the staked_asset_id key in global state
       */
      stakedAssetId: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("staked_asset_id")) as bigint | undefined },
      /**
       * Get the current value of the reward_asset_id key in global state
       */
      rewardAssetId: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("reward_asset_id")) as bigint | undefined },
      /**
       * Get the current value of the total_staked key in global state
       */
      totalStaked: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("total_staked")) as bigint | undefined },
      /**
       * Get the current value of the reward_per_token key in global state
       */
      rewardPerToken: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("reward_per_token")) as bigint | undefined },
      /**
       * Get the current value of the reward_rate key in global state
       */
      rewardRate: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("reward_rate")) as bigint | undefined },
      /**
       * Get the current value of the start_time key in global state
       */
      startTime: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("start_time")) as bigint | undefined },
      /**
       * Get the current value of the last_update_time key in global state
       */
      lastUpdateTime: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("last_update_time")) as bigint | undefined },
      /**
       * Get the current value of the total_rewards key in global state
       */
      totalRewards: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("total_rewards")) as bigint | undefined },
      /**
       * Get the current value of the accrued_rewards key in global state
       */
      accruedRewards: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("accrued_rewards")) as bigint | undefined },
      /**
       * Get the current value of the apr_bps key in global state
       */
      aprBps: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("apr_bps")) as bigint | undefined },
      /**
       * Get the current value of the rewards_exhausted key in global state
       */
      rewardsExhausted: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("rewards_exhausted")) as bigint | undefined },
      /**
       * Get the current value of the rewards_paid key in global state
       */
      rewardsPaid: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("rewards_paid")) as bigint | undefined },
      /**
       * Get the current value of the initialized key in global state
       */
      initialized: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("initialized")) as bigint | undefined },
      /**
       * Get the current value of the admin_address key in global state
       */
      adminAddress: async (): Promise<string | undefined> => { return (await this.appClient.state.global.getValue("admin_address")) as string | undefined },
      /**
       * Get the current value of the super_admin_address key in global state
       */
      superAdminAddress: async (): Promise<string | undefined> => { return (await this.appClient.state.global.getValue("super_admin_address")) as string | undefined },
      /**
       * Get the current value of the num_stakers key in global state
       */
      numStakers: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("num_stakers")) as bigint | undefined },
      /**
       * Get the current value of the contract_version key in global state
       */
      contractVersion: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("contract_version")) as bigint | undefined },
      /**
       * Get the current value of the contract_state key in global state
       */
      contractState: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("contract_state")) as bigint | undefined },
      /**
       * Get the current value of the master_repo_app key in global state
       */
      masterRepoApp: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("master_repo_app")) as bigint | undefined },
      /**
       * Get the current value of the platform_fee_bps key in global state
       */
      platformFeeBps: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("platform_fee_bps")) as bigint | undefined },
      /**
       * Get the current value of the platform_fees_accrued key in global state
       */
      platformFeesAccrued: async (): Promise<bigint | undefined> => { return (await this.appClient.state.global.getValue("platform_fees_accrued")) as bigint | undefined },
    },
    /**
     * Methods to access box state for the current staking app
     */
    box: {
      /**
       * Get all current keyed values from box state
       */
      getAll: async (): Promise<Partial<Expand<BoxKeysState>>> => {
        const result = await this.appClient.state.box.getAll()
        return {
        }
      },
      /**
       * Get values from the stakers map in box state
       */
      stakers: {
        /**
         * Get all current values of the stakers map in box state
         */
        getMap: async (): Promise<Map<string, StakeInfoRecord>> => { return (await this.appClient.state.box.getMap("stakers")) as Map<string, StakeInfoRecord> },
        /**
         * Get a current value of the stakers map by key from box state
         */
        value: async (key: string): Promise<StakeInfoRecord | undefined> => { return await this.appClient.state.box.getMapValue("stakers", key) as StakeInfoRecord | undefined },
      },
    },
  }

  public newGroup(): StakingComposer {
    const client = this
    const composer = this.algorand.newGroup()
    let promiseChain:Promise<unknown> = Promise.resolve()
    const resultMappers: Array<undefined | ((x: ABIReturn | undefined) => any)> = []
    return {
      /**
       * Add a initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void method call against the staking contract
       */
      initApplication(params: CallParams<StakingArgs['obj']['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void'] | StakingArgs['tuple']['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) {
        promiseChain = promiseChain.then(async () => composer.addAppCallMethodCall(await client.params.initApplication(params)))
        resultMappers.push(undefined)
        return this
      },
      /**
       * Add a fundRewards(axfer,uint64)void method call against the staking contract
       */
      fundRewards(params: CallParams<StakingArgs['obj']['fundRewards(axfer,uint64)void'] | StakingArgs['tuple']['fundRewards(axfer,uint64)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) {
        promiseChain = promiseChain.then(async () => composer.addAppCallMethodCall(await client.params.fundRewards(params)))
        resultMappers.push(undefined)
        return this
      },
      /**
       * Add a fundMoreRewards(axfer,uint64)void method call against the staking contract
       */
      fundMoreRewards(params: CallParams<StakingArgs['obj']['fundMoreRewards(axfer,uint64)void'] | StakingArgs['tuple']['fundMoreRewards(axfer,uint64)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) {
        promiseChain = promiseChain.then(async () => composer.addAppCallMethodCall(await client.params.fundMoreRewards(params)))
        resultMappers.push(undefined)
        return this
      },
      /**
       * Add a removeRewards()void method call against the staking contract
       */
      removeRewards(params: CallParams<StakingArgs['obj']['removeRewards()void'] | StakingArgs['tuple']['removeRewards()void']> & {onComplete?: OnApplicationComplete.NoOpOC}) {
        promiseChain = promiseChain.then(async () => composer.addAppCallMethodCall(await client.params.removeRewards(params)))
        resultMappers.push(undefined)
        return this
      },
      /**
       * Add a setContractActive()void method call against the staking contract
       */
      setContractActive(params: CallParams<StakingArgs['obj']['setContractActive()void'] | StakingArgs['tuple']['setContractActive()void']> & {onComplete?: OnApplicationComplete.NoOpOC}) {
        promiseChain = promiseChain.then(async () => composer.addAppCallMethodCall(await client.params.setContractActive(params)))
        resultMappers.push(undefined)
        return this
      },
      /**
       * Add a setContractInactive()void method call against the staking contract
       */
      setContractInactive(params: CallParams<StakingArgs['obj']['setContractInactive()void'] | StakingArgs['tuple']['setContractInactive()void']> & {onComplete?: OnApplicationComplete.NoOpOC}) {
        promiseChain = promiseChain.then(async () => composer.addAppCallMethodCall(await client.params.setContractInactive(params)))
        resultMappers.push(undefined)
        return this
      },
      /**
       * Add a updateAdminAddress(address)void method call against the staking contract
       */
      updateAdminAddress(params: CallParams<StakingArgs['obj']['updateAdminAddress(address)void'] | StakingArgs['tuple']['updateAdminAddress(address)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) {
        promiseChain = promiseChain.then(async () => composer.addAppCallMethodCall(await client.params.updateAdminAddress(params)))
        resultMappers.push(undefined)
        return this
      },
      /**
       * Add a updateSuperAdminAddress(address)void method call against the staking contract
       */
      updateSuperAdminAddress(params: CallParams<StakingArgs['obj']['updateSuperAdminAddress(address)void'] | StakingArgs['tuple']['updateSuperAdminAddress(address)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) {
        promiseChain = promiseChain.then(async () => composer.addAppCallMethodCall(await client.params.updateSuperAdminAddress(params)))
        resultMappers.push(undefined)
        return this
      },
      /**
       * Add a withdrawPlatformFees(address)void method call against the staking contract
       */
      withdrawPlatformFees(params: CallParams<StakingArgs['obj']['withdrawPlatformFees(address)void'] | StakingArgs['tuple']['withdrawPlatformFees(address)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) {
        promiseChain = promiseChain.then(async () => composer.addAppCallMethodCall(await client.params.withdrawPlatformFees(params)))
        resultMappers.push(undefined)
        return this
      },
      /**
       * Add a emergencyWithdrawAsset(uint64,uint64,address)void method call against the staking contract
       */
      emergencyWithdrawAsset(params: CallParams<StakingArgs['obj']['emergencyWithdrawAsset(uint64,uint64,address)void'] | StakingArgs['tuple']['emergencyWithdrawAsset(uint64,uint64,address)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) {
        promiseChain = promiseChain.then(async () => composer.addAppCallMethodCall(await client.params.emergencyWithdrawAsset(params)))
        resultMappers.push(undefined)
        return this
      },
      /**
       * Add a stake(axfer,uint64,pay)void method call against the staking contract
       */
      stake(params: CallParams<StakingArgs['obj']['stake(axfer,uint64,pay)void'] | StakingArgs['tuple']['stake(axfer,uint64,pay)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) {
        promiseChain = promiseChain.then(async () => composer.addAppCallMethodCall(await client.params.stake(params)))
        resultMappers.push(undefined)
        return this
      },
      /**
       * Add a claimRewards()void method call against the staking contract
       */
      claimRewards(params: CallParams<StakingArgs['obj']['claimRewards()void'] | StakingArgs['tuple']['claimRewards()void']> & {onComplete?: OnApplicationComplete.NoOpOC}) {
        promiseChain = promiseChain.then(async () => composer.addAppCallMethodCall(await client.params.claimRewards(params)))
        resultMappers.push(undefined)
        return this
      },
      /**
       * Add a unstake(uint64)void method call against the staking contract
       */
      unstake(params: CallParams<StakingArgs['obj']['unstake(uint64)void'] | StakingArgs['tuple']['unstake(uint64)void']> & {onComplete?: OnApplicationComplete.NoOpOC}) {
        promiseChain = promiseChain.then(async () => composer.addAppCallMethodCall(await client.params.unstake(params)))
        resultMappers.push(undefined)
        return this
      },
      /**
       * Add a gas()void method call against the staking contract
       */
      gas(params: CallParams<StakingArgs['obj']['gas()void'] | StakingArgs['tuple']['gas()void']> & {onComplete?: OnApplicationComplete.NoOpOC}) {
        promiseChain = promiseChain.then(async () => composer.addAppCallMethodCall(await client.params.gas(params)))
        resultMappers.push(undefined)
        return this
      },
      get delete() {
        return {
          deleteApplication: (params: CallParams<StakingArgs['obj']['deleteApplication()void'] | StakingArgs['tuple']['deleteApplication()void']>) => {
            promiseChain = promiseChain.then(async () => composer.addAppDeleteMethodCall(await client.params.delete.deleteApplication(params)))
            resultMappers.push(undefined)
            return this
          },
        }
      },
      /**
       * Add a clear state call to the staking contract
       */
      clearState(params: AppClientBareCallParams) {
        promiseChain = promiseChain.then(() => composer.addAppCall(client.params.clearState(params)))
        return this
      },
      addTransaction(txn: Transaction, signer?: TransactionSigner) {
        promiseChain = promiseChain.then(() => composer.addTransaction(txn, signer))
        return this
      },
      async composer() {
        await promiseChain
        return composer
      },
      async simulate(options?: SimulateOptions) {
        await promiseChain
        const result = await (!options ? composer.simulate() : composer.simulate(options))
        return {
          ...result,
          returns: result.returns?.map((val, i) => resultMappers[i] !== undefined ? resultMappers[i]!(val) : val.returnValue)
        }
      },
      async send(params?: SendParams) {
        await promiseChain
        const result = await composer.send(params)
        return {
          ...result,
          returns: result.returns?.map((val, i) => resultMappers[i] !== undefined ? resultMappers[i]!(val) : val.returnValue)
        }
      }
    } as unknown as StakingComposer
  }
}
export type StakingComposer<TReturns extends [...any[]] = []> = {
  /**
   * Calls the initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  initApplication(params?: CallParams<StakingArgs['obj']['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void'] | StakingArgs['tuple']['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void']>): StakingComposer<[...TReturns, StakingReturns['initApplication(uint64,uint64,uint64,uint64,uint64,uint64,pay)void'] | undefined]>

  /**
   * Calls the fundRewards(axfer,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  fundRewards(params?: CallParams<StakingArgs['obj']['fundRewards(axfer,uint64)void'] | StakingArgs['tuple']['fundRewards(axfer,uint64)void']>): StakingComposer<[...TReturns, StakingReturns['fundRewards(axfer,uint64)void'] | undefined]>

  /**
   * Calls the fundMoreRewards(axfer,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  fundMoreRewards(params?: CallParams<StakingArgs['obj']['fundMoreRewards(axfer,uint64)void'] | StakingArgs['tuple']['fundMoreRewards(axfer,uint64)void']>): StakingComposer<[...TReturns, StakingReturns['fundMoreRewards(axfer,uint64)void'] | undefined]>

  /**
   * Calls the removeRewards()void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  removeRewards(params?: CallParams<StakingArgs['obj']['removeRewards()void'] | StakingArgs['tuple']['removeRewards()void']>): StakingComposer<[...TReturns, StakingReturns['removeRewards()void'] | undefined]>

  /**
   * Calls the setContractActive()void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  setContractActive(params?: CallParams<StakingArgs['obj']['setContractActive()void'] | StakingArgs['tuple']['setContractActive()void']>): StakingComposer<[...TReturns, StakingReturns['setContractActive()void'] | undefined]>

  /**
   * Calls the setContractInactive()void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  setContractInactive(params?: CallParams<StakingArgs['obj']['setContractInactive()void'] | StakingArgs['tuple']['setContractInactive()void']>): StakingComposer<[...TReturns, StakingReturns['setContractInactive()void'] | undefined]>

  /**
   * Calls the updateAdminAddress(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  updateAdminAddress(params?: CallParams<StakingArgs['obj']['updateAdminAddress(address)void'] | StakingArgs['tuple']['updateAdminAddress(address)void']>): StakingComposer<[...TReturns, StakingReturns['updateAdminAddress(address)void'] | undefined]>

  /**
   * Calls the updateSuperAdminAddress(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  updateSuperAdminAddress(params?: CallParams<StakingArgs['obj']['updateSuperAdminAddress(address)void'] | StakingArgs['tuple']['updateSuperAdminAddress(address)void']>): StakingComposer<[...TReturns, StakingReturns['updateSuperAdminAddress(address)void'] | undefined]>

  /**
   * Calls the withdrawPlatformFees(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  withdrawPlatformFees(params?: CallParams<StakingArgs['obj']['withdrawPlatformFees(address)void'] | StakingArgs['tuple']['withdrawPlatformFees(address)void']>): StakingComposer<[...TReturns, StakingReturns['withdrawPlatformFees(address)void'] | undefined]>

  /**
   * Calls the emergencyWithdrawAsset(uint64,uint64,address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  emergencyWithdrawAsset(params?: CallParams<StakingArgs['obj']['emergencyWithdrawAsset(uint64,uint64,address)void'] | StakingArgs['tuple']['emergencyWithdrawAsset(uint64,uint64,address)void']>): StakingComposer<[...TReturns, StakingReturns['emergencyWithdrawAsset(uint64,uint64,address)void'] | undefined]>

  /**
   * Calls the stake(axfer,uint64,pay)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  stake(params?: CallParams<StakingArgs['obj']['stake(axfer,uint64,pay)void'] | StakingArgs['tuple']['stake(axfer,uint64,pay)void']>): StakingComposer<[...TReturns, StakingReturns['stake(axfer,uint64,pay)void'] | undefined]>

  /**
   * Calls the claimRewards()void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  claimRewards(params?: CallParams<StakingArgs['obj']['claimRewards()void'] | StakingArgs['tuple']['claimRewards()void']>): StakingComposer<[...TReturns, StakingReturns['claimRewards()void'] | undefined]>

  /**
   * Calls the unstake(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  unstake(params?: CallParams<StakingArgs['obj']['unstake(uint64)void'] | StakingArgs['tuple']['unstake(uint64)void']>): StakingComposer<[...TReturns, StakingReturns['unstake(uint64)void'] | undefined]>

  /**
   * Calls the gas()void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  gas(params?: CallParams<StakingArgs['obj']['gas()void'] | StakingArgs['tuple']['gas()void']>): StakingComposer<[...TReturns, StakingReturns['gas()void'] | undefined]>

  /**
   * Gets available delete methods
   */
  readonly delete: {
    /**
     * Deletes an existing instance of the staking smart contract using the deleteApplication()void ABI method.
     *
     * @param args The arguments for the smart contract call
     * @param params Any additional parameters for the call
     * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
     */
    deleteApplication(params?: CallParams<StakingArgs['obj']['deleteApplication()void'] | StakingArgs['tuple']['deleteApplication()void']>): StakingComposer<[...TReturns, StakingReturns['deleteApplication()void'] | undefined]>
  }

  /**
   * Makes a clear_state call to an existing instance of the staking smart contract.
   *
   * @param args The arguments for the bare call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  clearState(params?: AppClientBareCallParams): StakingComposer<[...TReturns, undefined]>

  /**
   * Adds a transaction to the composer
   *
   * @param txn A transaction to add to the transaction group
   * @param signer The optional signer to use when signing this transaction.
   */
  addTransaction(txn: Transaction, signer?: TransactionSigner): StakingComposer<TReturns>
  /**
   * Returns the underlying AtomicTransactionComposer instance
   */
  composer(): Promise<TransactionComposer>
  /**
   * Simulates the transaction group and returns the result
   */
  simulate(): Promise<StakingComposerResults<TReturns> & { simulateResponse: modelsv2.SimulateResponse }>
  simulate(options: SkipSignaturesSimulateOptions): Promise<StakingComposerResults<TReturns> & { simulateResponse: modelsv2.SimulateResponse }>
  simulate(options: RawSimulateOptions): Promise<StakingComposerResults<TReturns> & { simulateResponse: modelsv2.SimulateResponse }>
  /**
   * Sends the transaction group to the network and returns the results
   */
  send(params?: SendParams): Promise<StakingComposerResults<TReturns>>
}
export type StakingComposerResults<TReturns extends [...any[]]> = Expand<SendAtomicTransactionComposerResults & {
  returns: TReturns
}>

